"use strict";(self.webpackChunkdora_dora=self.webpackChunkdora_dora||[]).push([[672],{70672:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Jt});var o=n(9950),i=n(35023),a=n(84532),l=n(20829),s=(n(4567),n(91503)),c=n(87700),r=n(1356),u=n(67818),p=n(80540),d=n(57559),_=n(71500),h=n(80505),m=n(42384),y=n(26309),g=n(84765),b=n(86292);const k=new Set,v={add(e){k.add(e)},getCode:()=>Array.from(k).map((e=>`local ${e} <const> = require("${e}")`)).join("\n"),clear(){k.clear()}},f=null!==g.A.locale.match(/^zh/),T={kind:"category",name:f?"\u58f0\u660e":"Declare",categorystyle:"variable_category",contents:[]},N=T,E={type:"declare_variable",message0:f?"\u58f0\u660e\u53d8\u91cf %1 \u4e3a %2":"Declare variable %1 as %2",args0:[{type:"field_variable",name:"VAR",variable:"temp"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks"};l.rK.declare_variable={init:function(){this.jsonInit(E)}},s.YW.forBlock.declare_variable=function(e){const t=s.YW.getVariableName(e.getFieldValue("VAR")),n=s.YW.valueToCode(e,"VALUE",s.pH.NONE);return""===n?`local ${t}\n`:`local ${t} = ${n}\n`},T.contents.push({kind:"block",type:"declare_variable"}),T.contents.push({kind:"block",type:"declare_variable",inputs:{VALUE:{block:{type:"math_number",fields:{NUM:0}}}}}),T.contents.push({kind:"block",type:"declare_variable",inputs:{VALUE:{block:{type:"logic_boolean",fields:{BOOL:"FALSE"}}}}}),T.contents.push({kind:"block",type:"declare_variable",inputs:{VALUE:{block:{type:"text",fields:{TEXT:""}}}}}),T.contents.push({kind:"block",type:"declare_variable",inputs:{VALUE:{block:{type:"lists_create_with"}}}}),T.contents.push({kind:"block",type:"declare_variable",inputs:{VALUE:{block:{type:"dict_create"}}}}),T.contents.push({kind:"block",type:"declare_variable",inputs:{VALUE:{block:{type:"node_create"}}}}),T.contents.push({kind:"block",type:"declare_variable",inputs:{VALUE:{block:{type:"sprite_create",inputs:{FILE:{shadow:{type:"text",fields:{TEXT:"Image/logo.png"}}}}}}}}),T.contents.push({kind:"block",type:"declare_variable",inputs:{VALUE:{block:{type:"label_create",inputs:{FONT:{shadow:{type:"text",fields:{TEXT:"sarasa-mono-sc-regular"}}},SIZE:{shadow:{type:"math_number",fields:{NUM:16}}}}}}}}),T.contents.push({kind:"block",type:"declare_variable",inputs:{VALUE:{block:{type:"physics_world_create"}}}}),T.contents.push({kind:"block",type:"declare_variable",inputs:{VALUE:{block:{type:"body_create",inputs:{POSITION:{shadow:{type:"vec2_create",inputs:{X:{shadow:{type:"math_number",fields:{NUM:0}}},Y:{shadow:{type:"math_number",fields:{NUM:0}}}}}},ANGLE:{shadow:{type:"math_number",fields:{NUM:0}}},GROUP:{shadow:{type:"math_number",fields:{NUM:0}}},GRAVITY:{shadow:{type:"vec2_create",inputs:{X:{shadow:{type:"math_number",fields:{NUM:0}}},Y:{shadow:{type:"math_number",fields:{NUM:-9.8}}}}}}}}}}});const I=null!==g.A.locale.match(/^zh/),C={kind:"category",name:I?"\u8282\u70b9":"Node",categorystyle:"logic_category",contents:[]},O=C,S={type:"node_create",message0:I?"\u521b\u5efa\u8282\u70b9":"Create node",output:"Node",style:"logic_blocks"};l.rK.node_create={init:function(){this.jsonInit(S)}},s.YW.forBlock.node_create=function(e){return v.add("Node"),["Node()",s.pH.ATOMIC]},C.contents.push({kind:"block",type:"node_create"});const Y={type:"node_remove",message0:I?"\u5220\u9664\u8282\u70b9 %1":"Remove node %1",args0:[{type:"field_variable",name:"NODE",variable:"temp"}],previousStatement:null,nextStatement:null,style:"logic_blocks"};l.rK.node_remove={init:function(){this.jsonInit(Y)}},s.YW.forBlock.node_remove=function(e){return`${s.YW.getVariableName(e.getFieldValue("NODE"))}:removeFromParent()\n`},C.contents.push({kind:"block",type:"node_remove"});const A={type:"node_add_child",message0:I?"\u6dfb\u52a0\u5b50\u8282\u70b9 %1 \u5230\u7236\u8282\u70b9 %2 \u987a\u5e8f\u4e3a %3":"Add child node %1 to parent %2 order %3",args0:[{type:"field_variable",name:"CHILD",variable:"temp"},{type:"field_variable",name:"PARENT",variable:"parent"},{type:"input_value",name:"ORDER",check:"Number"}],previousStatement:null,nextStatement:null,style:"logic_blocks"};l.rK.node_add_child={init:function(){this.jsonInit(A)}},s.YW.forBlock.node_add_child=function(e){return`${s.YW.getVariableName(e.getFieldValue("CHILD"))}:addTo(${s.YW.getVariableName(e.getFieldValue("PARENT"))}, ${s.YW.valueToCode(e,"ORDER",s.pH.NONE)})\n`},C.contents.push({kind:"block",type:"node_add_child",inputs:{ORDER:{shadow:{type:"math_number",fields:{NUM:0}}}}});const D={type:"node_set_number_attribute",message0:I?"\u8bbe\u7f6e %1 \u7684 %2 \u6570\u503c\u4e3a %3":"Set %1 %2 number to %3",args0:[{type:"field_variable",name:"NODE",variable:"temp"},{type:"field_dropdown",name:"ATTRIBUTE",options:I?[["X \u5750\u6807","x"],["Y \u5750\u6807","y"],["Z \u5750\u6807","z"],["\u5bbd\u5ea6","width"],["\u9ad8\u5ea6","height"],["\u89d2\u5ea6","angle"],["X \u89d2\u5ea6","angleX"],["Y \u89d2\u5ea6","angleY"],["\u7f29\u653e","scale"],["X \u7f29\u653e","scaleX"],["Y \u7f29\u653e","scaleY"],["\u4e0d\u900f\u660e\u5ea6","opacity"],["[\u521a\u4f53\u8282\u70b9] \u901f\u5ea6 X","velocityX"],["[\u521a\u4f53\u8282\u70b9] \u901f\u5ea6 Y","velocityY"],["[\u521a\u4f53\u8282\u70b9] \u89d2\u901f\u5ea6","angularRate"],["[\u521a\u4f53\u8282\u70b9] \u5206\u7ec4","group"],["[\u521a\u4f53\u8282\u70b9] \u7ebf\u6027\u963b\u5c3c","linearDamping"],["[\u521a\u4f53\u8282\u70b9] \u89d2\u963b\u5c3c","angularDamping"]]:[["X","x"],["Y","y"],["Z","z"],["Width","width"],["Height","height"],["Angle","angle"],["AngleX","angleX"],["AngleY","angleY"],["Scale","scale"],["ScaleX","scaleX"],["ScaleY","scaleY"],["Opacity","opacity"],["[Body] VelocityX","velocityX"],["[Body] VelocityY","velocityY"],["[Body] AngularRate","angularRate"],["[Body] Group","group"],["[Body] LinearDamping","linearDamping"],["[Body] AngularDamping","angularDamping"]]},{type:"input_value",name:"VALUE",check:"Number"}],previousStatement:null,nextStatement:null,style:"logic_blocks"};l.rK.node_set_number_attribute={init:function(){this.jsonInit(D)}},s.YW.forBlock.node_set_number_attribute=function(e){const t=s.YW.getVariableName(e.getFieldValue("NODE")),n=e.getFieldValue("ATTRIBUTE"),o=s.YW.valueToCode(e,"VALUE",s.pH.NONE);if("scale"===n){var i;const e=null===(i=s.YW.nameDB_)||void 0===i?void 0:i.getDistinctName("scale",l.fS.NameType.VARIABLE);return`local ${e} = ${""===o?"0":o}\n${t}.scaleX = ${e}\n${t}.scaleY = ${e}\n`}return`${t}.${n} = ${""===o?"0":o}\n`},C.contents.push({kind:"block",type:"node_set_number_attribute",inputs:{VALUE:{shadow:{type:"math_number",fields:{NUM:0}}}}});const w={type:"node_set_boolean_attribute",message0:I?"\u8bbe\u7f6e %1 \u7684 %2 \u5e03\u5c14\u503c\u4e3a %3":"Set %1 %2 boolean to %3",args0:[{type:"field_variable",name:"NODE",variable:"temp"},{type:"field_dropdown",name:"ATTRIBUTE",options:I?[["\u53ef\u89c1","visible"],["\u8c03\u8bd5\u53ef\u89c1","showDebug"]]:[["Visible","visible"],["Show Debug","showDebug"]]},{type:"input_value",name:"VALUE",check:"Boolean"}],previousStatement:null,nextStatement:null,style:"logic_blocks"};l.rK.node_set_boolean_attribute={init:function(){this.jsonInit(w)}},s.YW.forBlock.node_set_boolean_attribute=function(e){const t=s.YW.getVariableName(e.getFieldValue("NODE")),n=e.getFieldValue("ATTRIBUTE"),o=s.YW.valueToCode(e,"VALUE",s.pH.NONE);return`${t}.${n} = ${""===o?"true":o}\n`},C.contents.push({kind:"block",type:"node_set_boolean_attribute",inputs:{VALUE:{shadow:{type:"logic_boolean",fields:{BOOL:"TRUE"}}}}});const W={type:"node_set_vec2_attribute",message0:I?"\u8bbe\u7f6e %1 \u7684 %2 \u5411\u91cf\u4e3a %3":"Set %1 %2 Vec2 to %3",args0:[{type:"field_variable",name:"NODE",variable:"temp"},{type:"field_dropdown",name:"ATTRIBUTE",options:I?[["\u4f4d\u7f6e","position"],["\u5927\u5c0f","size"],["\u7f29\u653e","scale"],["\u951a\u70b9","anchor"],["[\u521a\u4f53\u8282\u70b9] \u901f\u5ea6","velocity"]]:[["Position","position"],["Size","size"],["Scale","scale"],["Anchor","anchor"],["[Body] Velocity","velocity"]]},{type:"input_value",name:"VEC2",check:"Vec2"}],previousStatement:null,nextStatement:null,style:"logic_blocks"};l.rK.node_set_vec2_attribute={init:function(){this.jsonInit(W)}},s.YW.forBlock.node_set_vec2_attribute=function(e){const t=s.YW.getVariableName(e.getFieldValue("NODE")),n=e.getFieldValue("ATTRIBUTE");let o=s.YW.valueToCode(e,"VEC2",s.pH.NONE);if(""===o&&(v.add("Vec2"),o="Vec2.zero"),"size"===n)return v.add("Size"),`${t}.size = Size(${o})\n`;if("scale"===n){var i;const e=null===(i=s.YW.nameDB_)||void 0===i?void 0:i.getDistinctName("scale",l.fS.NameType.VARIABLE);return`local ${e} = ${o}\n${t}.scaleX = ${e}.x\n${t}.scaleY = ${e}.y\n`}return`${t}.${n} = ${o}\n`},C.contents.push({kind:"block",type:"node_set_vec2_attribute",inputs:{VEC2:{shadow:{type:"vec2_create",inputs:{X:{shadow:{type:"math_number",fields:{NUM:0}}},Y:{shadow:{type:"math_number",fields:{NUM:0}}}}}}}});const V={type:"node_set_color",message0:I?"\u8bbe\u7f6e %1 \u7684\u989c\u8272\u4e3a %2":"Set %1 color to %2",args0:[{type:"field_variable",name:"NODE",variable:"temp"},{type:"input_value",name:"COLOR",check:"Color3"}],previousStatement:null,nextStatement:null,style:"logic_blocks"};l.rK.node_set_color={init:function(){this.jsonInit(V)}},s.YW.forBlock.node_set_color=function(e){const t=s.YW.getVariableName(e.getFieldValue("NODE")),n=s.YW.valueToCode(e,"COLOR",s.pH.NONE);return v.add("Color3"),`${t}.color3 = Color3(${""===n?"0xffffff":n})\n`},C.contents.push({kind:"block",type:"node_set_color",inputs:{COLOR:{shadow:{type:"colour_hsv_sliders"}}}});const B={type:"node_get_number_attribute",message0:I?"\u83b7\u53d6 %1 \u7684 %2 \u6570\u503c":"Get %1 %2 number",args0:[{type:"field_variable",name:"NODE",variable:"temp"},{type:"field_dropdown",name:"ATTRIBUTE",options:I?[["X \u5750\u6807","x"],["Y \u5750\u6807","y"],["Z \u5750\u6807","z"],["\u5bbd\u5ea6","width"],["\u9ad8\u5ea6","height"],["\u89d2\u5ea6","angle"],["X \u89d2\u5ea6","angleX"],["Y \u89d2\u5ea6","angleY"],["X \u7f29\u653e","scaleX"],["Y \u7f29\u653e","scaleY"],["X \u951a\u70b9","anchorX"],["Y \u951a\u70b9","anchorY"],["\u4e0d\u900f\u660e\u5ea6","opacity"],["[\u521a\u4f53\u8282\u70b9] \u901f\u5ea6 X","velocityX"],["[\u521a\u4f53\u8282\u70b9] \u901f\u5ea6 Y","velocityY"],["[\u521a\u4f53\u8282\u70b9] \u89d2\u901f\u5ea6","angularRate"],["[\u521a\u4f53\u8282\u70b9] \u5206\u7ec4","group"],["[\u521a\u4f53\u8282\u70b9] \u7ebf\u6027\u963b\u5c3c","linearDamping"],["[\u521a\u4f53\u8282\u70b9] \u89d2\u963b\u5c3c","angularDamping"],["[\u521a\u4f53\u8282\u70b9] \u8d28\u91cf","mass"]]:[["X","x"],["Y","y"],["Z","z"],["Width","width"],["Height","height"],["Angle","angle"],["AngleX","angleX"],["AngleY","angleY"],["ScaleX","scaleX"],["ScaleY","scaleY"],["AnchorX","anchorX"],["AnchorY","anchorY"],["Opacity","opacity"],["[Body] VelocityX","velocityX"],["[Body] VelocityY","velocityY"],["[Body] AngularRate","angularRate"],["[Body] Group","group"],["[Body] LinearDamping","linearDamping"],["[Body] AngularDamping","angularDamping"],["[Body] Mass","mass"]]}],output:"Number",style:"math_blocks"};l.rK.node_get_number_attribute={init:function(){this.jsonInit(B)}},s.YW.forBlock.node_get_number_attribute=function(e){const t=s.YW.getVariableName(e.getFieldValue("NODE")),n=e.getFieldValue("ATTRIBUTE");return"anchorX"===n?[`${t}.anchor.x`,s.pH.ATOMIC]:"anchorY"===n?[`${t}.anchor.y`,s.pH.ATOMIC]:[`${t}.${n}`,s.pH.ATOMIC]},C.contents.push({kind:"block",type:"node_get_number_attribute"});const R={type:"node_get_boolean_attribute",message0:I?"\u83b7\u53d6 %1 \u7684 %2 \u5e03\u5c14\u503c":"Get %1 %2 boolean",args0:[{type:"field_variable",name:"NODE",variable:"temp"},{type:"field_dropdown",name:"ATTRIBUTE",options:I?[["\u53ef\u89c1","visible"],["\u8c03\u8bd5\u53ef\u89c1","showDebug"]]:[["Visible","visible"],["Show Debug","showDebug"]]}],output:"Boolean",style:"math_blocks"};l.rK.node_get_boolean_attribute={init:function(){this.jsonInit(R)}},s.YW.forBlock.node_get_boolean_attribute=function(e){return[`${s.YW.getVariableName(e.getFieldValue("NODE"))}.${e.getFieldValue("ATTRIBUTE")}`,s.pH.ATOMIC]},C.contents.push({kind:"block",type:"node_get_boolean_attribute"});const $={type:"node_get_vec2_attribute",message0:I?"\u83b7\u53d6 %1 \u7684 %2 \u5411\u91cf":"Get %1 %2 Vec2",args0:[{type:"field_variable",name:"NODE",variable:"temp"},{type:"field_dropdown",name:"ATTRIBUTE",options:I?[["\u4f4d\u7f6e","position"],["\u5927\u5c0f","size"],["\u7f29\u653e","scale"],["\u951a\u70b9","anchor"],["[\u521a\u4f53\u8282\u70b9] \u901f\u5ea6","velocity"]]:[["Position","position"],["Size","size"],["Scale","scale"],["Anchor","anchor"],["[Body] Velocity","velocity"]]}],output:"Vec2",style:"math_blocks"};l.rK.node_get_vec2_attribute={init:function(){this.jsonInit($)}},s.YW.forBlock.node_get_vec2_attribute=function(e){const t=s.YW.getVariableName(e.getFieldValue("NODE")),n=e.getFieldValue("ATTRIBUTE");return"size"===n?(v.add("Vec2"),[`Vec2(${t}.size)`,s.pH.ATOMIC]):"scale"===n?(v.add("Vec2"),[`Vec2(${t}.scaleX, ${t}.scaleY)`,s.pH.ATOMIC]):[`${t}.${n}`,s.pH.ATOMIC]},C.contents.push({kind:"block",type:"node_get_vec2_attribute"});const U={type:"node_get_color",message0:I?"\u83b7\u53d6 %1 \u7684\u989c\u8272":"Get %1 color",args0:[{type:"field_variable",name:"NODE",variable:"temp"}],output:"Color3",style:"math_blocks"};l.rK.node_get_color={init:function(){this.jsonInit(U)}},s.YW.forBlock.node_get_color=function(e){return[`${s.YW.getVariableName(e.getFieldValue("NODE"))}.color3:toRGB()`,s.pH.ATOMIC]},C.contents.push({kind:"block",type:"node_get_color"});const M=null!==g.A.locale.match(/^zh/),H={kind:"category",name:M?"\u56fe\u5f62":"Graphic",categorystyle:"logic_category",contents:[]},x=H,F={type:"sprite_create",message0:M?"\u521b\u5efa\u7cbe\u7075\u8282\u70b9\uff0c\u4f7f\u7528\u6587\u4ef6 %1":"Create sprite node from file %1",args0:[{type:"input_value",name:"FILE",check:"String"}],output:"Sprite",style:"logic_blocks"};l.rK.sprite_create={init:function(){this.jsonInit(F)}},s.YW.forBlock.sprite_create=function(e){const t=s.YW.valueToCode(e,"FILE",s.pH.NONE);return v.add("Sprite"),[`Sprite(${t})`,s.pH.ATOMIC]},H.contents.push({kind:"block",type:"sprite_create",inputs:{FILE:{shadow:{type:"text",fields:{TEXT:"Image/logo.png"}}}}});const L={type:"label_create",message0:M?"\u521b\u5efa\u6587\u5b57\u8282\u70b9\n\u5b57\u4f53\u4e3a %1\n\u5927\u5c0f\u4e3a %2":"Create label node\nfont is %1\nsize is %2",args0:[{type:"input_value",name:"FONT",check:"String"},{type:"input_value",name:"SIZE",check:"Number"}],output:"Label",style:"logic_blocks"};l.rK.label_create={init:function(){this.jsonInit(L)}},s.YW.forBlock.label_create=function(e){const t=s.YW.valueToCode(e,"FONT",s.pH.NONE),n=s.YW.valueToCode(e,"SIZE",s.pH.NONE);return v.add("Label"),[`Label(${t}, ${""===n?"16":n})`,s.pH.ATOMIC]},H.contents.push({kind:"block",type:"label_create",inputs:{FONT:{shadow:{type:"text",fields:{TEXT:"sarasa-mono-sc-regular"}}},SIZE:{shadow:{type:"math_number",fields:{NUM:16}}}}});const P={type:"label_set_text",message0:M?"\u8bbe\u7f6e\u6587\u5b57\u8282\u70b9 %1 \u7684\u6587\u672c\u4e3a %2":"Set label node %1 text to %2",args0:[{type:"field_variable",name:"LABEL",variable:"temp"},{type:"input_value",name:"TEXT",check:"String"}],previousStatement:null,nextStatement:null,style:"logic_blocks"};l.rK.label_set_text={init:function(){this.jsonInit(P)}},s.YW.forBlock.label_set_text=function(e){const t=s.YW.getVariableName(e.getFieldValue("LABEL")),n=s.YW.valueToCode(e,"TEXT",s.pH.NONE);return`${t}.text = ${""===n?'""':n}\n`},H.contents.push({kind:"block",type:"label_set_text",inputs:{TEXT:{shadow:{type:"text",fields:{TEXT:""}}}}});const X=null!==g.A.locale.match(/^zh/),K={kind:"category",name:X?"\u4e8b\u4ef6":"Event",categorystyle:"procedure_category",contents:[]},j=K,G={type:"on_update",message0:X?"\u5f53\u8282\u70b9 %1 \u66f4\u65b0\u65f6\uff0c\u66f4\u65b0\u95f4\u9694\u4e3a %2\n\u505a %3":"When node %1 updates, the delta time is %2\ndo %3",args0:[{type:"field_variable",name:"NODE",variable:"temp"},{type:"field_variable",name:"DELTA_TIME",variable:"dt"},{type:"input_statement",name:"ACTION"}],tooltip:X?"\u6ce8\u518c\u8282\u70b9\u66f4\u65b0\u4e8b\u4ef6\uff0c\u6bcf\u5e27\u6267\u884c\u4e00\u6b21\uff0c\u5728\u66f4\u65b0\u5904\u7406\u4e2d\u8fd4\u56de true \u6765\u505c\u6b62\u3002":"Register node update event, execute once per frame, return true in update processing to stop.",previousStatement:null,nextStatement:null,style:"procedure_blocks"};l.rK.on_update={init:function(){this.jsonInit(G)}},s.YW.forBlock.on_update=function(e){return`${s.YW.getVariableName(e.getFieldValue("NODE"))}:onUpdate(function(${s.YW.getVariableName(e.getFieldValue("DELTA_TIME"))})\n${s.YW.statementToCode(e,"ACTION")}end)\n`},K.contents.push({kind:"block",type:"on_update"});const z={type:"on_tap_event",message0:X?"\u5f53\u8282\u70b9 %1 \u7684 %2 \u4e8b\u4ef6\u53d1\u751f\n\u63a5\u6536\u5230\u53c2\u6570 %3\n\u505a %4":"When node %1 %2 event occurs\nreceive parameter %3\ndo %4",args0:[{type:"field_variable",name:"NODE",variable:"temp"},{type:"field_dropdown",name:"EVENT",options:X?[["\u70b9\u51fb\u5f00\u59cb","TapBegan"],["\u70b9\u51fb\u8fc7\u6ee4","TapFilter"],["\u70b9\u51fb\u79fb\u52a8","TapMoved"],["\u70b9\u51fb\u7ed3\u675f","TapEnded"],["\u70b9\u51fb\u5b8c\u6210","Tapped"]]:[["Tap Began","TapBegan"],["Tap Filter","TapFilter"],["Tap Moved","TapMoved"],["Tap Ended","TapEnded"],["Tapped","Tapped"]]},{type:"field_variable",name:"TOUCH",variable:"touch"},{type:"input_statement",name:"ACTION"}],previousStatement:null,nextStatement:null,style:"procedure_blocks"};l.rK.on_tap_event={init:function(){this.jsonInit(z)}},s.YW.forBlock.on_tap_event=function(e){return`${s.YW.getVariableName(e.getFieldValue("NODE"))}:on${e.getFieldValue("EVENT")}(function(${s.YW.getVariableName(e.getFieldValue("TOUCH"))})\n${s.YW.statementToCode(e,"ACTION")}end)\n`},K.contents.push({kind:"block",type:"on_tap_event"});const Q={type:"get_touch_vec2_attribute",message0:X?"\u83b7\u53d6\u70b9\u51fb %1 \u7684 %2 \u5411\u91cf":"Get touch %1 %2 Vec2",args0:[{type:"field_variable",name:"TOUCH",variable:"touch"},{type:"field_dropdown",name:"ATTRIBUTE",options:X?[["\u672c\u5730\u5750\u6807","location"],["\u4e16\u754c\u5750\u6807","worldLocation"],["\u4f4d\u79fb\u91cf","delta"]]:[["Location","location"],["World location","worldLocation"],["Delta move","delta"]]}],output:"Vec2",style:"math_blocks"};l.rK.get_touch_vec2_attribute={init:function(){this.jsonInit(Q)}},s.YW.forBlock.get_touch_vec2_attribute=function(e){return[`${s.YW.getVariableName(e.getFieldValue("TOUCH"))}.${e.getFieldValue("ATTRIBUTE")}`,s.pH.ATOMIC]},K.contents.push({kind:"block",type:"get_touch_vec2_attribute"});const q={type:"get_touch_number_attribute",message0:X?"\u83b7\u53d6\u70b9\u51fb %1 \u7684 %2 \u6570\u503c":"Get touch %1 %2 number",args0:[{type:"field_variable",name:"TOUCH",variable:"touch"},{type:"field_dropdown",name:"ATTRIBUTE",options:X?[["\u7f16\u53f7","id"],["X \u5750\u6807","x"],["Y \u5750\u6807","y"],["\u4e16\u754c X \u5750\u6807","worldX"],["\u4e16\u754c Y \u5750\u6807","worldY"]]:[["ID","id"],["X","x"],["Y","y"],["World X","worldX"],["World Y","worldY"]]}],output:"Number",style:"math_blocks"};l.rK.get_touch_number_attribute={init:function(){this.jsonInit(q)}},s.YW.forBlock.get_touch_number_attribute=function(e){const t=s.YW.getVariableName(e.getFieldValue("TOUCH")),n=e.getFieldValue("ATTRIBUTE");return"x"===n?[`${t}.location.x`,s.pH.ATOMIC]:"y"===n?[`${t}.location.y`,s.pH.ATOMIC]:"worldX"===n?[`${t}.worldLocation.x`,s.pH.ATOMIC]:"worldY"===n?[`${t}.worldLocation.y`,s.pH.ATOMIC]:"id"===n?[`${t}.id`,s.pH.ATOMIC]:["0",s.pH.ATOMIC]},K.contents.push({kind:"block",type:"get_touch_number_attribute"});const Z={type:"disable_touch",message0:X?"\u7981\u7528\u70b9\u51fb %1":"Disable touch %1",args0:[{type:"field_variable",name:"NODE",variable:"touch"}],previousStatement:null,nextStatement:null,style:"procedure_blocks"};l.rK.disable_touch={init:function(){this.jsonInit(Z)}},s.YW.forBlock.disable_touch=function(e){return`${s.YW.getVariableName(e.getFieldValue("NODE"))}.enabled = false\n`},K.contents.push({kind:"block",type:"disable_touch"});const J=X?[["\u56de\u8f66","Return"],["ESC","Escape"],["\u9000\u683c","BackSpace"],["Tab","Tab"],["\u7a7a\u683c","Space"],["!","!"],['"','"'],["#","#"],["%","%"],["$","$"],["&","&"],["'","'"],["(","("],[")",")"],["*","*"],["+","+"],[",",","],["-","-"],[".","."],["/","/"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["0","0"],[":",":"],[";",";"],["<","<"],["=","="],[">",">"],["?","?"],["@","@"],["[","["],["\\","\\"],["]","]"],["^","^"],["_","_"],["`","`"],["A","A"],["B","B"],["C","C"],["D","D"],["E","E"],["F","F"],["G","G"],["H","H"],["I","I"],["J","J"],["K","K"],["L","L"],["M","M"],["N","N"],["O","O"],["P","P"],["Q","Q"],["R","R"],["S","S"],["T","T"],["U","U"],["V","V"],["W","W"],["X","X"],["Y","Y"],["Z","Z"],["\u5220\u9664","Delete"],["CapsLock","CapsLock"],["F1","F1"],["F2","F2"],["F3","F3"],["F4","F4"],["F5","F5"],["F6","F6"],["F7","F7"],["F8","F8"],["F9","F9"],["F10","F10"],["F11","F11"],["F12","F12"],["PrintScreen","PrintScreen"],["ScrollLock","ScrollLock"],["Pause","Pause"],["Insert","Insert"],["Home","Home"],["PageUp","PageUp"],["End","End"],["PageDown","PageDown"],["\u53f3","Right"],["\u5de6","Left"],["\u4e0b","Down"],["\u4e0a","Up"],["\u7cfb\u7edf\u952e","Application"],["\u5de6Ctrl","LCtrl"],["\u5de6Shift","LShift"],["\u5de6Alt","LAlt"],["\u5de6Gui","LGui"],["\u53f3Ctrl","RCtrl"],["\u53f3Shift","RShift"],["\u53f3Alt","RAlt"],["\u53f3Gui","RGui"]]:[["Return","Return"],["Escape","Escape"],["BackSpace","BackSpace"],["Tab","Tab"],["Space","Space"],["!","!"],['"','"'],["#","#"],["%","%"],["$","$"],["&","&"],["'","'"],["(","("],[")",")"],["*","*"],["+","+"],[",",","],["-","-"],[".","."],["/","/"],["1","1"],["2","2"],["3","3"],["4","4"],["5","5"],["6","6"],["7","7"],["8","8"],["9","9"],["0","0"],[":",":"],[";",";"],["<","<"],["=","="],[">",">"],["?","?"],["@","@"],["[","["],["\\","\\"],["]","]"],["^","^"],["_","_"],["`","`"],["A","A"],["B","B"],["C","C"],["D","D"],["E","E"],["F","F"],["G","G"],["H","H"],["I","I"],["J","J"],["K","K"],["L","L"],["M","M"],["N","N"],["O","O"],["P","P"],["Q","Q"],["R","R"],["S","S"],["T","T"],["U","U"],["V","V"],["W","W"],["X","X"],["Y","Y"],["Z","Z"],["Delete","Delete"],["CapsLock","CapsLock"],["F1","F1"],["F2","F2"],["F3","F3"],["F4","F4"],["F5","F5"],["F6","F6"],["F7","F7"],["F8","F8"],["F9","F9"],["F10","F10"],["F11","F11"],["F12","F12"],["PrintScreen","PrintScreen"],["ScrollLock","ScrollLock"],["Pause","Pause"],["Insert","Insert"],["Home","Home"],["PageUp","PageUp"],["Delete","Delete"],["End","End"],["PageDown","PageDown"],["Right","Right"],["Left","Left"],["Down","Down"],["Up","Up"],["Application","Application"],["LCtrl","LCtrl"],["LShift","LShift"],["LAlt","LAlt"],["LGui","LGui"],["RCtrl","RCtrl"],["RShift","RShift"],["RAlt","RAlt"],["RGui","RGui"]],ee={type:"on_keyboard_event",message0:X?"\u5f53\u8282\u70b9 %1 \u7684 %2 \u4e8b\u4ef6\u53d1\u751f\n\u89e6\u53d1\u6309\u952e\u4e3a %3\n\u505a %4":"When node %1 %2 event occurs\ntrigger key is %3\ndo %4",args0:[{type:"field_variable",name:"NODE",variable:"temp"},{type:"field_dropdown",name:"EVENT",options:X?[["\u952e\u76d8\u6309\u4e0b","KeyDown"],["\u952e\u76d8\u62ac\u8d77","KeyUp"],["\u952e\u76d8\u6309\u4f4f","KeyPressed"]]:[["Key Down","KeyDown"],["Key Up","KeyUp"],["Key Pressed","KeyPressed"]]},{type:"field_dropdown",name:"KEY",options:J},{type:"input_statement",name:"ACTION"}],previousStatement:null,nextStatement:null,style:"procedure_blocks"};l.rK.on_keyboard_event={init:function(){this.jsonInit(ee)}},s.YW.forBlock.on_keyboard_event=function(e){var t,n;const o=s.YW.getVariableName(e.getFieldValue("NODE")),i=e.getFieldValue("EVENT"),a=s.YW.quote_(e.getFieldValue("KEY")),c=s.YW.statementToCode(e,"ACTION"),r=null!==(t=null===(n=s.YW.nameDB_)||void 0===n?void 0:n.getDistinctName("key",l.fS.NameType.VARIABLE))&&void 0!==t?t:"key_";return`${o}:on${i}(function(${r})\n  if ${r} == ${a} then\n${c}  end\nend)\n`},K.contents.push({kind:"block",type:"on_keyboard_event"});const te={type:"check_key",message0:X?"\u68c0\u6d4b\u5230\u952e\u76d8\u6309\u952e %1 \u72b6\u6001\u4e3a %2":"Checked if keyboard %1 is %2",args0:[{type:"field_dropdown",name:"KEY",options:J},{type:"field_dropdown",name:"KEY_STATE",options:X?[["\u6309\u4e0b","KeyDown"],["\u62ac\u8d77","KeyUp"],["\u6309\u4f4f","KeyPressed"]]:[["Down","KeyDown"],["Up","KeyUp"],["Pressed","KeyPressed"]]}],output:"Boolean",style:"math_blocks"};l.rK.check_key={init:function(){this.jsonInit(te)}},s.YW.forBlock.check_key=function(e){const t=s.YW.quote_(e.getFieldValue("KEY")),n=e.getFieldValue("KEY_STATE");return v.add("Keyboard"),[`Keyboard:is${n}(${t})`,s.pH.ATOMIC]},K.contents.push({kind:"block",type:"check_key"});const ne=X?[["A","a"],["B","b"],["X","x"],["Y","y"],["\u5f00\u59cb","start"],["\u8fd4\u56de","back"],["\u4e0a","dpup"],["\u4e0b","dpdown"],["\u5de6","dpleft"],["\u53f3","dpright"],["\u5de6\u80a9\u952e","leftshoulder"],["\u5de6\u6447\u6746","leftstick"],["\u53f3\u80a9\u952e","rightshoulder"],["\u53f3\u6447\u6746","rightstick"]]:[["A","a"],["B","b"],["X","x"],["Y","y"],["Start","start"],["Back","back"],["Up","dpup"],["Down","dpdown"],["Left","dpleft"],["Right","dpright"],["LeftShoulder","leftshoulder"],["LeftStick","leftstick"],["RightShoulder","rightshoulder"],["RightStick","rightstick"]],oe={type:"on_button_event",message0:X?"\u5f53\u8282\u70b9 %1 \u7684 %2 \u4e8b\u4ef6\u53d1\u751f\n\u63a7\u5236\u5668\u7f16\u53f7\u4e3a %3\n\u89e6\u53d1\u6309\u94ae\u4e3a %4\n\u505a %5":"When node %1 %2 event occurs\ncontroller id is %3\ntrigger button is %4\ndo %5",args0:[{type:"field_variable",name:"NODE",variable:"temp"},{type:"field_dropdown",name:"EVENT",options:[["\u6309\u94ae\u6309\u4e0b","ButtonDown"],["\u6309\u94ae\u62ac\u8d77","ButtonUp"],["\u6309\u94ae\u6309\u4f4f","ButtonPressed"]]},{type:"input_value",name:"CONTROLLER_ID",check:"Number"},{type:"field_dropdown",name:"BUTTON",options:ne},{type:"input_statement",name:"ACTION"}],previousStatement:null,nextStatement:null,style:"procedure_blocks"};l.rK.on_button_event={init:function(){this.jsonInit(oe)}},s.YW.forBlock.on_button_event=function(e){var t,n,o,i;const a=s.YW.getVariableName(e.getFieldValue("NODE")),c=e.getFieldValue("EVENT"),r=s.YW.valueToCode(e,"CONTROLLER_ID",s.pH.NONE),u=s.YW.quote_(e.getFieldValue("BUTTON")),p=s.YW.statementToCode(e,"ACTION"),d=null!==(t=null===(n=s.YW.nameDB_)||void 0===n?void 0:n.getDistinctName("id",l.fS.NameType.VARIABLE))&&void 0!==t?t:"id_",_=null!==(o=null===(i=s.YW.nameDB_)||void 0===i?void 0:i.getDistinctName("button",l.fS.NameType.VARIABLE))&&void 0!==o?o:"button_";return`${a}:on${c}(function(${d}, ${_})\n  if ${d} == ${""===r?"0":r} and ${_} == ${u} then\n${p}  end\nend)\n`},K.contents.push({kind:"block",type:"on_button_event",inputs:{CONTROLLER_ID:{shadow:{type:"math_number",fields:{NUM:0}}}}});const ie={type:"check_controller_button",message0:X?"\u68c0\u6d4b\u5230\u63a7\u5236\u5668\u7f16\u53f7\u4e3a %1 \u7684\u6309\u94ae %2 \u72b6\u6001\u4e3a %3":"Checked if controller with id %1 button %2 is %3",args0:[{type:"input_value",name:"CONTROLLER_ID",check:"Number"},{type:"field_dropdown",name:"BUTTON",options:ne},{type:"field_dropdown",name:"STATE",options:X?[["\u6309\u4e0b","ButtonDown"],["\u62ac\u8d77","ButtonUp"],["\u6309\u4f4f","ButtonPressed"]]:[["Down","ButtonDown"],["Up","ButtonUp"],["Pressed","ButtonPressed"]]}],output:"Boolean",style:"math_blocks"};l.rK.check_controller_button={init:function(){this.jsonInit(ie)}},s.YW.forBlock.check_controller_button=function(e){const t=s.YW.valueToCode(e,"CONTROLLER_ID",s.pH.NONE),n=s.YW.quote_(e.getFieldValue("BUTTON")),o=e.getFieldValue("STATE");return v.add("Controller"),[`Controller:is${o}(${""===t?"0":t}, ${n})`,s.pH.ATOMIC]},K.contents.push({kind:"block",type:"check_controller_button",inputs:{CONTROLLER_ID:{shadow:{type:"math_number",fields:{NUM:0}}}}});const ae={type:"on_sensor_enter",message0:X?"\u5f53\u521a\u4f53\u8282\u70b9 %1 \u7684 %2 \u4e8b\u4ef6\u53d1\u751f\n\u63a5\u6536\u5230\u89e6\u53d1\u521a\u4f53\u4e3a %3 \u611f\u5e94\u5668\u7f16\u53f7\u4e3a %4\n\u505a %5":"When body node %1 %2 event occurs\nreceive trigger body %3 sensor tag %4\ndo %5",args0:[{type:"field_variable",name:"NODE",variable:"temp"},{type:"field_dropdown",name:"EVENT",options:X?[["\u521a\u4f53\u8fdb\u5165\u611f\u5e94\u5668","BodyEnter"],["\u521a\u4f53\u79bb\u5f00\u611f\u5e94\u5668","BodyLeave"]]:[["Body Enter Sensor","BodyEnter"],["Body Leave Sensor","BodyLeave"]]},{type:"field_variable",name:"BODY",variable:"body"},{type:"field_variable",name:"SENSOR_TAG",variable:"tag"},{type:"input_statement",name:"ACTION"}],previousStatement:null,nextStatement:null,style:"procedure_blocks"};l.rK.on_sensor_enter={init:function(){this.jsonInit(ae)}},s.YW.forBlock.on_sensor_enter=function(e){return`${s.YW.getVariableName(e.getFieldValue("NODE"))}:on${e.getFieldValue("EVENT")}(function(${s.YW.getVariableName(e.getFieldValue("BODY"))}, ${s.YW.getVariableName(e.getFieldValue("SENSOR_TAG"))})\n${s.YW.statementToCode(e,"ACTION")}end)\n`},K.contents.push({kind:"block",type:"on_sensor_enter"});const le={type:"on_contact_filter",message0:X?"\u5f53\u521a\u4f53\u8282\u70b9 %1 \u7684\u63a5\u89e6\u8fc7\u6ee4\u4e8b\u4ef6\u53d1\u751f\n\u63a5\u6536\u5230\u63a5\u89e6\u521a\u4f53\u4e3a %2\n\u505a %3":"When body node %1 contact filter event occurs\nreceive contact body %2\ndo %3",args0:[{type:"field_variable",name:"BODY",variable:"temp"},{type:"field_variable",name:"OTHER",variable:"other"},{type:"input_statement",name:"ACTION"}],previousStatement:null,nextStatement:null,style:"procedure_blocks"};l.rK.on_contact_filter={init:function(){this.jsonInit(le)}},s.YW.forBlock.on_contact_filter=function(e){return`${s.YW.getVariableName(e.getFieldValue("BODY"))}:onContactFilter(function(${s.YW.getVariableName(e.getFieldValue("OTHER"))})\n${s.YW.statementToCode(e,"ACTION")}end)\n`},K.contents.push({kind:"block",type:"on_contact_filter",inputs:{ACTION:{block:{type:"return_block",inputs:{VALUE:{shadow:{type:"logic_boolean"}}}}}}});const se={type:"on_contact_event",message0:X?"\u5f53\u521a\u4f53\u8282\u70b9 %1 \u7684 %2 \u4e8b\u4ef6\u53d1\u751f\n\u63a5\u6536\u5230\u63a5\u89e6\u521a\u4f53\u4e3a %3 \u63a5\u89e6\u70b9\u4e3a %4 \u6cd5\u5411\u91cf\u4e3a %5 \u662f\u5426\u542f\u7528\u4e3a %6\n\u505a %7":"When body node %1 %2 event occurs\nreceive contact body %3 contact point %4 normal vector %5 enabled %6\ndo %7",args0:[{type:"field_variable",name:"NODE",variable:"temp"},{type:"field_dropdown",name:"EVENT",options:X?[["\u521a\u4f53\u78b0\u649e\u63a5\u89e6\u5f00\u59cb","ContactStart"],["\u521a\u4f53\u78b0\u649e\u63a5\u89e6\u7ed3\u675f","ContactEnd"]]:[["Body Contact Start","ContactStart"],["Body Contact End","ContactEnd"]]},{type:"field_variable",name:"OTHER",variable:"other"},{type:"field_variable",name:"POINT",variable:"point"},{type:"field_variable",name:"NORMAL",variable:"normal"},{type:"field_variable",name:"ENABLED",variable:"enabled"},{type:"input_statement",name:"ACTION"}],previousStatement:null,nextStatement:null,style:"procedure_blocks"};l.rK.on_contact_event={init:function(){this.jsonInit(se)}},s.YW.forBlock.on_contact_event=function(e){return`${s.YW.getVariableName(e.getFieldValue("NODE"))}:on${e.getFieldValue("EVENT")}(function(${s.YW.getVariableName(e.getFieldValue("OTHER"))}, ${s.YW.getVariableName(e.getFieldValue("POINT"))}, ${s.YW.getVariableName(e.getFieldValue("NORMAL"))}, ${s.YW.getVariableName(e.getFieldValue("ENABLED"))})\n${s.YW.statementToCode(e,"ACTION")}end)\n`},K.contents.push({kind:"block",type:"on_contact_event"});const ce={init:function(){this.setStyle("procedure_blocks"),this.argCount_=3,this.updateShape_(),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setOutput(!1),this.setMutator(new l.Pt.MutatorIcon(["arg_create_with_item"],this))},mutationToDom:function(){const e=l.Wp.xml.createElement("mutation");return e.setAttribute("args",String(this.argCount_)),e},domToMutation:function(e){const t=e.getAttribute("args");if(!t)throw new TypeError("element did not have args");this.argCount_=parseInt(t,10),this.updateShape_()},saveExtraState:function(){return{argCount:this.argCount_}},loadExtraState:function(e){this.argCount_=e.argCount,this.updateShape_()},decompose:function(e){const t=e.newBlock("arg_create_with_container");t.initSvg();let n=t.getInput("STACK").connection;for(let o=0;o<this.argCount_;o++){const t=e.newBlock("arg_create_with_item");if(t.initSvg(),!t.previousConnection)throw new Error("argBlock has no previousConnection");n.connect(t.previousConnection),n=t.nextConnection}return t},compose:function(e){let t=e.getInputTargetBlock("STACK");const n=[];for(;t;)t.isInsertionMarker()||n.push(t.valueConnection_),t=t.getNextBlock();for(let i=0;i<this.argCount_;i++){const e=this.getInput("ADD_SHADOW"+i).connection.targetConnection;e&&!n.includes(e)&&e.disconnect()}this.argCount_=n.length,this.updateShape_();for(let i=0;i<this.argCount_;i++){var o;null===(o=n[i])||void 0===o||o.reconnect(this,"ADD_SHADOW"+i)}},saveConnections:function(e){let t=e.getInputTargetBlock("STACK"),n=0;for(;t;){if(t.isInsertionMarker()){t=t.getNextBlock();continue}const e=this.getInput("ADD_SHADOW"+n);t.valueConnection_=null===e||void 0===e?void 0:e.connection.targetConnection,t=t.getNextBlock(),n++}},updateShape_:function(){this.getInput("EVENT")||(this.appendDummyInput().appendField(X?"\u5728\u8282\u70b9":"On node").appendField(l.lP.fromJson({variable:"temp"}),"NODE"),this.appendValueInput("EVENT").appendField(X?"\u4e0a\u76d1\u542c":"listen for"),this.appendDummyInput("EVENT_TYPE").appendField(l.wc.fromJson({options:X?[["\u5168\u5c40\u4e8b\u4ef6","gslot"],["\u8282\u70b9\u4e8b\u4ef6","slot"]]:[["Global event","gslot"],["Node event","slot"]]}),"EVENT_TYPE")),this.getInput("NEWLINE")||this.appendEndRowInput("NEWLINE"),this.argCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.argCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(X?"\u7a7a\u53c2\u6570\u5217\u8868":"empty arguments list");for(let e=0;e<this.argCount_;e++)if(!this.getInput("ADD"+e)){this.appendValueInput("ADD_SHADOW"+e).setVisible(!1);const t=this.appendDummyInput("ADD"+e);0===e&&t.appendField(X?"\u63a5\u6536\u53c2\u6570\u5217\u8868":"receive arguments list"),t.appendField(l.lP.fromJson({variable:"arg"+e}),"ADD"+e)}for(let e=this.argCount_;this.getInput("ADD"+e);e++)this.removeInput("ADD"+e),this.removeInput("ADD_SHADOW"+e);this.getInput("ACTION")||this.appendStatementInput("ACTION").appendField(X?"\u5904\u7406":"process"),this.moveInputBefore("ACTION",null)}};l.rK.node_register_global_event=ce,s.YW.forBlock.node_register_global_event=function(e){const t=s.YW.getVariableName(e.getFieldValue("NODE")),n=s.YW.valueToCode(e,"EVENT",s.pH.NONE),o=e.getFieldValue("EVENT_TYPE"),i=[];for(let l=0;l<e.argCount_;l++){const t=s.YW.getVariableName(e.getFieldValue("ADD"+l));""!==t&&i.push(t)}const a=s.YW.statementToCode(e,"ACTION");return`${t}:${o}(${n}, function(${i.join(", ")})\n${a}end)\n`},K.contents.push({kind:"block",type:"node_register_global_event",inputs:{EVENT:{shadow:{type:"text",fields:{TEXT:"event"}}}}});const re={init:function(){this.setStyle("logic_blocks"),this.argCount_=1,this.updateShape_(),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setOutput(!1),this.setInputsInline(!1),this.setMutator(new l.Pt.MutatorIcon(["arg_create_with_item"],this))},mutationToDom:function(){const e=l.Wp.xml.createElement("mutation");return e.setAttribute("args",String(this.argCount_)),e},domToMutation:function(e){const t=e.getAttribute("args");if(!t)throw new TypeError("element did not have args");this.argCount_=parseInt(t,10),this.updateShape_()},saveExtraState:function(){return{argCount:this.argCount_}},loadExtraState:function(e){this.argCount_=e.argCount,this.updateShape_()},decompose:function(e){const t=e.newBlock("arg_create_with_container");t.initSvg();let n=t.getInput("STACK").connection;for(let o=0;o<this.argCount_;o++){const t=e.newBlock("arg_create_with_item");if(t.initSvg(),!t.previousConnection)throw new Error("argBlock has no previousConnection");n.connect(t.previousConnection),n=t.nextConnection}return t},compose:function(e){let t=e.getInputTargetBlock("STACK");const n=[];for(;t;)t.isInsertionMarker()||n.push(t.valueConnection_),t=t.getNextBlock();for(let i=0;i<this.argCount_;i++){const e=this.getInput("ADD"+i).connection.targetConnection;e&&!n.includes(e)&&e.disconnect()}this.argCount_=n.length,this.updateShape_();for(let i=0;i<this.argCount_;i++){var o;null===(o=n[i])||void 0===o||o.reconnect(this,"ADD"+i)}},saveConnections:function(e){let t=e.getInputTargetBlock("STACK"),n=0;for(;t;){if(t.isInsertionMarker()){t=t.getNextBlock();continue}const e=this.getInput("ADD"+n);t.valueConnection_=null===e||void 0===e?void 0:e.connection.targetConnection,t=t.getNextBlock(),n++}},updateShape_:function(){this.getInput("EVENT")||this.appendValueInput("EVENT").appendField(X?"\u53d1\u9001\u5168\u5c40\u4e8b\u4ef6":"Emit global event"),this.argCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.argCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(X?"\u65e0\u53c2\u6570":"no arguments");for(let e=0;e<this.argCount_;e++)if(!this.getInput("ADD"+e)){const t=this.appendValueInput("ADD"+e).setAlign(l.QL.Align.RIGHT);0===e&&t.appendField(X?"\u53c2\u6570":"arguments")}for(let e=this.argCount_;this.getInput("ADD"+e);e++)this.removeInput("ADD"+e)}};l.rK.emit_global_event=re,s.YW.forBlock.emit_global_event=function(e){const t=[s.YW.valueToCode(e,"EVENT",s.pH.NONE)];for(let n=0;n<e.argCount_;n++){const o=s.YW.valueToCode(e,"ADD"+n,s.pH.NONE);t.push(""===o?"nil":o)}return v.add("emit"),`emit(${t.join(", ")})\n`},K.contents.push({kind:"block",type:"emit_global_event",inputs:{EVENT:{shadow:{type:"text",fields:{TEXT:"event"}}}}});const ue={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(X?"\u53c2\u6570\u5217\u8868":"Argument list"),this.appendStatementInput("STACK"),this.contextMenu=!1}};l.rK.arg_create_with_container=ue;const pe={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(X?"\u53c2\u6570":"Argument"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.contextMenu=!1}};l.rK.arg_create_with_item=pe;const de=null!==g.A.locale.match(/^zh/),_e={kind:"category",name:de?"\u5411\u91cf":"Vec2",categorystyle:"math_category",contents:[]},he=_e,me={shadow:{type:"vec2_create",inputs:{X:{shadow:{type:"math_number",fields:{NUM:0}}},Y:{shadow:{type:"math_number",fields:{NUM:0}}}}}},ye={type:"vec2_zero",message0:de?"\u96f6\u4e8c\u7ef4\u5411\u91cf":"Vec2 Zero",output:"Vec2",style:"math_blocks"};l.rK.vec2_zero={init:function(){this.jsonInit(ye)}},s.YW.forBlock.vec2_zero=function(e){return v.add("Vec2"),["Vec2.zero",s.pH.ATOMIC]},_e.contents.push({kind:"block",type:"vec2_zero"});const ge={type:"vec2_create",message0:de?"\u4e8c\u7ef4\u5411\u91cf(%1, %2)":"Vec2(%1, %2)",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Vec2",style:"math_blocks"};l.rK.vec2_create={init:function(){this.jsonInit(ge)}},s.YW.forBlock.vec2_create=function(e){const t=s.YW.valueToCode(e,"X",s.pH.NONE),n=s.YW.valueToCode(e,"Y",s.pH.NONE);return v.add("Vec2"),[`Vec2(${""===t?"0":t}, ${""===n?"0":n})`,s.pH.ATOMIC]},_e.contents.push({kind:"block",type:"vec2_create",inputs:{X:{shadow:{type:"math_number",fields:{NUM:0}}},Y:{shadow:{type:"math_number",fields:{NUM:0}}}}});const be={type:"vec2_get_property",message0:de?"\u83b7\u53d6\u4e8c\u7ef4\u5411\u91cf %1 \u7684 %2":"Get vec2 %1 %2",args0:[{type:"field_variable",name:"VEC2",variable:"temp"},{type:"field_dropdown",name:"PROPERTY",options:de?[["X \u5206\u91cf","x"],["Y \u5206\u91cf","y"],["\u957f\u5ea6","length"],["\u89d2\u5ea6","angle"]]:[["X component","x"],["Y component","y"],["Length","length"],["Angle","angle"]]}],output:"Number",style:"math_blocks"};l.rK.vec2_get_property={init:function(){this.jsonInit(be)}},s.YW.forBlock.vec2_get_property=function(e){return[`${s.YW.getVariableName(e.getFieldValue("VEC2"))}.${e.getFieldValue("PROPERTY")}`,s.pH.ATOMIC]},_e.contents.push({kind:"block",type:"vec2_get_property"});const ke={type:"vec2_get_normalized",message0:de?"\u83b7\u53d6\u4e8c\u7ef4\u5411\u91cf %1 \u7684\u5f52\u4e00\u5316\u5411\u91cf":"Get normalized vec2 %1",args0:[{type:"input_value",name:"VEC2",check:"Vec2"}],output:"Vec2",style:"math_blocks"};l.rK.vec2_get_normalized={init:function(){this.jsonInit(ke)}},s.YW.forBlock.vec2_get_normalized=function(e){return[`${s.YW.valueToCode(e,"VEC2",s.pH.HIGH)}:normalize()`,s.pH.ATOMIC]},_e.contents.push({kind:"block",type:"vec2_get_normalized",inputs:{VEC2:{shadow:{type:"variables_get"}}}});const ve={type:"vec2_binary_operation",message0:"%1\n%2\n%3",args0:[{type:"input_value",name:"VEC2_1",check:"Vec2"},{type:"field_dropdown",name:"OPERATION",options:[["+","+"],["-","-"],["\xd7","*"],["\xf7","/"]]},{type:"input_value",name:"VEC2_2",check:"Vec2"}],output:"Vec2",style:"math_blocks"};l.rK.vec2_binary_operation={init:function(){this.jsonInit(ve)}},s.YW.forBlock.vec2_binary_operation=function(e){const t=s.YW.valueToCode(e,"VEC2_1",s.pH.HIGH),n=e.getFieldValue("OPERATION"),o=s.YW.valueToCode(e,"VEC2_2",s.pH.HIGH);let i=s.pH.HIGH;switch(n){case"+":case"-":i=s.pH.ADDITIVE;break;case"*":case"/":i=s.pH.MULTIPLICATIVE}return[`${t} ${n} ${o}`,i]},_e.contents.push({kind:"block",type:"vec2_binary_operation",inputs:{VEC2_1:me,VEC2_2:me}});const fe={type:"vec2_binary_op_number",message0:"%1\n%2\n%3",args0:[{type:"input_value",name:"VEC2",check:"Vec2"},{type:"field_dropdown",name:"OPERATION",options:[["*","*"],["/","/"]]},{type:"input_value",name:"NUMBER",check:"Number"}],output:"Vec2",style:"math_blocks"};l.rK.vec2_binary_op_number={init:function(){this.jsonInit(fe)}},s.YW.forBlock.vec2_binary_op_number=function(e){return[`${s.YW.valueToCode(e,"VEC2",s.pH.HIGH)} ${e.getFieldValue("OPERATION")} ${s.YW.valueToCode(e,"NUMBER",s.pH.HIGH)}`,s.pH.MULTIPLICATIVE]},_e.contents.push({kind:"block",type:"vec2_binary_op_number",inputs:{VEC2:me,NUMBER:{shadow:{type:"math_number",fields:{NUM:1}}}}});const Te={type:"vec2_clamp",message0:de?"\u9650\u5236\u4e8c\u7ef4\u5411\u91cf %1\n\u5728 %2\n\u548c %3\n\u4e4b\u95f4":"Clamp vec2 %1\nbetween %2\nand %3",args0:[{type:"input_value",name:"VEC2",check:"Vec2"},{type:"input_value",name:"MIN",check:"Vec2"},{type:"input_value",name:"MAX",check:"Vec2"}],output:"Vec2",style:"math_blocks"};l.rK.vec2_clamp={init:function(){this.jsonInit(Te)}},s.YW.forBlock.vec2_clamp=function(e){return[`${s.YW.valueToCode(e,"VEC2",s.pH.HIGH)}:clamp(${s.YW.valueToCode(e,"MIN",s.pH.HIGH)}, ${s.YW.valueToCode(e,"MAX",s.pH.HIGH)})`,s.pH.ATOMIC]},_e.contents.push({kind:"block",type:"vec2_clamp",inputs:{VEC2:me,MIN:me,MAX:me}});const Ne={type:"vec2_calculate",message0:de?"\u8ba1\u7b97\u4e8c\u7ef4\u5411\u91cf %1\n\u548c %2\n\u7684 %3":"Between\n%1\nand %2\ncalculate %3",args0:[{type:"input_value",name:"VEC2_1",check:"Vec2"},{type:"input_value",name:"VEC2_2",check:"Vec2"},{type:"field_dropdown",name:"CALCULATE",options:de?[["\u8ddd\u79bb","distance"],["\u70b9\u79ef","dot"]]:[["Distance","distance"],["Dot Product","dot"]]}],output:"Number",style:"math_blocks"};l.rK.vec2_calculate={init:function(){this.jsonInit(Ne)}},s.YW.forBlock.vec2_calculate=function(e){const t=s.YW.valueToCode(e,"VEC2_1",s.pH.HIGH),n=s.YW.valueToCode(e,"VEC2_2",s.pH.HIGH);return[`${t}:${e.getFieldValue("CALCULATE")}(${n})`,s.pH.ATOMIC]},_e.contents.push({kind:"block",type:"vec2_calculate",inputs:{VEC2_1:me,VEC2_2:me}});const Ee=null!==g.A.locale.match(/^zh/),Ie={kind:"category",name:Ee?"\u52a8\u4f5c":"Action",categorystyle:"logic_category",contents:[]},Ce=Ie,Oe={type:"perform_action",message0:Ee?"\u4e3a\u8282\u70b9 %1 %2 \u52a8\u4f5c\n%3\n\u8fd4\u56de\u6267\u884c\u4e00\u6b21\u7684\u65f6\u95f4":"For node %1 %2 execute action\n%3\nreturn time of an execution",inputsInline:!0,args0:[{type:"field_variable",name:"NODE",variable:"temp"},{type:"field_dropdown",name:"MODE",options:Ee?[["\u6267\u884c\u4e00\u6b21","ONCE"],["\u91cd\u590d\u6267\u884c","REPEATED"]]:[["Once","ONCE"],["Repeatedly","REPEATED"]]},{type:"input_value",name:"ACTION",check:"Action"}],inlineInputs:!1,output:"Number",previousStatement:null,nextStatement:null,style:"logic_blocks"};l.rK.perform_action={init:function(){this.jsonInit(Oe)}},s.YW.forBlock.perform_action=function(e){var t;const n=s.YW.getVariableName(e.getFieldValue("NODE")),o="REPEATED"===e.getFieldValue("MODE")?"true":"false",i=s.YW.valueToCode(e,"ACTION",s.pH.NONE);return null!==(t=e.outputConnection)&&void 0!==t&&t.targetConnection?[`${n}:perform(${""===i?"nil":i}, ${o})`,s.pH.ATOMIC]:`${n}:perform(${""===i?"nil":i}, ${o})\n`},Ie.contents.push({kind:"block",type:"perform_action"});const Se={init:function(){this.setStyle("logic_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Action"),this.setMutator(new l.Pt.MutatorIcon(["action_create_with_item"],this))},mutationToDom:function(){const e=l.Wp.xml.createElement("mutation");return e.setAttribute("items",String(this.itemCount_)),e},domToMutation:function(e){const t=e.getAttribute("items");if(!t)throw new TypeError("element did not have items");this.itemCount_=parseInt(t,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(e){this.itemCount_=e.itemCount,this.updateShape_()},decompose:function(e){const t=e.newBlock("action_create_with_container");t.initSvg();let n=t.getInput("STACK").connection;for(let o=0;o<this.itemCount_;o++){const t=e.newBlock("action_create_with_item");if(t.initSvg(),!t.previousConnection)throw new Error("itemBlock has no previousConnection");n.connect(t.previousConnection),n=t.nextConnection}return t},compose:function(e){let t=e.getInputTargetBlock("STACK");const n=[];for(;t;)t.isInsertionMarker()||n.push(t.valueConnection_),t=t.getNextBlock();for(let i=0;i<this.itemCount_;i++){const e=this.getInput("ADD"+i).connection.targetConnection;e&&!n.includes(e)&&e.disconnect()}this.itemCount_=n.length,this.updateShape_();for(let i=0;i<this.itemCount_;i++){var o;null===(o=n[i])||void 0===o||o.reconnect(this,"ADD"+i)}},saveConnections:function(e){let t=e.getInputTargetBlock("STACK"),n=0;for(;t;){if(t.isInsertionMarker()){t=t.getNextBlock();continue}const e=this.getInput("ADD"+n);t.valueConnection_=null===e||void 0===e?void 0:e.connection.targetConnection,t=t.getNextBlock(),n++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(Ee?"\u7a7a\u5e8f\u5217\u52a8\u4f5c\u5217\u8868":"empty sequence action list");for(let e=0;e<this.itemCount_;e++)if(!this.getInput("ADD"+e)){const t=this.appendValueInput("ADD"+e).setAlign(l.QL.Align.RIGHT);t.setCheck("Action"),0===e&&t.appendField(Ee?"\u5e8f\u5217\u52a8\u4f5c\u5217\u8868":"Sequence action list")}for(let e=this.itemCount_;this.getInput("ADD"+e);e++)this.removeInput("ADD"+e)}};l.rK.sequence_create_with=Se,s.YW.forBlock.sequence_create_with=function(e){const t=[];for(let n=0;n<e.itemCount_;n++){const o=s.YW.valueToCode(e,"ADD"+n,s.pH.NONE);""!==o&&t.push(o)}return v.add("Sequence"),[`Sequence(${t.join(", ")})`,s.pH.ATOMIC]},Ie.contents.push({kind:"block",type:"sequence_create_with"});const Ye={init:function(){this.setStyle("logic_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Action"),this.setMutator(new l.Pt.MutatorIcon(["action_create_with_item"],this))},mutationToDom:function(){const e=l.Wp.xml.createElement("mutation");return e.setAttribute("items",String(this.itemCount_)),e},domToMutation:function(e){const t=e.getAttribute("items");if(!t)throw new TypeError("element did not have items");this.itemCount_=parseInt(t,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(e){this.itemCount_=e.itemCount,this.updateShape_()},decompose:function(e){const t=e.newBlock("action_create_with_container");t.initSvg();let n=t.getInput("STACK").connection;for(let o=0;o<this.itemCount_;o++){const t=e.newBlock("action_create_with_item");if(t.initSvg(),!t.previousConnection)throw new Error("itemBlock has no previousConnection");n.connect(t.previousConnection),n=t.nextConnection}return t},compose:function(e){let t=e.getInputTargetBlock("STACK");const n=[];for(;t;)t.isInsertionMarker()||n.push(t.valueConnection_),t=t.getNextBlock();for(let i=0;i<this.itemCount_;i++){const e=this.getInput("ADD"+i).connection.targetConnection;e&&!n.includes(e)&&e.disconnect()}this.itemCount_=n.length,this.updateShape_();for(let i=0;i<this.itemCount_;i++){var o;null===(o=n[i])||void 0===o||o.reconnect(this,"ADD"+i)}},saveConnections:function(e){let t=e.getInputTargetBlock("STACK"),n=0;for(;t;){if(t.isInsertionMarker()){t=t.getNextBlock();continue}const e=this.getInput("ADD"+n);t.valueConnection_=null===e||void 0===e?void 0:e.connection.targetConnection,t=t.getNextBlock(),n++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(Ee?"\u7a7a\u5e76\u884c\u52a8\u4f5c\u5217\u8868":"empty parallel action list");for(let e=0;e<this.itemCount_;e++)if(!this.getInput("ADD"+e)){const t=this.appendValueInput("ADD"+e).setAlign(l.QL.Align.RIGHT);t.setCheck("Action"),0===e&&t.appendField(Ee?"\u5e76\u884c\u52a8\u4f5c\u5217\u8868":"Parallel action list")}for(let e=this.itemCount_;this.getInput("ADD"+e);e++)this.removeInput("ADD"+e)}};l.rK.spawn_create_with=Ye,s.YW.forBlock.spawn_create_with=function(e){const t=[];for(let n=0;n<e.itemCount_;n++){const o=s.YW.valueToCode(e,"ADD"+n,s.pH.NONE);""!==o&&t.push(o)}return v.add("Spawn"),[`Spawn(${t.join(", ")})`,s.pH.ATOMIC]},Ie.contents.push({kind:"block",type:"spawn_create_with"});const Ae=[["Linear","Linear"],["InQuad","InQuad"],["OutQuad","OutQuad"],["InOutQuad","InOutQuad"],["OutInQuad","OutInQuad"],["InCubic","InCubic"],["OutCubic","OutCubic"],["InOutCubic","InOutCubic"],["OutInCubic","OutInCubic"],["InQuart","InQuart"],["OutQuart","OutQuart"],["InOutQuart","InOutQuart"],["OutInQuart","OutInQuart"],["InQuint","InQuint"],["OutQuint","OutQuint"],["InOutQuint","InOutQuint"],["OutInQuint","OutInQuint"],["InSine","InSine"],["OutSine","OutSine"],["InOutSine","InOutSine"],["OutInSine","OutInSine"],["InExpo","InExpo"],["OutExpo","OutExpo"],["InOutExpo","InOutExpo"],["OutInExpo","OutInExpo"],["InCirc","InCirc"],["OutCirc","OutCirc"],["InOutCirc","InOutCirc"],["OutInCirc","OutInCirc"],["InElastic","InElastic"],["OutElastic","OutElastic"],["InOutElastic","InOutElastic"],["OutInElastic","OutInElastic"],["InBack","InBack"],["OutBack","OutBack"],["InOutBack","InOutBack"],["OutInBack","OutInBack"],["InBounce","InBounce"],["OutBounce","OutBounce"],["InOutBounce","InOutBounce"],["OutInBounce","OutInBounce"]],De={type:"property_action",message0:Ee?"\u5728 %1 \u79d2\u5185\uff0c\u6301\u7eed\u6539\u53d8 %2\n\u4ece %3 \u5230 %4\n\u5e94\u7528\u7f13\u52a8 %5":"In %1 seconds, change %2\nfrom %3 to %4\napply easing %5",args0:[{type:"input_value",name:"TIME",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:Ee?[["X \u5750\u6807","X"],["Y \u5750\u6807","Y"],["Z \u5750\u6807","Z"],["\u5bbd\u5ea6","Width"],["\u9ad8\u5ea6","Height"],["\u89d2\u5ea6","Angle"],["X \u89d2\u5ea6","AngleX"],["Y \u89d2\u5ea6","AngleY"],["\u7f29\u653e","Scale"],["X \u7f29\u653e","ScaleX"],["Y \u7f29\u653e","ScaleY"],["\u4e0d\u900f\u660e\u5ea6","Opacity"]]:[["X","X"],["Y","Y"],["Z","Z"],["Width","Width"],["Height","Height"],["Angle","Angle"],["X Angle","AngleX"],["Y Angle","AngleY"],["X Scale","ScaleX"],["Y Scale","ScaleY"],["Opacity","Opacity"]]},{type:"input_value",name:"START",check:"Number"},{type:"input_value",name:"STOP",check:"Number"},{type:"field_dropdown",name:"EASING",options:Ae}],output:"Action",style:"logic_blocks"};l.rK.property_action={init:function(){this.jsonInit(De)}},s.YW.forBlock.property_action=function(e){const t=s.YW.valueToCode(e,"TIME",s.pH.NONE),n=e.getFieldValue("PROPERTY"),o=s.YW.valueToCode(e,"START",s.pH.NONE),i=s.YW.valueToCode(e,"STOP",s.pH.NONE),a=e.getFieldValue("EASING");return v.add(n),v.add("Ease"),[`${n}(${""===t?"0":t}, ${""===o?"0":o}, ${""===i?"0":i}, Ease.${a})`,s.pH.ATOMIC]},Ie.contents.push({kind:"block",type:"property_action",inputs:{TIME:{shadow:{type:"math_number",fields:{NUM:1}}},START:{shadow:{type:"math_number",fields:{NUM:0}}},STOP:{shadow:{type:"math_number",fields:{NUM:100}}}}});const we={type:"move_action",message0:Ee?"\u5728 %1 \u79d2\u5185\n\u4ece\u5750\u6807 %2\n\u79fb\u52a8\u5230\u5750\u6807 %3\n\u5e94\u7528\u7f13\u52a8 %4":"In %1 seconds\nmove from point %2\nto point %3\napply easing %4",args0:[{type:"input_value",name:"TIME",check:"Number"},{type:"input_value",name:"START",check:"Vec2"},{type:"input_value",name:"STOP",check:"Vec2"},{type:"field_dropdown",name:"EASING",options:Ae}],output:"Action",style:"logic_blocks"};l.rK.move_action={init:function(){this.jsonInit(we)}},s.YW.forBlock.move_action=function(e){const t=s.YW.valueToCode(e,"TIME",s.pH.NONE),n=s.YW.valueToCode(e,"START",s.pH.NONE),o=s.YW.valueToCode(e,"STOP",s.pH.NONE),i=e.getFieldValue("EASING");return v.add("Move"),v.add("Ease"),""!==n&&""!==o||v.add("Vec2"),[`Move(${""===t?"0":t}, ${""===n?"Vec2.zero":n}, ${""===o?"Vec2.zero":o}, Ease.${i})`,s.pH.ATOMIC]},Ie.contents.push({kind:"block",type:"move_action",inputs:{TIME:{shadow:{type:"math_number",fields:{NUM:1}}},START:{shadow:{type:"vec2_create",inputs:{X:{shadow:{type:"math_number",fields:{NUM:0}}},Y:{shadow:{type:"math_number",fields:{NUM:0}}}}}},STOP:{shadow:{type:"vec2_create",inputs:{X:{shadow:{type:"math_number",fields:{NUM:0}}},Y:{shadow:{type:"math_number",fields:{NUM:0}}}}}}}});const We={type:"delay_action",message0:Ee?"\u5ef6\u8fdf %1 \u79d2":"Delay %1 seconds",args0:[{type:"input_value",name:"TIME",check:"Number"}],output:"Action",style:"logic_blocks"};l.rK.delay_action={init:function(){this.jsonInit(We)}},s.YW.forBlock.delay_action=function(e){const t=s.YW.valueToCode(e,"TIME",s.pH.NONE);return v.add("Delay"),[`Delay(${""===t?"0":t})`,s.pH.ATOMIC]},Ie.contents.push({kind:"block",type:"delay_action",inputs:{TIME:{shadow:{type:"math_number",fields:{NUM:1}}}}});const Ve={type:"visible_action",message0:Ee?"\u5207\u6362\u53ef\u89c1\u6027\u4e3a %1":"Toggle visibility %1",args0:[{type:"field_dropdown",name:"VISIBLE",options:Ee?[["\u663e\u793a","Show"],["\u9690\u85cf","Hide"]]:[["Show","Show"],["Hide","Hide"]]}],output:"Action",style:"logic_blocks"};l.rK.visible_action={init:function(){this.jsonInit(Ve)}},s.YW.forBlock.visible_action=function(e){const t=e.getFieldValue("VISIBLE");return v.add(t),[`${t}()`,s.pH.ATOMIC]},Ie.contents.push({kind:"block",type:"visible_action"});const Be={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(Ee?"\u52a8\u4f5c\u5217\u8868":"Action list"),this.appendStatementInput("STACK"),this.contextMenu=!1}};l.rK.action_create_with_container=Be;const Re={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(Ee?"\u52a8\u4f5c":"Action"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.contextMenu=!1}};l.rK.action_create_with_item=Re;const $e=null!==g.A.locale.match(/^zh/),Ue={kind:"category",name:$e?"\u534f\u7a0b":"Routine",categorystyle:"dora_category",contents:[]},Me=Ue,He={type:"nodeThread",message0:$e?"\u5728\u8282\u70b9 %1 \u4e0a\u521b\u5efa %2 \u7684 %3 \u7ebf\u7a0b\n%4":"For %1 node, create %2 %3 thread\n%4",inputsInline:!0,args0:[{type:"field_variable",name:"NODE",variable:"temp"},{type:"field_dropdown",name:"TYPE",options:$e?[["\u6267\u884c\u4e00\u6b21","once"],["\u5faa\u73af\u6267\u884c","loop"]]:[["Once","once"],["Loop","loop"]]},{type:"field_dropdown",name:"MODE",options:$e?[["\u4e3b","schedule"],["\u5b50","onUpdate"]]:[["Main","schedule"],["Sub","onUpdate"]]},{type:"input_statement",name:"ACTION"}],previousStatement:null,nextStatement:null,style:"dora_blocks"};l.rK.nodeThread={init:function(){this.jsonInit(He)}},s.YW.forBlock.nodeThread=function(e){const t=s.YW.getVariableName(e.getFieldValue("NODE")),n=e.getFieldValue("MODE"),o=e.getFieldValue("TYPE"),i=s.YW.statementToCode(e,"ACTION");return v.add(o),`${t}:${n}(${o}(function()\n${i}end))\n`},Ue.contents.push({kind:"block",type:"nodeThread",inputs:{ACTION:{block:{type:"sleep",inputs:{TIME:{shadow:{type:"math_number",fields:{NUM:1}}}}}}}});const xe={type:"thread",message0:$e?"\u521b\u5efa %1 \u7684\u7ebf\u7a0b\n%2":"Create %1 thread\n%2",inputsInline:!0,args0:[{type:"field_dropdown",name:"TYPE",options:$e?[["\u6267\u884c\u4e00\u6b21","thread"],["\u5faa\u73af\u6267\u884c","threadLoop"]]:[["Once","thread"],["Loop","threadLoop"]]},{type:"input_statement",name:"ACTION"}],previousStatement:null,nextStatement:null,style:"dora_blocks"};l.rK.thread={init:function(){this.jsonInit(xe)}},s.YW.forBlock.thread=function(e){const t=e.getFieldValue("TYPE"),n=s.YW.statementToCode(e,"ACTION");return v.add(t),`${t}(function()\n${n}end)\n`},Ue.contents.push({kind:"block",type:"thread",inputs:{ACTION:{block:{type:"sleep",inputs:{TIME:{shadow:{type:"math_number",fields:{NUM:1}}}}}}}});const Fe={type:"sleep",message0:$e?"\u7b49\u5f85 %1 \u79d2":"Wait %1 seconds",args0:[{type:"input_value",name:"TIME",check:"Number"}],previousStatement:null,nextStatement:null,style:"dora_blocks"};l.rK.sleep={init:function(){this.jsonInit(Fe)}},s.YW.forBlock.sleep=function(e){const t=s.YW.valueToCode(e,"TIME",s.pH.NONE);return v.add("sleep"),`sleep(${""===t?"0":t})\n`},Ue.contents.push({kind:"block",type:"sleep",inputs:{TIME:{shadow:{type:"math_number",fields:{NUM:1}}}}});const Le={type:"wait",message0:$e?"\u7b49\u5f85\u6ee1\u8db3\u6761\u4ef6 %1":"Wait for condition %1",args0:[{type:"input_value",name:"CONDITION",check:"Boolean"}],previousStatement:null,nextStatement:null,style:"dora_blocks"};l.rK.wait={init:function(){this.jsonInit(Le)}},s.YW.forBlock.wait=function(e){const t=s.YW.valueToCode(e,"CONDITION",s.pH.NONE);return v.add("wait"),`wait(function() return ${""===t?"true":t} end)\n`},Ue.contents.push({kind:"block",type:"wait",inputs:{CONDITION:{shadow:{type:"logic_boolean",fields:{BOOL:"TRUE"}}}}});const Pe=null!==g.A.locale.match(/^zh/),Xe={kind:"category",name:Pe?"\u753b\u5e03":"Canvas",categorystyle:"logic_category",contents:[]},Ke=Xe,je={shadow:{type:"math_number",fields:{NUM:0}}},Ge={shadow:{type:"math_number",fields:{NUM:1}}},ze={shadow:{type:"math_number",fields:{NUM:100}}},Qe={type:"nvg_begin_painting",message0:Pe?"\u8282\u70b9 %1 \u5f00\u59cb\u7ed8\u56fe\n %2":"Node %1 begins painting\n %2",args0:[{type:"field_variable",name:"NODE",variable:"temp"},{type:"input_statement",name:"PAINT"}],previousStatement:null,nextStatement:null,style:"logic_blocks"};l.rK.nvg_begin_painting={init:function(){this.jsonInit(Qe)}},s.YW.forBlock.nvg_begin_painting=function(e){const t=s.YW.getVariableName(e.getFieldValue("NODE")),n=s.YW.statementToCode(e,"PAINT");return v.add("nvg"),`${t}:onRender(function()\n  nvg.ApplyTransform(${t})\n${n}end)\n`},Xe.contents.push({kind:"block",type:"nvg_begin_painting"});const qe={type:"nvg_begin_path",message0:Pe?"\u5f00\u59cb\u753b\u65b0\u8def\u5f84":"Begin path",previousStatement:null,nextStatement:null,style:"loop_blocks"};l.rK.nvg_begin_path={init:function(){this.jsonInit(qe)}},s.YW.forBlock.nvg_begin_path=function(){return v.add("nvg"),"nvg.BeginPath()\n"},Xe.contents.push({kind:"block",type:"nvg_begin_path"});const Ze={type:"nvg_move_to",message0:Pe?"\u79fb\u52a8\u5230 X %1 Y %2 \u5750\u6807":"Move to X %1 Y %2 position",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],previousStatement:null,nextStatement:null,style:"logic_blocks"};l.rK.nvg_move_to={init:function(){this.jsonInit(Ze)}},s.YW.forBlock.nvg_move_to=function(e){const t=s.YW.valueToCode(e,"X",s.pH.NONE),n=s.YW.valueToCode(e,"Y",s.pH.NONE);return v.add("nvg"),`nvg.MoveTo(${""===t?"0":t}, ${""===n?"0":n})\n`},Xe.contents.push({kind:"block",type:"nvg_move_to",inputs:{X:je,Y:je}});const Je={type:"nvg_line_to",message0:Pe?"\u753b\u7ebf\u5230 X %1 Y %2 \u5750\u6807":"Line to X %1 Y %2 position",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],previousStatement:null,nextStatement:null,style:"logic_blocks"};l.rK.nvg_line_to={init:function(){this.jsonInit(Je)}},s.YW.forBlock.nvg_line_to=function(e){const t=s.YW.valueToCode(e,"X",s.pH.NONE),n=s.YW.valueToCode(e,"Y",s.pH.NONE);return v.add("nvg"),`nvg.LineTo(${""===t?"0":t}, ${""===n?"0":n})\n`},Xe.contents.push({kind:"block",type:"nvg_line_to",inputs:{X:ze,Y:ze}});const et={type:"nvg_bezier_to",message0:Pe?"\u753b\u8d1d\u585e\u5c14\u66f2\u7ebf\n\u63a7\u5236\u70b91 X %1 Y %2\n\u63a7\u5236\u70b92 X %3 Y %4\n\u7ec8\u70b9 X %5 Y %6":"Bezier to\ncontrol point 1 X %1 Y %2\ncontrol point 2 X %3 Y %4\nend point X %5 Y %6",args0:[{type:"input_value",name:"C1X",check:"Number"},{type:"input_value",name:"C1Y",check:"Number"},{type:"input_value",name:"C2X",check:"Number"},{type:"input_value",name:"C2Y",check:"Number"},{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],previousStatement:null,nextStatement:null,style:"logic_blocks"};l.rK.nvg_bezier_to={init:function(){this.jsonInit(et)}},s.YW.forBlock.nvg_bezier_to=function(e){const t=s.YW.valueToCode(e,"C1X",s.pH.NONE),n=s.YW.valueToCode(e,"C1Y",s.pH.NONE),o=s.YW.valueToCode(e,"C2X",s.pH.NONE),i=s.YW.valueToCode(e,"C2Y",s.pH.NONE),a=s.YW.valueToCode(e,"X",s.pH.NONE),l=s.YW.valueToCode(e,"Y",s.pH.NONE);return v.add("nvg"),`nvg.BezierTo(${""===t?"0":t}, ${""===n?"0":n}, ${""===o?"0":o}, ${""===i?"0":i}, ${""===a?"0":a}, ${""===l?"0":l})\n`},Xe.contents.push({kind:"block",type:"nvg_bezier_to",inputs:{C1X:je,C1Y:je,C2X:je,C2Y:ze,X:ze,Y:ze}});const tt={type:"nvg_close_path",message0:Pe?"\u95ed\u5408\u5f53\u524d\u8def\u5f84":"Close path",previousStatement:null,nextStatement:null,style:"loop_blocks"};l.rK.nvg_close_path={init:function(){this.jsonInit(tt)}},s.YW.forBlock.nvg_close_path=function(){return v.add("nvg"),"nvg.ClosePath()\n"},Xe.contents.push({kind:"block",type:"nvg_close_path"});const nt={type:"nvg_fill_color",message0:Pe?"\u8bbe\u7f6e\u586b\u5145\u989c\u8272 %1 \u4e0d\u900f\u660e\u5ea6 %2":"Set fill color %1 opacity %2",args0:[{type:"input_value",name:"COLOR",check:"Color3"},{type:"input_value",name:"OPACITY",check:"Number"}],previousStatement:null,nextStatement:null,style:"logic_blocks"};l.rK.nvg_fill_color={init:function(){this.jsonInit(nt)}},s.YW.forBlock.nvg_fill_color=function(e){const t=s.YW.valueToCode(e,"COLOR",s.pH.NONE),n=s.YW.valueToCode(e,"OPACITY",s.pH.MULTIPLICATIVE);return v.add("nvg"),`nvg.FillColor(${""===t?"0x0":t} | math.floor(${""===n?"1":n} * 255 + 0.5) << 24)\n`},Xe.contents.push({kind:"block",type:"nvg_fill_color",inputs:{COLOR:{shadow:{type:"colour_hsv_sliders"}},OPACITY:Ge}});const ot={type:"nvg_fill",message0:Pe?"\u586b\u5145\u56fe\u5f62":"Fill color",previousStatement:null,nextStatement:null,style:"colour_blocks"};l.rK.nvg_fill={init:function(){this.jsonInit(ot)}},s.YW.forBlock.nvg_fill=function(){return v.add("nvg"),"nvg.Fill()\n"},Xe.contents.push({kind:"block",type:"nvg_fill"});const it={type:"nvg_stroke_color",message0:Pe?"\u8bbe\u7f6e\u63cf\u8fb9\u989c\u8272 %1 \u4e0d\u900f\u660e\u5ea6 %2":"Set stroke color %1 opacity %2",args0:[{type:"input_value",name:"COLOR",check:"Color3"},{type:"input_value",name:"OPACITY",check:"Number"}],previousStatement:null,nextStatement:null,style:"logic_blocks"};l.rK.nvg_stroke_color={init:function(){this.jsonInit(it)}},s.YW.forBlock.nvg_stroke_color=function(e){const t=s.YW.valueToCode(e,"COLOR",s.pH.NONE),n=s.YW.valueToCode(e,"OPACITY",s.pH.MULTIPLICATIVE);return v.add("nvg"),`nvg.StrokeColor(${""===t?"0x0":t} | math.floor(${""===n?"1":n} * 255 + 0.5) << 24)\n`},Xe.contents.push({kind:"block",type:"nvg_stroke_color",inputs:{COLOR:{shadow:{type:"colour_hsv_sliders"}},OPACITY:Ge}});const at={type:"nvg_stroke_width",message0:Pe?"\u8bbe\u7f6e\u63cf\u8fb9\u5bbd\u5ea6 %1":"Set stroke width %1",args0:[{type:"input_value",name:"WIDTH",check:"Number"}],previousStatement:null,nextStatement:null,style:"logic_blocks"};l.rK.nvg_stroke_width={init:function(){this.jsonInit(at)}},s.YW.forBlock.nvg_stroke_width=function(e){const t=s.YW.valueToCode(e,"WIDTH",s.pH.NONE);return v.add("nvg"),`nvg.StrokeWidth(${""===t?"1":t})\n`},Xe.contents.push({kind:"block",type:"nvg_stroke_width",inputs:{WIDTH:Ge}});const lt={type:"nvg_stroke",message0:Pe?"\u7ed9\u56fe\u5f62\u63cf\u8fb9":"Stroke path",previousStatement:null,nextStatement:null,style:"colour_blocks"};l.rK.nvg_stroke={init:function(){this.jsonInit(lt)}},s.YW.forBlock.nvg_stroke=function(){return v.add("nvg"),"nvg.Stroke()\n"},Xe.contents.push({kind:"block",type:"nvg_stroke"});const st={type:"nvg_rect",message0:Pe?"\u753b\u77e9\u5f62\nX %1 Y %2\n\u5bbd %3 \u9ad8 %4":"Draw rectangle\nX %1 Y %2\nwidth %3 height %4",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"},{type:"input_value",name:"WIDTH",check:"Number"},{type:"input_value",name:"HEIGHT",check:"Number"}],previousStatement:null,nextStatement:null,style:"logic_blocks"};l.rK.nvg_rect={init:function(){this.jsonInit(st)}},s.YW.forBlock.nvg_rect=function(e){const t=s.YW.valueToCode(e,"X",s.pH.NONE),n=s.YW.valueToCode(e,"Y",s.pH.NONE),o=s.YW.valueToCode(e,"WIDTH",s.pH.NONE),i=s.YW.valueToCode(e,"HEIGHT",s.pH.NONE);return v.add("nvg"),`nvg.Rect(${""===t?"0":t}, ${""===n?"0":n}, ${""===o?"0":o}, ${""===i?"0":i})\n`},Xe.contents.push({kind:"block",type:"nvg_rect",inputs:{X:je,Y:je,WIDTH:ze,HEIGHT:ze}});const ct={type:"nvg_rounded_rect",message0:Pe?"\u753b\u5706\u89d2\u77e9\u5f62\nX %1 Y %2\n\u5bbd %3 \u9ad8 %4\n\u5706\u89d2 %5":"Draw rounded rectangle\nX %1 Y %2\nwidth %3 height %4\nradius %5",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"},{type:"input_value",name:"WIDTH",check:"Number"},{type:"input_value",name:"HEIGHT",check:"Number"},{type:"input_value",name:"RADIUS",check:"Number"}],previousStatement:null,nextStatement:null,style:"logic_blocks"};l.rK.nvg_rounded_rect={init:function(){this.jsonInit(ct)}},s.YW.forBlock.nvg_rounded_rect=function(e){const t=s.YW.valueToCode(e,"X",s.pH.NONE),n=s.YW.valueToCode(e,"Y",s.pH.NONE),o=s.YW.valueToCode(e,"WIDTH",s.pH.NONE),i=s.YW.valueToCode(e,"HEIGHT",s.pH.NONE),a=s.YW.valueToCode(e,"RADIUS",s.pH.NONE);return v.add("nvg"),`nvg.RoundedRect(${""===t?"0":t}, ${""===n?"0":n}, ${""===o?"0":o}, ${""===i?"0":i}, ${""===a?"0":a})\n`},Xe.contents.push({kind:"block",type:"nvg_rounded_rect",inputs:{X:je,Y:je,WIDTH:ze,HEIGHT:ze,RADIUS:Ge}});const rt={type:"nvg_ellipse",message0:Pe?"\u753b\u692d\u5706\n\u4e2d\u5fc3 X %1 \u4e2d\u5fc3 Y %2\n\u534a\u5f84 X %3 \u534a\u5f84 Y %4":"Draw ellipse\ncenter X %1 center Y %2\nradius X %3 radius Y %4",args0:[{type:"input_value",name:"CX",check:"Number"},{type:"input_value",name:"CY",check:"Number"},{type:"input_value",name:"RX",check:"Number"},{type:"input_value",name:"RY",check:"Number"}],previousStatement:null,nextStatement:null,style:"logic_blocks"};l.rK.nvg_ellipse={init:function(){this.jsonInit(rt)}},s.YW.forBlock.nvg_ellipse=function(e){const t=s.YW.valueToCode(e,"CX",s.pH.NONE),n=s.YW.valueToCode(e,"CY",s.pH.NONE),o=s.YW.valueToCode(e,"RX",s.pH.NONE),i=s.YW.valueToCode(e,"RY",s.pH.NONE);return v.add("nvg"),`nvg.Ellipse(${""===t?"0":t}, ${""===n?"0":n}, ${""===o?"0":o}, ${""===i?"0":i})\n`},Xe.contents.push({kind:"block",type:"nvg_ellipse",inputs:{CX:je,CY:je,RX:ze,RY:ze}});const ut={type:"nvg_circle",message0:Pe?"\u753b\u5706\n\u4e2d\u5fc3 X %1 \u4e2d\u5fc3 Y %2\n\u534a\u5f84 %3":"Draw circle\ncenter X %1 center Y %2\nradius %3",args0:[{type:"input_value",name:"CX",check:"Number"},{type:"input_value",name:"CY",check:"Number"},{type:"input_value",name:"RADIUS",check:"Number"}],previousStatement:null,nextStatement:null,style:"logic_blocks"};l.rK.nvg_circle={init:function(){this.jsonInit(ut)}},s.YW.forBlock.nvg_circle=function(e){const t=s.YW.valueToCode(e,"CX",s.pH.NONE),n=s.YW.valueToCode(e,"CY",s.pH.NONE),o=s.YW.valueToCode(e,"RADIUS",s.pH.NONE);return v.add("nvg"),`nvg.Circle(${""===t?"0":t}, ${""===n?"0":n}, ${""===o?"0":o})\n`},Xe.contents.push({kind:"block",type:"nvg_circle",inputs:{CX:je,CY:je,RADIUS:ze}});const pt=null!==g.A.locale.match(/^zh/),dt={kind:"category",name:pt?"\u97f3\u9891":"Audio",categorystyle:"logic_category",contents:[]},_t=dt,ht={type:"play_stream",message0:pt?"\u64ad\u653e\u97f3\u4e50 %1\n\u5faa\u73af %2\n\u4ea4\u53c9\u6de1\u5165\u65f6\u95f4 %3":"Play music %1\nloop %2\ncross fade time %3",args0:[{type:"input_value",name:"FILE",check:"String"},{type:"input_value",name:"LOOP",check:"Boolean"},{type:"input_value",name:"CROSS_FADE_TIME",check:"Number"}],previousStatement:null,nextStatement:null,style:"logic_blocks"};l.rK.play_stream={init:function(){this.jsonInit(ht)}},s.YW.forBlock.play_stream=function(e){const t=s.YW.valueToCode(e,"FILE",s.pH.NONE),n=s.YW.valueToCode(e,"LOOP",s.pH.NONE),o=s.YW.valueToCode(e,"CROSS_FADE_TIME",s.pH.NONE);return v.add("Audio"),`Audio:playStream(${""===t?"nil":t}, ${""===n?"false":n}, ${""===o?"0":o})\n`},dt.contents.push({kind:"block",type:"play_stream",inputs:{FILE:{shadow:{type:"text",fields:{TEXT:"Audio/Dismantlism Space.ogg"}}},LOOP:{shadow:{type:"logic_boolean",fields:{BOOL:"FALSE"}}},CROSS_FADE_TIME:{shadow:{type:"math_number",fields:{NUM:"0"}}}}});const mt={type:"stop_stream",message0:pt?"\u505c\u6b62\u97f3\u4e50\n\u6de1\u51fa\u65f6\u95f4 %1":"Stop music\nfade time %1",args0:[{type:"input_value",name:"FADE_TIME",check:"Number"}],previousStatement:null,nextStatement:null,style:"logic_blocks"};l.rK.stop_stream={init:function(){this.jsonInit(mt)}},s.YW.forBlock.stop_stream=function(e){const t=s.YW.valueToCode(e,"FADE_TIME",s.pH.NONE);return v.add("Audio"),`Audio:stopStream(${""===t?"0":t})\n`},dt.contents.push({kind:"block",type:"stop_stream",inputs:{FADE_TIME:{shadow:{type:"math_number",fields:{NUM:"0"}}}}});const yt={type:"play_sound",message0:pt?"\u64ad\u653e\u97f3\u6548 %1\n\u5faa\u73af %2\n\u8fd4\u56de\u97f3\u9891\u63a7\u5236\u7f16\u53f7":"Play sound %1\nloop %2\nreturn audio control ID",args0:[{type:"input_value",name:"FILE",check:"String"},{type:"input_value",name:"LOOP",check:"Boolean"}],output:"Number",previousStatement:null,nextStatement:null,style:"logic_blocks"};l.rK.play_sound={init:function(){this.jsonInit(yt)}},s.YW.forBlock.play_sound=function(e){var t;const n=s.YW.valueToCode(e,"FILE",s.pH.NONE),o=s.YW.valueToCode(e,"LOOP",s.pH.NONE);return v.add("Audio"),null!==(t=e.outputConnection)&&void 0!==t&&t.targetConnection?[`Audio:playSound(${""===n?"nil":n}, ${""===o?"false":o})`,s.pH.ATOMIC]:`Audio:play(${""===n?"nil":n}, ${""===o?"false":o})\n`},dt.contents.push({kind:"block",type:"play_sound",inputs:{FILE:{shadow:{type:"text",fields:{TEXT:"Audio/hero_win.wav"}}},LOOP:{shadow:{type:"logic_boolean",fields:{BOOL:"FALSE"}}}}});const gt={type:"stop_sound",message0:pt?"\u505c\u6b62\u97f3\u6548 %1":"Stop sound %1",args0:[{type:"input_value",name:"AUDIO_CONTROL_ID",check:"Number"}],previousStatement:null,nextStatement:null,style:"logic_blocks"};l.rK.stop_sound={init:function(){this.jsonInit(gt)}},s.YW.forBlock.stop_sound=function(e){const t=s.YW.valueToCode(e,"AUDIO_CONTROL_ID",s.pH.NONE);return v.add("Audio"),`Audio:stop(${""===t?"nil":t})\n`},dt.contents.push({kind:"block",type:"stop_sound",inputs:{AUDIO_CONTROL_ID:{shadow:{type:"variables_get"}}}});const bt=null!==g.A.locale.match(/^zh/),kt={kind:"category",name:bt?"\u5b57\u5178":"Dictionary",categorystyle:"colour_category",contents:[]},vt=kt,ft={type:"dict_create",message0:bt?"\u521b\u5efa\u7a7a\u5b57\u5178":"Create empty dictionary",output:"Dict",style:"colour_blocks"};l.rK.dict_create={init:function(){this.jsonInit(ft)}},s.YW.forBlock.dict_create=function(e){return["{}",s.pH.ATOMIC]},kt.contents.push({kind:"block",type:"dict_create"});const Tt={type:"dict_get",message0:bt?"\u4ece\u5b57\u5178 %1 \u83b7\u53d6\u952e %2 \u7684\u503c":"Get value with key %2 from dictionary %1",args0:[{type:"input_value",name:"DICT",check:"Dict"},{type:"input_value",name:"KEY",check:["String","Number"]}],output:null,style:"colour_blocks",tooltip:bt?"\u83b7\u53d6\u5b57\u5178\u4e2d\u6307\u5b9a\u952e\u7684\u503c":"Get the value for the specified key from the dictionary"};l.rK.dict_get={init:function(){this.jsonInit(Tt)}},s.YW.forBlock.dict_get=function(e){return[`${s.YW.valueToCode(e,"DICT",s.pH.ATOMIC)}[${s.YW.valueToCode(e,"KEY",s.pH.NONE)}]`,s.pH.HIGH]},kt.contents.push({kind:"block",type:"dict_get",inputs:{DICT:{shadow:{type:"variables_get"}},KEY:{shadow:{type:"text",fields:{TEXT:"key"}}}}});const Nt={type:"dict_set",message0:bt?"\u5728\u5b57\u5178 %1 \u4e2d\u8bbe\u7f6e\u952e %2 \u7684\u503c\u4e3a %3":"Set key %2 in dictionary %1 to value %3",args0:[{type:"input_value",name:"DICT",check:"Dict"},{type:"input_value",name:"KEY",check:["String","Number"]},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"colour_blocks",tooltip:bt?"\u5728\u5b57\u5178\u4e2d\u8bbe\u7f6e\u6307\u5b9a\u952e\u7684\u503c":"Set the value for the specified key in the dictionary"};l.rK.dict_set={init:function(){this.jsonInit(Nt)}},s.YW.forBlock.dict_set=function(e){return`${s.YW.valueToCode(e,"DICT",s.pH.ATOMIC)}[${s.YW.valueToCode(e,"KEY",s.pH.NONE)}] = ${s.YW.valueToCode(e,"VALUE",s.pH.NONE)||"nil"}\n`},kt.contents.push({kind:"block",type:"dict_set",inputs:{DICT:{shadow:{type:"variables_get"}},KEY:{shadow:{type:"text",fields:{TEXT:"key"}}},VALUE:{shadow:{type:"text",fields:{TEXT:"value"}}}}});const Et={type:"dict_has_key",message0:bt?"\u5b57\u5178 %1 \u5305\u542b\u952e %2":"Dictionary %1 has key %2",args0:[{type:"input_value",name:"DICT",check:"Dict"},{type:"input_value",name:"KEY",check:["String","Number"]}],output:"Boolean",style:"colour_blocks",tooltip:bt?"\u68c0\u67e5\u5b57\u5178\u662f\u5426\u5305\u542b\u6307\u5b9a\u7684\u952e":"Check if the dictionary contains the specified key"};l.rK.dict_has_key={init:function(){this.jsonInit(Et)}},s.YW.forBlock.dict_has_key=function(e){return[`${s.YW.valueToCode(e,"DICT",s.pH.ATOMIC)}[${s.YW.valueToCode(e,"KEY",s.pH.NONE)}] ~= nil`,s.pH.RELATIONAL]},kt.contents.push({kind:"block",type:"dict_has_key",inputs:{DICT:{shadow:{type:"variables_get"}},KEY:{shadow:{type:"text",fields:{TEXT:"key"}}}}});const It={type:"dict_remove_key",message0:bt?"\u4ece\u5b57\u5178 %1 \u4e2d\u5220\u9664\u952e %2":"Remove key %2 from dictionary %1",args0:[{type:"input_value",name:"DICT",check:"Dict"},{type:"input_value",name:"KEY",check:["String","Number"]}],previousStatement:null,nextStatement:null,style:"colour_blocks",tooltip:bt?"\u4ece\u5b57\u5178\u4e2d\u5220\u9664\u6307\u5b9a\u7684\u952e\u53ca\u5176\u503c":"Remove the specified key and its value from the dictionary"};l.rK.dict_remove_key={init:function(){this.jsonInit(It)}},s.YW.forBlock.dict_remove_key=function(e){return`${s.YW.valueToCode(e,"DICT",s.pH.ATOMIC)}[${s.YW.valueToCode(e,"KEY",s.pH.NONE)}] = nil\n`},kt.contents.push({kind:"block",type:"dict_remove_key",inputs:{DICT:{shadow:{type:"variables_get"}},KEY:{shadow:{type:"text",fields:{TEXT:"key"}}}}});const Ct=null!==g.A.locale.match(/^zh/),Ot={kind:"category",name:Ct?"\u7269\u7406":"Physics",categorystyle:"colour_category",contents:[]},St=Ot,Yt=(e,t,n)=>({[n?"shadow":"block"]:{type:"vec2_create",inputs:{X:{shadow:{type:"math_number",fields:{NUM:e}}},Y:{shadow:{type:"math_number",fields:{NUM:t}}}}}}),At=Yt(0,0,!0),Dt={type:"physics_world_create",message0:Ct?"\u521b\u5efa\u7269\u7406\u4e16\u754c\u8282\u70b9":"Create physics world node",output:"PhysicsWorld",style:"colour_blocks"};l.rK.physics_world_create={init:function(){this.jsonInit(Dt)}},s.YW.forBlock.physics_world_create=function(e){return v.add("PhysicsWorld"),["PhysicsWorld()",s.pH.ATOMIC]},Ot.contents.push({kind:"block",type:"physics_world_create"});const wt={type:"set_group_collision_enabled",message0:Ct?"\u8bbe\u7f6e\u7269\u7406\u4e16\u754c\u8282\u70b9 %1 \u7684\u5206\u7ec4 %2 \u548c\u5206\u7ec4 %3 %4":"Set world node %1 group %2 and group %3 %4",args0:[{type:"field_variable",name:"WORLD",variable:"world"},{type:"input_value",name:"GROUP1",check:"Number"},{type:"input_value",name:"GROUP2",check:"Number"},{type:"field_dropdown",name:"ENABLED",options:Ct?[["\u4f1a\u78b0\u649e","true"],["\u4e0d\u4f1a\u78b0\u649e","false"]]:[["contact Enabled","true"],["contact Disabled","false"]]}],previousStatement:null,nextStatement:null,style:"colour_blocks"};l.rK.set_group_collision_enabled={init:function(){this.jsonInit(wt)}},s.YW.forBlock.set_group_collision_enabled=function(e){return`${s.YW.getVariableName(e.getFieldValue("WORLD"))}:setShouldContact(${s.YW.valueToCode(e,"GROUP1",s.pH.NONE)}, ${s.YW.valueToCode(e,"GROUP2",s.pH.NONE)}, ${e.getFieldValue("ENABLED")})\n`},Ot.contents.push({kind:"block",type:"set_group_collision_enabled",inputs:{GROUP1:{shadow:{type:"math_number",fields:{NUM:0}}},GROUP2:{shadow:{type:"math_number",fields:{NUM:0}}}}});const Wt={type:"body_create",message0:Ct?"\u4e3a\u7269\u7406\u4e16\u754c\u8282\u70b9 %1 \u521b\u5efa %2 %3 \u7684\u521a\u4f53\u8282\u70b9\n\u5728\u4f4d\u7f6e %4 \u89d2\u5ea6 %5 \n\u91cd\u529b\u7cfb\u6570\u4e3a %6 \u5206\u7ec4\u4e3a %7\n\u7ec4\u6210\u5f62\u72b6\u5305\u62ec %8":"For world node %1\ncreate %2 %3 body node\nat position %4 angle %5\ngravity %6 group %7\nwith shapes %8",args0:[{type:"field_variable",name:"WORLD",variable:"world"},{type:"field_dropdown",name:"TYPE",options:Ct?[["\u9759\u6001","Static"],["\u52a8\u6001","Dynamic"],["\u53ef\u79fb\u52a8","Kinematic"]]:[["Static","Static"],["Dynamic","Dynamic"],["Kinematic","Kinematic"]]},{type:"field_dropdown",name:"FIXED",options:Ct?[["\u53ef\u65cb\u8f6c","false"],["\u56fa\u5b9a\u65cb\u8f6c","true"]]:[["Rotatable","false"],["Fixed","true"]]},{type:"input_value",name:"POSITION",check:"Vec2"},{type:"input_value",name:"ANGLE",check:"Number"},{type:"input_value",name:"GRAVITY",check:"Vec2"},{type:"input_value",name:"GROUP",check:"Number"},{type:"input_statement",name:"FIXTURES"}],output:"Body",style:"colour_blocks"};l.rK.body_create={init:function(){this.jsonInit(Wt)},onchange:function(e){var t,n;if(this.workspace.isDragging&&this.workspace.isDragging()||e.type!==l.sV.BLOCK_MOVE&&e.type!==l.sV.BLOCK_CREATE)return;let o=!0;this.setWarningText(null);const i=this.getInput("FIXTURES");let a=null===i||void 0===i||null===(t=i.connection)||void 0===t||null===(n=t.targetConnection)||void 0===n?void 0:n.getSourceBlock();if(a)if(this.ALLOWED_FIXTURES.includes(a.type))for(;a;){const e=a.getNextBlock();if(!e)break;this.ALLOWED_FIXTURES.includes(e.type)||(o=!1,this.setWarningText(Ct?"\u4f7f\u7528\u65e0\u6548\u7684\u5f62\u72b6":"Invalid shape")),a=e}else o=!1,this.setWarningText(Ct?"\u4f7f\u7528\u65e0\u6548\u7684\u5f62\u72b6":"Invalid shape");if(!this.isInFlyout)try{l.sV.setRecordUndo(!1),this.setDisabledReason(!o,"INVALID_SHAPE")}finally{l.sV.setRecordUndo(!0)}},ALLOWED_FIXTURES:["disk_fixture","rectangle_fixture","polygon_fixture","chain_fixture"]};const Vt=[];s.YW.forBlock.body_create=function(e){var t,n;const o=null!==(t=null===(n=s.YW.nameDB_)||void 0===n?void 0:n.getDistinctName("bodyDef",l.fS.NameType.VARIABLE))&&void 0!==t?t:"bodyDef";Vt.push(o);const i=s.YW.getVariableName(e.getFieldValue("WORLD")),a=s.YW.quote_(e.getFieldValue("TYPE")),c=e.getFieldValue("FIXED"),r=s.YW.valueToCode(e,"POSITION",s.pH.NONE),u=s.YW.valueToCode(e,"ANGLE",s.pH.NONE),p=s.YW.valueToCode(e,"GROUP",s.pH.NONE),d=s.YW.valueToCode(e,"GRAVITY",s.pH.NONE),_=s.YW.statementToCode(e,"FIXTURES");return Vt.pop(),v.add("BodyDef"),v.add("Body"),[`(function()\n  local ${o} = BodyDef()\n  ${o}.type = ${a}\n  ${o}.fixedRotation = ${c}\n  ${o}.group = ${p}\n  ${o}.linearAcceleration = ${d}\n${_}  return Body(${o}, ${i}, ${r}, ${u})\nend)()`,s.pH.ATOMIC]},Ot.contents.push({kind:"block",type:"body_create",inputs:{POSITION:At,ANGLE:{shadow:{type:"math_number",fields:{NUM:0}}},GROUP:{shadow:{type:"math_number",fields:{NUM:0}}},GRAVITY:{shadow:{type:"vec2_create",inputs:{X:{shadow:{type:"math_number",fields:{NUM:0}}},Y:{shadow:{type:"math_number",fields:{NUM:-9.8}}}}}}}});const Bt={type:"rectangle_fixture",message0:Ct?"\u77e9\u5f62\n\u4e2d\u5fc3 %1\n\u5bbd\u5ea6 %2 \u9ad8\u5ea6 %3 \u89d2\u5ea6 %4\n\u5bc6\u5ea6 %5 \u6469\u64e6\u529b %6 \u5f39\u6027 %7\n\u7528\u4f5c\u611f\u5e94\u5668\u7684\u7f16\u53f7\u4e3a %8":"Rectangle\ncenter %1\nwidth %2 height %3 angle %4\ndensity %5 friction %6 restitution %7\nas sensor with tag %8",args0:[{type:"input_value",name:"CENTER",check:"Vec2"},{type:"input_value",name:"WIDTH",check:"Number"},{type:"input_value",name:"HEIGHT",check:"Number"},{type:"input_value",name:"ANGLE",check:"Number"},{type:"input_value",name:"DENSITY",check:"Number"},{type:"input_value",name:"FRICTION",check:"Number"},{type:"input_value",name:"RESTITUTION",check:"Number"},{type:"input_value",name:"SENSOR_TAG",check:"Number"}],previousStatement:null,nextStatement:null,style:"math_blocks"};l.rK.rectangle_fixture={init:function(){this.jsonInit(Bt)},onchange:function(e){if(this.workspace.isDragging&&this.workspace.isDragging()||e.type!==l.sV.BLOCK_MOVE&&e.type!==l.sV.BLOCK_CREATE)return;let t=!1,n=this;do{if("body_create"===n.type){t=!0;break}n=n.getSurroundParent()}while(n);if(t?this.setWarningText(null):this.setWarningText(Ct?"\u77e9\u5f62\u5f62\u72b6\u5fc5\u987b\u5d4c\u5957\u5728\u521a\u4f53\u521b\u5efa\u5757\u4e2d":"Rectangle shape must be nested in a body create block"),!this.isInFlyout)try{l.sV.setRecordUndo(!1),this.setDisabledReason(!t,"UNPARENTED_RECTANGLE")}finally{l.sV.setRecordUndo(!0)}}},s.YW.forBlock.rectangle_fixture=function(e){const t=s.YW.valueToCode(e,"CENTER",s.pH.NONE),n=s.YW.valueToCode(e,"WIDTH",s.pH.NONE),o=s.YW.valueToCode(e,"HEIGHT",s.pH.NONE),i=s.YW.valueToCode(e,"ANGLE",s.pH.NONE),a=s.YW.valueToCode(e,"DENSITY",s.pH.NONE),l=s.YW.valueToCode(e,"FRICTION",s.pH.NONE),c=s.YW.valueToCode(e,"RESTITUTION",s.pH.NONE),r=s.YW.valueToCode(e,"SENSOR_TAG",s.pH.NONE),u=Vt[Vt.length-1];return""===r||"nil"===r?`${u}:attachPolygon(${t}, ${n}, ${o}, ${i}, ${a}, ${l}, ${c})\n`:`${u}:attachPolygonSensor(${r}, ${t}, ${n}, ${o}, ${i})\n`},Ot.contents.push({kind:"block",type:"rectangle_fixture",inputs:{CENTER:At,WIDTH:{shadow:{type:"math_number",fields:{NUM:100}}},HEIGHT:{shadow:{type:"math_number",fields:{NUM:100}}},ANGLE:{shadow:{type:"math_number",fields:{NUM:0}}},DENSITY:{shadow:{type:"math_number",fields:{NUM:1}}},FRICTION:{shadow:{type:"math_number",fields:{NUM:.4}}},RESTITUTION:{shadow:{type:"math_number",fields:{NUM:0}}},SENSOR_TAG:{shadow:{type:"logic_null"}}}});const Rt={type:"disk_fixture",message0:Ct?"\u5706\u5f62\n\u4e2d\u5fc3 %1\n\u534a\u5f84 %2\n\u5bc6\u5ea6 %3 \u6469\u64e6\u529b %4 \u5f39\u6027 %5\n\u7528\u4f5c\u611f\u5e94\u5668\u7684\u7f16\u53f7\u4e3a %6":"Circle\ncenter %1\nradius %2\ndensity %3 friction %4 restitution %5\nas sensor with tag %6",args0:[{type:"input_value",name:"CENTER",check:"Vec2"},{type:"input_value",name:"RADIUS",check:"Number"},{type:"input_value",name:"DENSITY",check:"Number"},{type:"input_value",name:"FRICTION",check:"Number"},{type:"input_value",name:"RESTITUTION",check:"Number"},{type:"input_value",name:"SENSOR_TAG",check:"Number"}],previousStatement:null,nextStatement:null,style:"math_blocks"};l.rK.disk_fixture={init:function(){this.jsonInit(Rt)},onchange:function(e){if(this.workspace.isDragging&&this.workspace.isDragging()||e.type!==l.sV.BLOCK_MOVE&&e.type!==l.sV.BLOCK_CREATE)return;let t=!1,n=this;do{if("body_create"===n.type){t=!0;break}n=n.getSurroundParent()}while(n);if(t?this.setWarningText(null):this.setWarningText(Ct?"\u5706\u5f62\u5f62\u72b6\u5fc5\u987b\u5d4c\u5957\u5728\u521a\u4f53\u521b\u5efa\u5757\u4e2d":"Circle shape must be nested in a body create block"),!this.isInFlyout)try{l.sV.setRecordUndo(!1),this.setDisabledReason(!t,"UNPARENTED_CIRCLE")}finally{l.sV.setRecordUndo(!0)}}},s.YW.forBlock.disk_fixture=function(e){const t=s.YW.valueToCode(e,"CENTER",s.pH.NONE),n=s.YW.valueToCode(e,"RADIUS",s.pH.NONE),o=s.YW.valueToCode(e,"DENSITY",s.pH.NONE),i=s.YW.valueToCode(e,"FRICTION",s.pH.NONE),a=s.YW.valueToCode(e,"RESTITUTION",s.pH.NONE),l=s.YW.valueToCode(e,"SENSOR_TAG",s.pH.NONE),c=Vt[Vt.length-1];return""===l||"nil"===l?`${c}:attachDisk(${t}, ${n}, ${o}, ${i}, ${a})\n`:`${c}:attachDiskSensor(${l}, ${t}, ${n})\n`},Ot.contents.push({kind:"block",type:"disk_fixture",inputs:{CENTER:At,RADIUS:{shadow:{type:"math_number",fields:{NUM:100}}},DENSITY:{shadow:{type:"math_number",fields:{NUM:1}}},FRICTION:{shadow:{type:"math_number",fields:{NUM:.4}}},RESTITUTION:{shadow:{type:"math_number",fields:{NUM:0}}},SENSOR_TAG:{shadow:{type:"logic_null"}}}});const $t={type:"polygon_fixture",message0:Ct?"\u591a\u8fb9\u5f62\n\u9876\u70b9 %1\n\u5bc6\u5ea6 %2 \u6469\u64e6\u529b %3 \u5f39\u6027 %4\n\u7528\u4f5c\u611f\u5e94\u5668\u7684\u7f16\u53f7\u4e3a %5":"Polygon\nvertices %1\ndensity %2 friction %3 restitution %4\nas sensor with tag %5",args0:[{type:"input_value",name:"VERTICES",check:"Array"},{type:"input_value",name:"DENSITY",check:"Number"},{type:"input_value",name:"FRICTION",check:"Number"},{type:"input_value",name:"RESTITUTION",check:"Number"},{type:"input_value",name:"SENSOR_TAG",check:"Number"}],previousStatement:null,nextStatement:null,style:"math_blocks"};l.rK.polygon_fixture={init:function(){this.jsonInit($t)},onchange:function(e){if(this.workspace.isDragging&&this.workspace.isDragging()||e.type!==l.sV.BLOCK_MOVE&&e.type!==l.sV.BLOCK_CREATE)return;let t=!1,n=this;do{if("body_create"===n.type){t=!0;break}n=n.getSurroundParent()}while(n);if(t?this.setWarningText(null):this.setWarningText(Ct?"\u591a\u8fb9\u5f62\u5f62\u72b6\u5fc5\u987b\u5d4c\u5957\u5728\u521a\u4f53\u521b\u5efa\u5757\u4e2d":"Polygon shape must be nested in a body create block"),!this.isInFlyout)try{l.sV.setRecordUndo(!1),this.setDisabledReason(!t,"UNPARENTED_POLYGON")}finally{l.sV.setRecordUndo(!0)}}},s.YW.forBlock.polygon_fixture=function(e){const t=s.YW.valueToCode(e,"VERTICES",s.pH.NONE),n=s.YW.valueToCode(e,"DENSITY",s.pH.NONE),o=s.YW.valueToCode(e,"FRICTION",s.pH.NONE),i=s.YW.valueToCode(e,"RESTITUTION",s.pH.NONE),a=s.YW.valueToCode(e,"SENSOR_TAG",s.pH.NONE),l=Vt[Vt.length-1];return""===a||"nil"===a?`${l}:attachPolygon(${""===t?"nil":t}, ${n}, ${o}, ${i})\n`:`${l}:attachPolygonSensor(${a}, ${""===t?"nil":t})\n`},Ot.contents.push({kind:"block",type:"polygon_fixture",inputs:{VERTICES:{block:{type:"lists_create_with",extraState:{itemCount:4},inputs:{ADD0:Yt(-100,-50,!1),ADD1:Yt(-100,0,!1),ADD2:Yt(100,0,!1),ADD3:Yt(100,-50,!1)}}},DENSITY:{shadow:{type:"math_number",fields:{NUM:1}}},FRICTION:{shadow:{type:"math_number",fields:{NUM:.4}}},RESTITUTION:{shadow:{type:"math_number",fields:{NUM:0}}},SENSOR_TAG:{shadow:{type:"logic_null"}}}});const Ut={type:"chain_fixture",message0:Ct?"\u94fe\u6761\u5f62\n\u9876\u70b9 %1\n\u6469\u64e6\u529b %2 \u5f39\u6027 %3":"Chain\nvertices %1\nfriction %2 restitution %3",args0:[{type:"input_value",name:"VERTICES",check:"Array"},{type:"input_value",name:"FRICTION",check:"Number",fields:{NUM:.4}},{type:"input_value",name:"RESTITUTION",check:"Number",fields:{NUM:0}}],previousStatement:null,nextStatement:null,style:"math_blocks"};l.rK.chain_fixture={init:function(){this.jsonInit(Ut)},onchange:function(e){if(this.workspace.isDragging&&this.workspace.isDragging()||e.type!==l.sV.BLOCK_MOVE&&e.type!==l.sV.BLOCK_CREATE)return;let t=!1,n=this;do{if("body_create"===n.type){t=!0;break}n=n.getSurroundParent()}while(n);if(t?this.setWarningText(null):this.setWarningText(Ct?"\u94fe\u6761\u5f62\u72b6\u5fc5\u987b\u5d4c\u5957\u5728\u521a\u4f53\u521b\u5efa\u5757\u4e2d":"Chain shape must be nested in a body create block"),!this.isInFlyout)try{l.sV.setRecordUndo(!1),this.setDisabledReason(!t,"UNPARENTED_CHAIN")}finally{l.sV.setRecordUndo(!0)}}},s.YW.forBlock.chain_fixture=function(e){const t=s.YW.valueToCode(e,"VERTICES",s.pH.NONE),n=s.YW.valueToCode(e,"FRICTION",s.pH.NONE),o=s.YW.valueToCode(e,"RESTITUTION",s.pH.NONE);return`${Vt[Vt.length-1]}:attachChain(${""===t?"nil":t}, ${n}, ${o})\n`},Ot.contents.push({kind:"block",type:"chain_fixture",inputs:{VERTICES:{block:{type:"lists_create_with",extraState:{itemCount:2},inputs:{ADD0:Yt(0,0,!1),ADD1:Yt(100,0,!1)}}},FRICTION:{shadow:{type:"math_number",fields:{NUM:.4}}},RESTITUTION:{shadow:{type:"math_number",fields:{NUM:0}}}}});const Mt=null!==g.A.locale.match(/^zh/),Ht={kind:"category",name:Mt?"\u6742\u9879":"Misc",categorystyle:"colour_category",contents:[]},xt=Ht,Ft={type:"print_block",message0:Mt?"\u6253\u5370 %1":"Print %1",args0:[{type:"input_value",name:"ITEM"}],previousStatement:null,nextStatement:null,style:"logic_blocks"};l.rK.print_block={init:function(){this.jsonInit(Ft)}},s.YW.forBlock.print_block=function(e){const t=s.YW.valueToCode(e,"ITEM",s.pH.NONE);return`p(${""===t?'""':t})\n`},Ht.contents.push({kind:"block",type:"print_block",inputs:{ITEM:{shadow:{type:"text",fields:{TEXT:""}}}}});const Lt={type:"comment_block",message0:Mt?"\u6807\u6ce8 %1":"Note %1",args0:[{type:"field_input",name:"NOTE",text:"@preview-project on nolog clear"}],previousStatement:null,nextStatement:null,style:"text_blocks"};l.rK.comment_block={init:function(){this.jsonInit(Lt)}},s.YW.forBlock.comment_block=function(e){return`-- ${e.getFieldValue("NOTE")}\n`},Ht.contents.push({kind:"block",type:"comment_block"});const Pt={type:"colour_hsv_sliders",message0:Mt?"\u989c\u8272 %1":"Color %1",args0:[{type:"field_colour_hsv_sliders",name:"COLOUR",colour:"#fac03d"}],output:"Color3",style:"colour_blocks"};l.rK.colour_hsv_sliders={init:function(){this.jsonInit(Pt)}},s.YW.forBlock.colour_hsv_sliders=function(e){return[`0x${e.getFieldValue("COLOUR").substring(1)}`,s.pH.ATOMIC]},Ht.contents.push({kind:"block",type:"colour_hsv_sliders"});const Xt={type:"require_block",message0:Mt?"\u5bfc\u5165\u6a21\u5757 %1":"Require module %1",args0:[{type:"input_value",name:"MODULE",check:"String"}],output:"Module",previousStatement:null,nextStatement:null,style:"logic_blocks"};l.rK.require_block={init:function(){this.jsonInit(Xt)}},s.YW.forBlock.require_block=function(e){var t;const n=s.YW.valueToCode(e,"MODULE",s.pH.NONE);return null!==(t=e.outputConnection)&&void 0!==t&&t.targetConnection?[`require(${n})`,s.pH.ATOMIC]:`require(${n})\n`},Ht.contents.push({kind:"block",type:"require_block",inputs:{MODULE:{shadow:{type:"text",fields:{TEXT:"module"}}}}});const Kt=["procedures_defnoreturn","procedures_defreturn","on_sensor_enter","on_contact_filter","on_contact_event","on_button_event","on_keyboard_event","on_tap_event","on_update","node_register_global_event","thread","nvg_begin_painting"],jt={init:function(){this.appendValueInput("VALUE").appendField(Mt?"\u4ece\u6a21\u5757\u5bfc\u51fa":"Module export"),this.setInputsInline(!1),this.setPreviousStatement(!0),this.setNextStatement(!1),this.setStyle("procedure_blocks")},onchange:function(e){if(this.workspace.isDragging&&this.workspace.isDragging()||e.type!==l.sV.BLOCK_MOVE&&e.type!==l.sV.BLOCK_CREATE)return;let t=!0,n=this;do{if(Kt.includes(n.type)){t=!1;break}n=n.getSurroundParent()}while(n);if(t?this.setWarningText(null):this.setWarningText(Mt?"\u5bfc\u51fa\u5757\u4e0d\u80fd\u5d4c\u5957\u5728\u51fd\u6570\u5757\u4e2d":"Export block cannot be nested in a function block"),!this.isInFlyout)try{l.sV.setRecordUndo(!1),this.setDisabledReason(!t,"UNPARENTED_EXPORT")}finally{l.sV.setRecordUndo(!0)}}};l.rK.export_block=jt,s.YW.forBlock.export_block=function(e){const t=s.YW.valueToCode(e,"VALUE",s.pH.NONE);return`return ${""===t?"nil":t}\n`},Ht.contents.push({kind:"block",type:"export_block",inputs:{VALUE:{shadow:{type:"logic_null"}}}});const Gt={init:function(){this.appendValueInput("VALUE").appendField(Mt?"\u8fc7\u7a0b\u8fd4\u56de":"Procedure return"),this.setInputsInline(!1),this.setPreviousStatement(!0),this.setNextStatement(!1),this.setStyle("procedure_blocks")},onchange:function(e){if(this.workspace.isDragging&&this.workspace.isDragging()||e.type!==l.sV.BLOCK_MOVE&&e.type!==l.sV.BLOCK_CREATE)return;let t=!1,n=this;do{if(Kt.includes(n.type)){t=!0;break}n=n.getSurroundParent()}while(n);if(t?this.setWarningText(null):this.setWarningText(Mt?"\u8fd4\u56de\u503c\u5757\u9700\u8981\u5d4c\u5957\u5728\u51fd\u6570\u5757\u4e2d":"Return block must be nested in a function block"),!this.isInFlyout)try{l.sV.setRecordUndo(!1),this.setDisabledReason(!t,"UNPARENTED_RETURN")}finally{l.sV.setRecordUndo(!0)}}};l.rK.return_block=Gt,s.YW.forBlock.return_block=function(e){const t=s.YW.valueToCode(e,"VALUE",s.pH.NONE);return""===t?"return\n":`return ${t}\n`},Ht.contents.push({kind:"block",type:"return_block",inputs:{VALUE:{block:{type:"logic_boolean"}}}});const zt={init:function(){this.setStyle("procedure_blocks"),this.argCount_=1,this.updateShape_(),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setOutput(!0,null),this.setInputsInline(!1),this.setMutator(new l.Pt.MutatorIcon(["arg_create_with_item"],this))},mutationToDom:function(){const e=l.Wp.xml.createElement("mutation");return e.setAttribute("args",String(this.argCount_)),e},domToMutation:function(e){const t=e.getAttribute("args");if(!t)throw new TypeError("element did not have args");this.argCount_=parseInt(t,10),this.updateShape_()},saveExtraState:function(){return{argCount:this.argCount_}},loadExtraState:function(e){this.argCount_=e.argCount,this.updateShape_()},decompose:function(e){const t=e.newBlock("arg_create_with_container");t.initSvg();let n=t.getInput("STACK").connection;for(let o=0;o<this.argCount_;o++){const t=e.newBlock("arg_create_with_item");if(t.initSvg(),!t.previousConnection)throw new Error("argBlock has no previousConnection");n.connect(t.previousConnection),n=t.nextConnection}return t},compose:function(e){let t=e.getInputTargetBlock("STACK");const n=[];for(;t;)t.isInsertionMarker()||n.push(t.valueConnection_),t=t.getNextBlock();for(let i=0;i<this.argCount_;i++){const e=this.getInput("ADD"+i).connection.targetConnection;e&&!n.includes(e)&&e.disconnect()}this.argCount_=n.length,this.updateShape_();for(let i=0;i<this.argCount_;i++){var o;null===(o=n[i])||void 0===o||o.reconnect(this,"ADD"+i)}},saveConnections:function(e){let t=e.getInputTargetBlock("STACK"),n=0;for(;t;){if(t.isInsertionMarker()){t=t.getNextBlock();continue}const e=this.getInput("ADD"+n);t.valueConnection_=null===e||void 0===e?void 0:e.connection.targetConnection,t=t.getNextBlock(),n++}},updateShape_:function(){this.getInput("FUNCTION")||this.appendDummyInput("FUNCTION").appendField(Mt?"\u8c03\u7528\u51fd\u6570":"Call function").appendField(new l.lP("temp"),"FUNCTION"),this.argCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.argCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(Mt?"\u65e0\u53c2\u6570":"no arguments");for(let e=0;e<this.argCount_;e++)if(!this.getInput("ADD"+e)){const t=this.appendValueInput("ADD"+e).setAlign(l.QL.Align.RIGHT);0===e&&t.appendField(Mt?"\u53c2\u6570":"arguments")}for(let e=this.argCount_;this.getInput("ADD"+e);e++)this.removeInput("ADD"+e)}};l.rK.invoke=zt,s.YW.forBlock.invoke=function(e){var t;const n=s.YW.getVariableName(e.getFieldValue("FUNCTION")),o=[];for(let i=0;i<e.argCount_;i++){const t=s.YW.valueToCode(e,"ADD"+i,s.pH.NONE);o.push(""===t?"nil":t)}return null!==(t=e.outputConnection)&&void 0!==t&&t.targetConnection?[`${n}(${o.join(", ")})`,s.pH.ATOMIC]:`${n}(${o.join(", ")})\n`},Ht.contents.push({kind:"block",type:"invoke"});var Qt=n(77515),qt=n(44414);const Zt=(0,qt.jsx)("div",{style:{width:"100%",height:"100%",backgroundColor:"#1a1a1a"}}),Jt=e=>{let{file:t,width:n,height:k,readOnly:f=!1,initialJson:T,onChange:E,onSave:I,options:C={}}=e;const S=(0,o.useRef)(null),Y=(0,o.useRef)(null),[A,D]=(0,o.useState)(!0),{t:w}=(0,u.Bd)(),[W,V]=(0,o.useState)(!1);return(0,o.useEffect)((()=>{const e=null!==g.A.locale.match(/^zh/);if(S.current&&!Y.current){e?l.xS(c):l.xS(r),l.cE.VARIABLES_DEFAULT_NAME="temp";const n={...{sounds:!1,media:"/",readOnly:f,theme:{name:"DoraTheme",base:l.BD.Classic,startHats:!0,fontStyle:{size:10},blockStyles:{dora_blocks:{colourPrimary:"#d2970d",colourSecondary:l.Wp.colour.blend("#d2970d","#000000",.8)||"#d2970d"},math_blocks:{colourSecondary:l.Wp.colour.blend("#5b67a5","#000000",.8)||"#5b67a5"},text_blocks:{colourSecondary:l.Wp.colour.blend("#5ba58c","#000000",.8)||"#5ba58c"},logic_blocks:{colourSecondary:l.Wp.colour.blend("#5b80a5","#000000",.8)||"#5b80a5"},procedure_blocks:{colourPrimary:"#995ba5",colourSecondary:l.Wp.colour.blend("#995ba5","#000000",.8)||"#995ba5"},colour_blocks:{colourSecondary:l.Wp.colour.blend("#a5745b","#000000",.8)||"#a5745b"},variable_blocks:{colourSecondary:l.Wp.colour.blend("#a55b80","#000000",.8)||"#a55b80"},variable_dynamic_blocks:{colourSecondary:l.Wp.colour.blend("#a55b80","#000000",.8)||"#a55b80"}},categoryStyles:{dora_category:{colour:"#d2970d"}},componentStyles:{workspaceBackgroundColour:"#1e1e1e",toolboxBackgroundColour:"#333",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:.9,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.1,cursorColour:"#d0d0d0"}},toolbox:{kind:"categoryToolbox",contents:[{kind:"category",name:w("blockly.logic"),categorystyle:"logic_category",contents:[{kind:"block",type:"controls_if"},{kind:"block",type:"logic_compare"},{kind:"block",type:"logic_operation"},{kind:"block",type:"logic_negate"},{kind:"block",type:"logic_boolean"},{kind:"block",type:"logic_null"},{kind:"block",type:"logic_ternary"}]},{kind:"category",name:w("blockly.loops"),categorystyle:"loop_category",contents:[{kind:"block",type:"controls_repeat_ext",inputs:{TIMES:{shadow:{type:"math_number",fields:{NUM:10}}}}},{kind:"block",type:"controls_whileUntil"},{kind:"block",type:"controls_for",inputs:{FROM:{shadow:{type:"math_number",fields:{NUM:1}}},TO:{shadow:{type:"math_number",fields:{NUM:10}}},BY:{shadow:{type:"math_number",fields:{NUM:1}}}}},{kind:"block",type:"controls_forEach",inputs:{LIST:{shadow:{type:"variables_get"}}}},{kind:"block",type:"controls_flow_statements"}]},{kind:"category",name:w("blockly.math"),categorystyle:"math_category",contents:[{kind:"block",type:"math_number",fields:{NUM:123}},{kind:"block",type:"math_arithmetic",inputs:{A:{shadow:{type:"math_number",fields:{NUM:1}}},B:{shadow:{type:"math_number",fields:{NUM:1}}}}},{kind:"block",type:"math_single",inputs:{NUM:{shadow:{type:"math_number",fields:{NUM:9}}}}},{kind:"block",type:"math_trig",inputs:{NUM:{shadow:{type:"math_number",fields:{NUM:45}}}}},{kind:"block",type:"math_constant"},{kind:"block",type:"math_number_property",inputs:{NUMBER_TO_CHECK:{shadow:{type:"math_number",fields:{NUM:0}}}}},{kind:"block",type:"math_round",fields:{OP:"ROUND"},inputs:{NUM:{shadow:{type:"math_number",fields:{NUM:3.1}}}}},{kind:"block",type:"math_on_list",fields:{OP:"SUM"}},{kind:"block",type:"math_modulo",inputs:{DIVIDEND:{shadow:{type:"math_number",fields:{NUM:64}}},DIVISOR:{shadow:{type:"math_number",fields:{NUM:10}}}}},{kind:"block",type:"math_constrain",inputs:{VALUE:{shadow:{type:"math_number",fields:{NUM:50}}},LOW:{shadow:{type:"math_number",fields:{NUM:1}}},HIGH:{shadow:{type:"math_number",fields:{NUM:100}}}}},{kind:"block",type:"math_random_int",inputs:{FROM:{shadow:{type:"math_number",fields:{NUM:1}}},TO:{shadow:{type:"math_number",fields:{NUM:100}}}}},{kind:"block",type:"math_random_float"},{kind:"block",type:"math_atan2",inputs:{X:{shadow:{type:"math_number",fields:{NUM:1}}},Y:{shadow:{type:"math_number",fields:{NUM:1}}}}}]},{kind:"category",name:w("blockly.text"),categorystyle:"text_category",contents:[{kind:"block",type:"text"},{kind:"block",type:"text_join"},{kind:"block",type:"text_append",inputs:{TEXT:{shadow:{type:"text",fields:{TEXT:""}}}}},{kind:"block",type:"text_length",inputs:{VALUE:{shadow:{type:"text",fields:{TEXT:"abc"}}}}},{kind:"block",type:"text_isEmpty",inputs:{VALUE:{shadow:{type:"text",fields:{TEXT:""}}}}},{kind:"block",type:"text_indexOf",inputs:{VALUE:{block:{type:"variables_get"}},FIND:{shadow:{type:"text",fields:{TEXT:"abc"}}}}},{kind:"block",type:"text_charAt",inputs:{VALUE:{block:{type:"variables_get"}},AT:{shadow:{type:"math_number",fields:{NUM:1}}}}},{kind:"block",type:"text_getSubstring",inputs:{STRING:{block:{type:"variables_get"}},AT1:{shadow:{type:"math_number",fields:{NUM:1}}},AT2:{shadow:{type:"math_number",fields:{NUM:1}}}}},{kind:"block",type:"text_changeCase",inputs:{TEXT:{shadow:{type:"text",fields:{TEXT:"abc"}}}}},{kind:"block",type:"text_trim",inputs:{TEXT:{shadow:{type:"text",fields:{TEXT:"abc"}}}}},{kind:"block",type:"text_count",inputs:{SUB:{shadow:{type:"text"}},TEXT:{shadow:{type:"text"}}}},{kind:"block",type:"text_replace",inputs:{FROM:{shadow:{type:"text"}},TO:{shadow:{type:"text"}},TEXT:{shadow:{type:"text"}}}},{kind:"block",type:"text_reverse",inputs:{TEXT:{shadow:{type:"text"}}}}]},{kind:"category",name:w("blockly.lists"),categorystyle:"list_category",contents:[{kind:"block",type:"lists_create_with"},{kind:"block",type:"lists_repeat",inputs:{ITEM:{shadow:{type:"variables_get"}},NUM:{shadow:{type:"math_number",fields:{NUM:5}}}}},{kind:"block",type:"lists_length",inputs:{VALUE:{block:{type:"variables_get"}}}},{kind:"block",type:"lists_isEmpty",inputs:{VALUE:{block:{type:"variables_get"}}}},{kind:"block",type:"lists_indexOf",inputs:{VALUE:{block:{type:"variables_get"}}}},{kind:"block",type:"lists_getIndex",inputs:{VALUE:{block:{type:"variables_get"}},AT:{shadow:{type:"math_number",fields:{NUM:1}}}}},{kind:"block",type:"lists_setIndex",inputs:{LIST:{block:{type:"variables_get"}},AT:{shadow:{type:"math_number",fields:{NUM:1}}}}},{kind:"block",type:"lists_getSublist",inputs:{LIST:{block:{type:"variables_get"}},AT1:{shadow:{type:"math_number",fields:{NUM:1}}},AT2:{shadow:{type:"math_number",fields:{NUM:1}}}}},{kind:"block",type:"lists_split",inputs:{INPUT:{shadow:{type:"text",fields:{TEXT:"item1,item2,item3"}}},DELIM:{shadow:{type:"text",fields:{TEXT:","}}}}},{kind:"block",type:"lists_sort"},{kind:"block",type:"lists_reverse",inputs:{LIST:{block:{type:"variables_get"}}}}]},vt,{kind:"sep"},N,{kind:"category",name:w("blockly.variables"),categorystyle:"variable_category",custom:"VARIABLE"},{kind:"category",name:w("blockly.functions"),categorystyle:"procedure_category",custom:"PROCEDURE"},{kind:"sep"},he,{kind:"sep"},O,x,Ke,St,{kind:"sep"},Ce,j,_t,{kind:"sep"},Me,{kind:"sep"},xt]},grid:{spacing:20,length:3,colour:"#666",snap:!0},move:{scrollbars:!0,drag:!0,wheel:!0},zoom:{controls:!0,wheel:!0,startScale:1,maxScale:3,minScale:.3,scaleSpeed:1.2},trashcan:!0},...C};if(Y.current=l.WQ(S.current,n),T)try{const e=JSON.parse(T);Y.current.showEditor=e.showEditor,l.JF.workspaces.load(e,Y.current),e.showEditor&&(V(!0),setTimeout((()=>{var e;null===(e=Y.current)||void 0===e||e.scrollCenter()}),100))}catch(t){console.error("Error loading initial JSON:",t),l.JF.workspaces.load({},Y.current)}if(E){let e=!0;Y.current.addChangeListener((t=>{if(t.type===l.sV.FINISHED_LOADING&&(e=!1),!t.isUiEvent&&!e&&Y.current){const e=l.JF.workspaces.save(Y.current);e.showEditor=Y.current.showEditor;const t=JSON.stringify(e);v.clear();const n=s.YW.workspaceToCode(Y.current),o=n.match(/^function\s+([a-zA-Z0-9_]+)/gm),i=o?o.map((e=>e.replace(/^function\s+/,""))):[],a=i.length>0?`local ${i.join(", ")}\n`:"",c=n.replace(/^function\s+([a-zA-Z0-9_]+)/gm,"$1 = function"),r=v.getCode();E(t,"local _ENV = setmetatable({}, {__index = _G})\n"+(""===r?"":r+"\n")+a+c)}}))}}return()=>{Y.current&&(Y.current.dispose(),Y.current=null)}}),[]),(0,o.useEffect)((()=>{if(S.current&&Y.current&&"number"===typeof k&&k>0){const{scrollX:e,scrollY:t}=Y.current;l.jv(Y.current),Y.current.scroll(e,t)}}),[W,k,n]),(0,o.useEffect)((()=>{A&&Y.current&&k>0&&(D(!1),Y.current.scrollCenter())}),[A,k,Y]),(0,qt.jsxs)("div",{style:{display:"flex",position:"relative"},children:[(0,qt.jsx)("div",{ref:S,className:"blockly-component",style:{width:W?.6*n:n,height:k}}),W&&(0,qt.jsx)(i.Ay,{width:.4*n,height:k,language:"lua",theme:Qt.v,keepCurrentModel:!0,loading:Zt,path:a.Uri.file(b.default.join(b.default.dirname(t),b.default.basename(t,b.default.extname(t))+".lua")).toString(),options:{readOnly:!0,padding:{top:16},wordWrap:"on",wordBreak:"keepAll",selectOnLineNumbers:!0,matchBrackets:"near",fontSize:16,useTabStops:!1,insertSpaces:!1,renderWhitespace:"all",tabSize:2,minimap:{enabled:!1}}}),(0,qt.jsx)("div",{hidden:f,style:{position:"absolute",left:"85px",bottom:"15px",zIndex:100},children:(0,qt.jsxs)(p.A,{direction:"row",spacing:1,children:[(0,qt.jsx)(d.A,{title:w(W?"blockly.hideCode":"blockly.showCode"),children:(0,qt.jsx)(_.A,{onClick:()=>{V(!W),Y.current&&(Y.current.showEditor=!W),setTimeout((()=>{var e;null===(e=Y.current)||void 0===e||e.fireChangeListener(new l.sV.BlockChange)}),200)},sx:{backgroundColor:"rgba(50, 50, 50, 0.7)",color:"rgba(255, 255, 255, 0.4)","&:hover":{backgroundColor:"rgba(70, 70, 70, 0.9)"}},children:W?(0,qt.jsx)(m.A,{}):(0,qt.jsx)(h.A,{})})}),(0,qt.jsx)(d.A,{title:w("blockly.save")||"\u4fdd\u5b58",children:(0,qt.jsx)(_.A,{onClick:I,sx:{backgroundColor:"rgba(50, 50, 50, 0.7)",color:"rgba(255, 255, 255, 0.4)","&:hover":{backgroundColor:"rgba(70, 70, 70, 0.9)"}},children:(0,qt.jsx)(y.A,{})})})]})})]})}}}]);