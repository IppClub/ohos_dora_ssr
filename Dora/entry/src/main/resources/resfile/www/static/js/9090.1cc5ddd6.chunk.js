"use strict";(self.webpackChunkdora_dora=self.webpackChunkdora_dora||[]).push([[9090],{219:(e,t,n)=>{n.d(t,{v:()=>f});var o=n(20503);const i={comments:{blockComment:["--[[","]]"],lineComment:"--"},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],folding:{markers:{start:new RegExp("^\\s*#region\\b"),end:new RegExp("^\\s*#endregion\\b")}}};var r=n(59852),a=n(84765);r.bt((e,t)=>{const n=o.editor.getModel(o.Uri.file(e));n?n.setValue(t):o.editor.createModel(t,"typescript",o.Uri.file(e))});const s=o.typescript.typescriptDefaults.getCompilerOptions();s.noLib=!0,s.strict=!0,s.jsx=o.typescript.JsxEmit.React,s.target=o.typescript.ScriptTarget.ESNext,s.module=o.typescript.ModuleKind.ESNext,s.moduleResolution=o.typescript.ModuleResolutionKind.Classic,o.typescript.typescriptDefaults.setCompilerOptions(s),o.editor.defineTheme("dora-dark",{base:"vs-dark",inherit:!0,rules:[{token:"invalid",foreground:"f44747",fontStyle:"italic"},{token:"self.call",foreground:"dcdcaa"},{token:"operator",foreground:"cc76d1"},{token:"comment",foreground:"8bb66f"}],colors:{"actionBar.toggledBackground":"#383a49","activityBar.activeBorder":"#0078d4","activityBar.background":"#181818","activityBar.border":"#2b2b2b","activityBar.foreground":"#d7d7d7","activityBar.inactiveForeground":"#868686","activityBarBadge.background":"#0078d4","activityBarBadge.foreground":"#ffffff","badge.background":"#616161","badge.foreground":"#f8f8f8","button.background":"#0078d4","button.border":"#ffffff12","button.foreground":"#ffffff","button.hoverBackground":"#026ec1","button.secondaryBackground":"#313131","button.secondaryForeground":"#cccccc","button.secondaryHoverBackground":"#3c3c3c","chat.slashCommandBackground":"#34414b","chat.slashCommandForeground":"#40a6ff","checkbox.background":"#313131","checkbox.border":"#3c3c3c","debugToolBar.background":"#181818",descriptionForeground:"#9d9d9d","dropdown.background":"#313131","dropdown.border":"#3c3c3c","dropdown.foreground":"#cccccc","dropdown.listBackground":"#1f1f1f","editor.background":"#1f1f1f","editor.findMatchBackground":"#9e6a03","editor.foreground":"#cccccc","editor.inactiveSelectionBackground":"#3a3d41","editor.selectionHighlightBackground":"#add6ff26","editorGroup.border":"#ffffff17","editorGroupHeader.tabsBackground":"#181818","editorGroupHeader.tabsBorder":"#2b2b2b","editorGutter.addedBackground":"#2ea043","editorGutter.deletedBackground":"#f85149","editorGutter.modifiedBackground":"#0078d4","editorIndentGuide.activeBackground1":"#707070","editorIndentGuide.background1":"#404040","editorLineNumber.activeForeground":"#cccccc","editorLineNumber.foreground":"#6e7681","editorOverviewRuler.border":"#010409","editorWidget.background":"#202020",errorForeground:"#f85149",focusBorder:"#0078d4",foreground:"#cccccc","icon.foreground":"#cccccc","input.background":"#313131","input.border":"#3c3c3c","input.foreground":"#cccccc","input.placeholderForeground":"#989898","inputOption.activeBackground":"#2489db82","inputOption.activeBorder":"#2488db","keybindingLabel.foreground":"#cccccc","list.activeSelectionIconForeground":"#ffffff","list.dropBackground":"#383b3d","menu.background":"#1f1f1f","menu.border":"#454545","menu.foreground":"#cccccc","menu.selectionBackground":"#0078d4","menu.separatorBackground":"#454545","notificationCenterHeader.background":"#1f1f1f","notificationCenterHeader.foreground":"#cccccc","notifications.background":"#1f1f1f","notifications.border":"#2b2b2b","notifications.foreground":"#cccccc","panel.background":"#181818","panel.border":"#2b2b2b","panelInput.border":"#2b2b2b","panelTitle.activeBorder":"#0078d4","panelTitle.activeForeground":"#cccccc","panelTitle.inactiveForeground":"#9d9d9d","peekViewEditor.background":"#1f1f1f","peekViewEditor.matchHighlightBackground":"#bb800966","peekViewResult.background":"#1f1f1f","peekViewResult.matchHighlightBackground":"#bb800966","pickerGroup.border":"#3c3c3c","ports.iconRunningProcessForeground":"#369432","progressBar.background":"#0078d4","quickInput.background":"#222222","quickInput.foreground":"#cccccc","settings.dropdownBackground":"#313131","settings.dropdownBorder":"#3c3c3c","settings.headerForeground":"#ffffff","settings.modifiedItemIndicator":"#bb800966","sideBar.background":"#181818","sideBar.border":"#2b2b2b","sideBar.foreground":"#cccccc","sideBarSectionHeader.background":"#181818","sideBarSectionHeader.border":"#2b2b2b","sideBarSectionHeader.foreground":"#cccccc","sideBarTitle.foreground":"#cccccc","statusBar.background":"#181818","statusBar.border":"#2b2b2b","statusBar.debuggingBackground":"#0078d4","statusBar.debuggingForeground":"#ffffff","statusBar.focusBorder":"#0078d4","statusBar.foreground":"#cccccc","statusBar.noFolderBackground":"#1f1f1f","statusBarItem.focusBorder":"#0078d4","statusBarItem.prominentBackground":"#6e768166","statusBarItem.remoteBackground":"#0078d4","statusBarItem.remoteForeground":"#ffffff","tab.activeBackground":"#1f1f1f","tab.activeBorder":"#1f1f1f","tab.activeBorderTop":"#0078d4","tab.activeForeground":"#ffffff","tab.border":"#2b2b2b","tab.hoverBackground":"#1f1f1f","tab.inactiveBackground":"#181818","tab.inactiveForeground":"#9d9d9d","tab.lastPinnedBorder":"#cccccc33","tab.selectedBackground":"#222222","tab.selectedBorderTop":"#6caddf","tab.selectedForeground":"#ffffffa0","tab.unfocusedActiveBorder":"#1f1f1f","tab.unfocusedActiveBorderTop":"#2b2b2b","tab.unfocusedHoverBackground":"#1f1f1f","terminal.foreground":"#cccccc","terminal.inactiveSelectionBackground":"#3a3d41","terminal.tab.activeBorder":"#0078d4","textBlockQuote.background":"#2b2b2b","textBlockQuote.border":"#616161","textCodeBlock.background":"#2b2b2b","textLink.activeForeground":"#4daafc","textLink.foreground":"#4daafc","textPreformat.background":"#3c3c3c","textPreformat.foreground":"#d0d0d0","textSeparator.foreground":"#21262d","titleBar.activeBackground":"#181818","titleBar.activeForeground":"#cccccc","titleBar.border":"#2b2b2b","titleBar.inactiveBackground":"#1f1f1f","titleBar.inactiveForeground":"#9d9d9d","welcomePage.progress.foreground":"#0078d4","welcomePage.tileBackground":"#2b2b2b","widget.border":"#313131"}});const l=(e,t)=>({triggerCharacters:e,provideCompletionItems:function(e,n,i){const a=e.getValueInRange({startLineNumber:n.lineNumber,startColumn:1,endLineNumber:n.lineNumber,endColumn:n.column});switch(i.triggerCharacter){case'"':case"'":case"/":{let e=null!==a.match(/\brequire\b/);if("yue"===t&&(e=e||null!==a.match(/\bimport\b/)),e=e||null!==a.match(/\bSprite\b/),e=e||null!==a.match(/\bLabel\b/),!e)return{suggestions:[]};break}}const s=e.getWordUntilPosition(n),l={startLineNumber:n.lineNumber,endLineNumber:n.lineNumber,startColumn:s.startColumn,endColumn:s.endColumn};let c;if("yue"===t){c=n.lineNumber>1?e.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:n.lineNumber-1,endColumn:e.getLineLastNonWhitespaceColumn(n.lineNumber-1)}):"";let t="";const o=e.getLineFirstNonWhitespaceColumn(n.lineNumber);o>0&&(t=e.getValueInRange({startLineNumber:n.lineNumber,startColumn:1,endLineNumber:n.lineNumber,endColumn:o})),a.match(/\W[.\\]$/g)?c+="\n"+t+".___DUMMY_CALL___()\n":c+="\n"+t+"print()\n",c+=e.getValueInRange({startLineNumber:n.lineNumber+1,startColumn:1,endLineNumber:e.getLineCount(),endColumn:e.getLineLastNonWhitespaceColumn(e.getLineCount())})}else c="xml"===t?e.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:n.lineNumber,endColumn:n.column}):e.getValue();return r.My({lang:t,line:a,file:e.uri.path,row:n.lineNumber,content:c}).then(e=>e.success?void 0===e.suggestions?{suggestions:[]}:{suggestions:e.suggestions.map(e=>{const[n,i,r]=e;let a=o.languages.CompletionItemKind.Variable;switch(r){case"variable":a=o.languages.CompletionItemKind.Variable;break;case"function":a=o.languages.CompletionItemKind.Function;break;case"method":a=o.languages.CompletionItemKind.Method;break;case"field":a=o.languages.CompletionItemKind.Field;break;case"keyword":a=o.languages.CompletionItemKind.Keyword}return"xml"===t?{label:n,kind:a,insertText:i,insertTextRules:o.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:l}:{label:n,kind:a,document:i,detail:i,insertText:n,range:l}})}:{suggestions:[]}).catch(e=>{console.error("failed to complete codes, due to: ".concat(e))})}}),c=e=>({provideHover:function(t,n){const i=t.getWordAtPosition(n);if(null===i)return{contents:[]};const s=t.getValueInRange({startLineNumber:n.lineNumber,startColumn:1,endLineNumber:n.lineNumber,endColumn:i.endColumn});return r.xP({lang:e,line:s,file:t.uri.path,row:n.lineNumber,content:t.getValue()}).then(function(e){if(!e.success)return{contents:[]};if(void 0===e.infered)return{contents:[]};const t="polymorphic function (with types ";let r=e.infered.desc;if("<invalid type>"===r||"<unknown type>"===r)return{contents:[]};if(r.startsWith(t)){r=r.substring(33),r=r.substring(0,r.length-1);r=(a.A.locale.match(/^zh/)?"\u591a\u91cd\u5b9a\u4e49":"Polymorphic")+":\n"+r.split(" and ").join("\n"),e.infered.desc=r}const s=[{value:"```tl\n"+e.infered.desc+"\n```"}];return void 0!==e.infered.doc&&s.push({value:e.infered.doc}),0!==e.infered.row&&0!==e.infered.col?(""===e.infered.file&&(e.infered.file="current file"),s.push({value:"".concat(e.infered.file,":").concat(e.infered.row,":").concat(e.infered.col)})):s.push({value:"Lua built-in"}),{range:new o.Range(n.lineNumber,i.startColumn,n.lineNumber,i.endColumn),contents:s}}).catch(e=>{console.error("failed to infer codes, due to: ".concat(e))})}}),d=(e,t)=>({signatureHelpTriggerCharacters:e,provideSignatureHelp(e,n,o,i){var a,s;let l=null!==(a=null===(s=i.activeSignatureHelp)||void 0===s?void 0:s.activeSignature)&&void 0!==a?a:0,c=0;let d=e.getValueInRange({startLineNumber:n.lineNumber,startColumn:1,endLineNumber:n.lineNumber,endColumn:n.column});for(;;){const e=d.replace(/\([^()]*\)/g,"");if(e===d)break;d=e}let u=d,p="";switch(t){case"lua":case"tl":{const t=d.lastIndexOf("(");if(u=d.substring(0,t),t>=0)for(let e=t;e<d.length;e++)","===d.at(e)&&c++;p=e.getValue();break}case"yue":{d=d.replace(/\s*,\s*/g,",");const t=Math.max(d.lastIndexOf(" "),d.lastIndexOf("("));if(u=d.substring(0,t),t>=0)for(let e=t;e<d.length;e++)","===d.at(e)&&c++;p=n.lineNumber>1?e.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:n.lineNumber-1,endColumn:e.getLineLastNonWhitespaceColumn(n.lineNumber-1)}):"";let o="";const i=e.getLineFirstNonWhitespaceColumn(n.lineNumber);i>0&&(o=e.getValueInRange({startLineNumber:n.lineNumber,startColumn:1,endLineNumber:n.lineNumber,endColumn:i})),u.match(/\W[.\\][^.\\]+$/g)?p+="\n"+o+".___DUMMY_CALL___()\n":p+="\n"+o+"print()\n",p+=e.getValueInRange({startLineNumber:n.lineNumber+1,startColumn:1,endLineNumber:e.getLineCount(),endColumn:e.getLineLastNonWhitespaceColumn(e.getLineCount())});break}}return r.vl({lang:t,line:u,file:e.uri.path,row:n.lineNumber,content:p}).then(e=>{var t;if(!e.success)return null;if(void 0===e.signatures)return null;const n=e.signatures.map(e=>{var t;return{label:e.desc,documentation:{value:e.doc},parameters:(null!==(t=e.params)&&void 0!==t?t:[]).map(e=>({label:e.name,documentation:{value:e.desc}}))}});if((l>=n.length||n[l].label!==(null===(t=i.activeSignatureHelp)||void 0===t?void 0:t.signatures[l].label))&&(l=0),n[l].parameters.length<=c)for(let o=0;o<n.length;o++)if(n[o].parameters.length>c){l=o;break}return{dispose:()=>{},value:{signatures:n,activeSignature:l,activeParameter:c}}})}}),u={provideCodeActions(e,t,n){if("quickfix"!==n.only)return;const o=n.markers.find(e=>e.message.startsWith("unknown variable:"));if(void 0===o)return;const i=o.message.replace("unknown variable: ",""),r=a.A.locale.match(/^zh/)?"\u5bfc\u5165\u6a21\u5757":"Require";return{actions:[{title:"".concat(r," ").concat(i),edit:{edits:[{resource:e.uri,textEdit:{text:"local ".concat(i,' <const> = require("').concat(i,'")\n'),range:{startLineNumber:1,startColumn:0,endLineNumber:1,endColumn:0}}}]},isPreferred:!0,kind:"quickfix"}],dispose(){}}}};o.languages.register({id:"tl"}),o.languages.setLanguageConfiguration("tl",{comments:{lineComment:"--",blockComment:["--[[","]]"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]}),o.languages.setMonarchTokensProvider("tl",{defaultToken:"",tokenPostfix:".tl",keywords:["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","record","as","is","type","embed","enum","const"],types:["boolean","number","integer","string","table","thread","any","userdata"],brackets:[{token:"delimiter.bracket",open:"{",close:"}"},{token:"delimiter.array",open:"[",close:"]"},{token:"delimiter.parenthesis",open:"(",close:")"}],operators:["+","-","*","/","%","^","#","==","~=","<=",">=","<",">","=",";",":",",",".","?","?:","..","...",">:"],builtins:["assert","collectgarbage","dofile","error","next","print","rawget","rawset","tonumber","tostring","type","_ENV","_VERSION","_G","getfenv","getmetatable","ipairs","loadfile","loadstring","pairs","pcall","rawequal","require","setfenv","setmetatable","unpack","xpcall","load","module","select","package.cpath","package.loaded","package.loadlib","package.path","package.preload","package.seeall","package","coroutine.running","coroutine.create","coroutine.resume","coroutine.status","coroutine.wrap","coroutine.yield","coroutine","string.byte","string.char","string.dump","string.find","string.len","string.lower","string.rep","string.sub","string.upper","string.format","string.gsub","string.gmatch","string.match","string.reverse","string","table.maxn","table.concat","table.sort","table.insert","table.remove","table","math.abs","math.acos","math.asin","math.atan","math.atan2","math.ceil","math.sin","math.cos","math.tan","math.deg","math.exp","math.floor","math.log","math.log10","math.max","math.min","math.fmod","math.modf","math.cosh","math.sinh","math.tanh","math.pow","math.rad","math.sqrt","math.frexp","math.ldexp","math.random","math.randomseed","math.pi","math","io.stdin","io.stdout","io.stderr","io.close","io.flush","io.input","io.lines","io.open","io.output","io.popen","io.read","io.tmpfile","io.type","io.write","io","os.clock","os.date","os.difftime","os.execute","os.exit","os.getenv","os.remove","os.rename","os.setlocale","os.time","os.tmpname","os","debug.debug","debug.gethook","debug.getinfo","debug.getlocal","debug.getupvalue","debug.setlocal","debug.setupvalue","debug.sethook","debug.traceback","debug.getfenv","debug.getmetatable","debug.getregistry","debug.setfenv","debug.setmetatable","debug"],symbols:/[><!~?:&|+\-*\/\^%\.]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/[A-Z][\w\$]*/,"type.identifier"],[/[a-zA-Z_][\w\.$]*/,{cases:{"@keywords":{token:"keyword.$0"},"@types":"type.identifier","@builtins":"self.call","@default":"identifier"}}],[/<\s*(close|const|total)\s*>/,"operator"],{include:"@whitespace"},[/[{}()\[\]]/,"@brackets"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F_]*[0-9a-fA-F]/,"number.hex"],[/\d+?/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/"/,"string",'@string."'],[/'/,"string","@string.'"]],whitespace:[[/[ \t\r\n]+/,""],[/\[([=]*)\[/,"comment","@comment.$1"],[/--\[([=]*)\[/,"comment","@comment.$1"],[/--.*$/,"comment"]],comment:[[/[^\]]+/,"comment"],[/\]([=]*)\]/,{cases:{"$1==$S2":{token:"comment",next:"@pop"},"@default":"comment"}}],[/./,"comment"]],string:[[/[^\\"']+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/["']/,{cases:{"$#==$S2":{token:"string",next:"@pop"},"@default":"string"}}]]}});const p=l([".",":",'"',"'","/"],"tl");o.languages.registerCompletionItemProvider("tl",p),o.languages.registerHoverProvider("tl",c("tl")),o.languages.registerSignatureHelpProvider("tl",d(["(",","],"tl")),o.languages.registerCodeActionProvider("tl",u);const g=l([".",":",'"',"'","/"],"lua");o.languages.setLanguageConfiguration("lua",{comments:{lineComment:"--",blockComment:["--[[","]]"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]}),o.languages.setMonarchTokensProvider("lua",{defaultToken:"",tokenPostfix:".lua",keywords:["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while"],brackets:[{token:"delimiter.bracket",open:"{",close:"}"},{token:"delimiter.array",open:"[",close:"]"},{token:"delimiter.parenthesis",open:"(",close:")"}],operators:["+","-","*","/","%","^","#","==","~=","<=",">=","<",">","=",";",":",",",".","?","?:","..","..."],builtins:["assert","collectgarbage","dofile","error","next","print","rawget","rawset","tonumber","tostring","type","_ENV","_VERSION","_G","getfenv","getmetatable","ipairs","loadfile","loadstring","pairs","pcall","rawequal","require","setfenv","setmetatable","unpack","xpcall","load","module","select","package.cpath","package.loaded","package.loadlib","package.path","package.preload","package.seeall","package","coroutine.running","coroutine.create","coroutine.resume","coroutine.status","coroutine.wrap","coroutine.yield","coroutine","string.byte","string.char","string.dump","string.find","string.len","string.lower","string.rep","string.sub","string.upper","string.format","string.gsub","string.gmatch","string.match","string.reverse","string","table.maxn","table.concat","table.sort","table.insert","table.remove","table","math.abs","math.acos","math.asin","math.atan","math.atan2","math.ceil","math.sin","math.cos","math.tan","math.deg","math.exp","math.floor","math.log","math.log10","math.max","math.min","math.fmod","math.modf","math.cosh","math.sinh","math.tanh","math.pow","math.rad","math.sqrt","math.frexp","math.ldexp","math.random","math.randomseed","math.pi","math","io.stdin","io.stdout","io.stderr","io.close","io.flush","io.input","io.lines","io.open","io.output","io.popen","io.read","io.tmpfile","io.type","io.write","io","os.clock","os.date","os.difftime","os.execute","os.exit","os.getenv","os.remove","os.rename","os.setlocale","os.time","os.tmpname","os","debug.debug","debug.gethook","debug.getinfo","debug.getlocal","debug.getupvalue","debug.setlocal","debug.setupvalue","debug.sethook","debug.traceback","debug.getfenv","debug.getmetatable","debug.getregistry","debug.setfenv","debug.setmetatable","debug"],symbols:/[><!~?:&|+\-*\/\^%\.]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/[A-Z][\w\$]*/,"type.identifier"],[/[a-zA-Z_][\w\.$]*/,{cases:{"@keywords":{token:"keyword.$0"},"@builtins":"self.call","@default":"identifier"}}],{include:"@whitespace"},[/<\s*(const|close)\s*>/,"operator"],[/[{}()\[\]]/,"@brackets"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F_]*[0-9a-fA-F]/,"number.hex"],[/\d+?/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/"/,"string",'@string."'],[/'/,"string","@string.'"]],whitespace:[[/[ \t\r\n]+/,""],[/\[([=]*)\[/,"comment","@comment.$1"],[/--\[([=]*)\[/,"comment","@comment.$1"],[/--.*$/,"comment"]],comment:[[/[^\]]+/,"comment"],[/\]([=]*)\]/,{cases:{"$1==$S2":{token:"comment",next:"@pop"},"@default":"comment"}}],[/./,"comment"]],string:[[/[^\\"']+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/["']/,{cases:{"$#==$S2":{token:"string",next:"@pop"},"@default":"string"}}]]}}),o.languages.registerCompletionItemProvider("lua",g),o.languages.registerHoverProvider("lua",c("lua")),o.languages.registerSignatureHelpProvider("lua",d(["(",","],"lua")),o.languages.register({id:"yue"}),o.languages.setLanguageConfiguration("yue",i),o.languages.setMonarchTokensProvider("yue",{defaultToken:"",ignoreCase:!1,tokenPostfix:".yue",brackets:[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"}],keywords:["and","break","do","else","elseif","false","for","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","as","class","continue","export","extends","from","global","import","macro","switch","try","unless","using","when","with"],builtins:["assert","collectgarbage","dofile","error","next","print","rawget","rawset","tonumber","tostring","type","_ENV","_VERSION","_G","getfenv","getmetatable","ipairs","loadfile","loadstring","pairs","pcall","rawequal","require","setfenv","setmetatable","unpack","xpcall","load","module","select","package.cpath","package.loaded","package.loadlib","package.path","package.preload","package.seeall","package","coroutine.running","coroutine.create","coroutine.resume","coroutine.status","coroutine.wrap","coroutine.yield","coroutine","string.byte","string.char","string.dump","string.find","string.len","string.lower","string.rep","string.sub","string.upper","string.format","string.gsub","string.gmatch","string.match","string.reverse","string","table.maxn","table.concat","table.sort","table.insert","table.remove","table","math.abs","math.acos","math.asin","math.atan","math.atan2","math.ceil","math.sin","math.cos","math.tan","math.deg","math.exp","math.floor","math.log","math.log10","math.max","math.min","math.fmod","math.modf","math.cosh","math.sinh","math.tanh","math.pow","math.rad","math.sqrt","math.frexp","math.ldexp","math.random","math.randomseed","math.pi","math","io.stdin","io.stdout","io.stderr","io.close","io.flush","io.input","io.lines","io.open","io.output","io.popen","io.read","io.tmpfile","io.type","io.write","io","os.clock","os.date","os.difftime","os.execute","os.exit","os.getenv","os.remove","os.rename","os.setlocale","os.time","os.tmpname","os","debug.debug","debug.gethook","debug.getinfo","debug.getlocal","debug.getupvalue","debug.setlocal","debug.setupvalue","debug.sethook","debug.traceback","debug.getfenv","debug.getmetatable","debug.getregistry","debug.setfenv","debug.setmetatable","debug"],invalid:["function","end"],symbols:/==|~=|!=|=>|<=|[><!~?&%|+\-*\/\^\.\:@]=?/,escapes:/\\(?:[abfnrtv\\"'$]|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/[a-z_$][\w\.$]*/,{cases:{self:"variable.predefined","@builtins":"self.call","@keywords":{token:"keyword.$0"},"@invalid":"invalid","@default":""}}],[/[A-Z][\w\$]*/,"type.identifier"],{include:"@whitespace"},[/}/,{cases:{"$S2==interpolatedstring":{token:"string",next:"@pop"},"@default":"@brackets"}}],[/\\[\w]+/,"self.call"],[/[{}()\[\]]/,"@brackets"],[/@symbols/,"operator"],[/\d[\d_]*[eE]([\-+]?\d[\d_]*)?/,"number.float"],[/\d[\d_]*\.\d[\d_]*([eE][\-+]?\d[\d_]*)?/,"number.float"],[/0[xX][0-9a-fA-F][0-9a-fA-F_]*/,"number.hex"],[/\d[\d_]*/,"number"],[/[,.]/,"delimiter"],[/"/,{cases:{"@default":{token:"string",next:'@string."'}}}],[/'/,{cases:{"@eos":"string","@default":{token:"string",next:"@string.'"}}}]],string:[[/[^\\"'\#]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/#{/,{cases:{'$S2=="':{token:"string",next:"root.interpolatedstring"},"@default":"string"}}],[/["']/,{cases:{"$#==$S2":{token:"string",next:"@pop"},"@default":"string"}}],[/#/,"string"]],whitespace:[[/[ \t\r\n]+/,""],[/\[([=]*)\[/,"comment","@comment.$1"],[/--\[\[/,"comment","@comment.$1"],[/--.*$/,"comment"]],comment:[[/[^\]]+/,"comment"],[/\]([=]*)\]/,{cases:{"$1==$S2":{token:"comment",next:"@pop"},"@default":"comment"}}],[/./,"comment"]]}});const h=l([".","\\","/",'"',"'"],"yue");o.languages.registerCompletionItemProvider("yue",h),o.languages.registerHoverProvider("yue",c("yue")),o.languages.registerSignatureHelpProvider("yue",d(["(",","," "],"yue"));const m=l([">","<","/"," ","\t","=","\n"],"xml");o.languages.registerCompletionItemProvider("xml",m),o.editor.onDidCreateEditor(e=>{e.onDidChangeModel(()=>{e.updateOptions({readOnly:!0})})}),o.languages.register({id:"wa"}),o.languages.setLanguageConfiguration("wa",{brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"',notIn:["string","comment"]},{open:"'",close:"'",notIn:["string","comment"]}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]}),o.languages.setMonarchTokensProvider("wa",{defaultToken:"",tokenPostfix:".wa",ignoreCase:!1,keywords:["break","defer","import","struct","case","else","interface","switch","const","for","map","type","continue","func","range","default","global","if","return","make","true","false"],typeKeywords:["bool","string","error","map","int","int8","int16","int32","int64","i8","i16","i32","i64","rune","uint","uint8","uint16","uint32","uint64","u8","u16","u32","u64","uintptr","byte","float32","float64","f32","f64","complex64","complex128","c64","c128"],operators:["==","!=","<=",">=","<",">","+","-","*","/","%","++","--","!","&&","||",":=","=>","=","<<",">>","&","^","|"],symbols:/==|!=|<=|>=|<|>|\+\+|--|:=|=>|&&|\|\||<<|>>|[+\-*/%&^|=!]/,escapes:/\\(?:[nrt"'\\]|x[0-9A-Fa-f]{2}|u\{[0-9A-Fa-f]+\})/,tokenizer:{root:[{include:"@whitespace"},[/\/\/.*$/,"comment"],[/\/\*/,"comment","@comment"],[/\bfunc\b\s*/,{token:"keyword",next:"@functionDecl"}],[/\bconst\b/,"keyword"],[/((?<!\.)[A-Za-z_][\w]+)(?=\s*\()/,"self.call"],[/((?<!\.)[A-Z][\w]+)/,"type.identifier"],[/\./,"operator"],[/((?<!\bfunc\s)[A-Za-z_][\w]*)(?=\s*\()/,"self.call"],[/[A-Za-z_][\w]*/,{cases:{"@keywords":"keyword","@typeKeywords":"type"}}],[/[A-Z][\w]*/,"type.identifier"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,{token:"string.quote",next:"@string_double"}],[/'([^'\\]|\\.)*$/,"string.invalid"],[/'/,{token:"string.quote",next:"@string_single"}],[/\b0b[01_]+\b/,"number.binary"],[/\b0o[0-7_]+\b/,"number.octal"],[/\b0x[0-9A-Fa-f_]+\b/,"number.hex"],[/\d[\d_]*(\.[\d_]*)?([eE][+-]?[\d_]+)?/,"number.float"],[/\d[\d_]*/,"number"],[/[A-Za-z_][\w]*/,{cases:{"@default":"identifier"}}],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],[/[{}()[\]]/,"@brackets"],[/[,.;]/,"delimiter"]],functionDecl:[[/[a-z_][\w]*/,"","@functionParams"],[/[A-Z][\w]*/,"","@functionParams"],[/\(/,"delimiter.parenthesis","@paramList"],["","","@pop"]],functionParams:[[/\(/,"delimiter.parenthesis","@paramList"],["","","@pop"]],paramList:[[/[A-Z][\w]*/,"type.identifier"],[/[a-z_][\w]*\s*\./,""],[/[a-z_][\w]*/,{cases:{"@typeKeywords":"type.identifier","@default":"variable.parameter"}}],[/:/,"delimiter"],[/,/,"delimiter"],[/@symbols/,"operator"],[/\)/,"delimiter.parenthesis","@pop"],[/[ \t\r\n]+/,""]],comment:[[/[^*]+/,"comment"],[/\*\//,"comment","@pop"],[/[/*]/,"comment"]],string_double:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,{token:"string.quote",next:"@pop"}]],string_single:[[/[^\\']+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/'/,{token:"string.quote",next:"@pop"}]],whitespace:[[/[ \t\r\n]+/,"white"]]}}),o.languages.register({id:"yarn"}),o.languages.setLanguageConfiguration("yarn",{comments:{lineComment:"//"},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'}]}),o.languages.setMonarchTokensProvider("yarn",{defaultToken:"",tokenPostfix:".yarn",keywords:["title","tags","position","colorID"],brackets:[{token:"delimiter.bracket",open:"{",close:"}"},{token:"delimiter.array",open:"[",close:"]"},{token:"delimiter.parenthesis",open:"(",close:")"}],operators:["==","!=","<=",">=","<",">","+","-","*","/","%","=","!"],symbols:/[><!~?:&|+\-*\/\^%\.]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/^title:\s*/,"keyword","@nodeHeader"],[/^tags:\s*/,"keyword","@nodeHeader"],[/^position:\s*/,"keyword","@nodeHeader"],[/^colorID:\s*/,"keyword","@nodeHeader"],[/^---\s*$/,"delimiter"],[/^===\s*$/,"delimiter"],[/<<(\w+)/,{token:"keyword.control",next:"@command"}],[/\[\[/,"keyword.control","@shortcut"],[/->/,"operator"],[/\$[a-zA-Z_][\w\$]*/,"variable"],[/[a-zA-Z_][\w\$]*/,"identifier"],{include:"@whitespace"},[/[{}()\[\]]/,"@brackets"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F_]*[0-9a-fA-F]/,"number.hex"],[/\d+?/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,"string",'@string."']],nodeHeader:[[/\S+/,"string","@pop"]],command:[[/\w+/,"keyword.control"],[/[^>]+/,"string"],[/>>/,{token:"keyword.control",next:"@pop"}]],shortcut:[[/[^\]]+/,"string"],[/\]\]/,{token:"keyword.control",next:"@pop"}]],whitespace:[[/[ \t\r\n]+/,""],[/\/\/.*$/,"comment"]],string:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,{cases:{"$#==$S2":{token:"string",next:"@pop"},"@default":"string"}}]]}});const f="dora-dark"},8143:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Vt});var o=n(89379),i=n(9950),r=n(27321),a=n(15209),s=n(82161),l=n(5332),c=n(71500),d=n(3585),u=n(49702),p=n(35023),g=n(42976),h=n(10614),m=n(61106),f=n(50861),y=n(38310),b=n(42935),A=n(72350),k=n(21642),v=n(69945),x=n(81608),w=n(29067);const C=n.p+"static/media/lua.c0c4698d9d5e5850e917.png",j=n.p+"static/media/yuescript.0fcbcaecb31b4bef4816.png",M=n.p+"static/media/teal.8c9fafc40e0507aaf61c.png",S="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAABCFBMVEUAAAAwcL8wdsYwesUyeMQyd8YxecYxeMYxd8UxeMYxeMUwd8Mwd8cyeMcweccwdcQyeMUyeMcxd8Uwd78xeMQyd8YzesUxd8YwdsYwdb8weMQweMQwd8UxecUweMcwe8UwecQwd8Qwd8VLiM1YkdB+qtuYu+KxzOq+1e3L3fHl7vjy9/v///9yodhlmdQ+gMrY5fWlw+eLs99Kic1+qtyYu+NyothKiM1Lic1XktClxOZ+q9vm7vfZ5vTM3fC/1eylw+ZxothkmtTY5vSyzOmYvOKyzOpXkdFYktC/1O6Ls96yzemLtN6/1e0weMUwdsIweMYwdcowcM8weMYwecYweMYwd8Ywd8WUT++ZAAAAWHRSTlMAEFBvkK/P3+//v0Agn18wn3/PIKCPb+9wMGCQgM+fT3CQsP////////////////////////////////////////////////////////+/UKAwEJDP36/P817qwgAACx1JREFUeAHs2dVh5UAMhWEZZc1l8244/fcYegkz5/xfCQNCe6ksL8qq9ibwozWeUlksMvtIy2LlgV/Fq/XGPsSi9MCv5NuFvVO2a+MXg687e7tN38Rvh21nb9Ol0MUTyIYQxhMYm8Af4mvx6I/U8f21TTPZX9xgL9HVgT/KO3tW5wHhF/CvCfxh04b75wVw/7yAh3Xcv4Cpo/6jEnyQByTUmT1kCChPhMaQgZkCkELwjhRCkOyO/yEFs3YHiCmzm/pQRifQhRx02gEASTwAYKMdALBHAKARUJ4BYF97C4gDu7IIUVhol4DY084AcLuwCVlY0gOwE6xCFg61SwC4WRbCkNkihOHIjkMYZjsJYdizFMJwqv0AcGAewuDWhDBMFtLO2aUDAQAAAAAg/9dGaNAAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzTAAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA0wQAM0QAM0QAM0QAM0QAM0QAM0QAM0QAM0QNi5r8XGcSQKw968dbk5x5ZFsXBMyIS0QwXTEi1Pnnn/x9nR5rxuAgwlnP+ur/E1CqBoJu7d4v5+WRSrUlUd/pZ+VVmWRbFc3j9UC08At5Zf3C+LteKtabl6rKvFDQBg7x7qlaJn69XyYUEAZqvqlSI6Vz4+BGsA2KIuHdKlxSbYBAB7SWy+enRInxYPBgAQQFU4DNZqE+YMgAAWW4eBKzd+pgAI4A8lRqnw8wNAAH7rMFYfEMCApV9+AjBVxPLnCYAAtg7IFgABVApkC4AAmhWQLwACqB3yBUAATQnkC4AAKoeMARDAFsgXAAH4FTIGQACNImMABNAoMgZAADuHjAEQwM4hYwAE0DhkDIAAGkXGAAigUeQMgADWyBkAAeyRMwACqJEzAAJoXNYACECRMwAC2CJnAATQgACyBqAEkDWAAwggawBKAFkD2IIAcgbQKAFkDWCLtB2PT+2fOx4NACAARZrc86k+By//lA/deXlqnwhg+oa8AjydzkH+Z7vzqXUzBEAAL4itrb28rd3hovMCQAAN4nKvXt6r5vDs5gOAAD5ETG0nfeouSgCjl/4IqGe5FmHALoAQV4f3rg2RyX/qI/Rv7yWq88UwgMiaHgBkiJbom3YSXXPQaQEQQImeaZAkHZ4mBEAAHj1be0lV104GgAAq9Eu9JKxrJwJAAMuI/T9lB50EAAGU6NVGknfQCQAQgKJPhQxQcyGA0QF49CrIIB2UAEYGUMVsAOlrPAGMC+CMPn0s00UA018CVG4FAAHs4ycAAVgG8Al6VN8MAAIo0aPzzQAggCN61N0GAAIgAAJwBJA3APAMQAC8BRAAnwMQAJ8EEsCb67IGwFsATlkD4HMAOE8AWQPAPmMA/C3g2i5fAPw18Jr6fAHwfYBrxU0AIIBP0bftLQAggAPsCyCAiD6CfQEEEJGHfQEEENMREa08AVgHcEFMGgjAOIBPEVdNALYBfITIykAAlgGIQ2SuJgDLAC6ITgMB2AVwQIKKQABWAXgkaRsIwCYAKZEk3RCATQCfArYJEEBc3iEdgUAA5gDIHunSbSAAawA6xDT9jYAAYiuRtqIiAFMAOqSu3Mh4EUD6LcDUeZAAouswRMVC0kYABraACSYBAcS3w0BpEQjAAADZY7CKav4ACMArrhmYBAQw7jnQwM8EBJCkPYwSIAADQyA9AQJIXuNgkwABJOoAmCRAAKl6hUkCBJCszzBCWs0VAAFIiTEqwkwBEIB/wShtvcRHAIYFxB8FCMC2gPg5QADGBbhaIiIA43eB+E2AACw+D4g/CRDACNUYq+0cARCA7BQjpWGGAAhAmpfRBOwkMgKwfRBAPUcABCCdGjkIEMBANReM1F5iIoDBOijGqZglAAKQZo9xWnnpHQEMWaOz3wMIwNQciBBAANPUvM77JEgAN3If2BJAPADTBDYEEA/AMgEXCCAegGUC6qVHBDAiAZ3+IEgAU9YchiXQxQEggBE6tNMPAQKwPwnihwABTNjhafohQACT1l0wSKUNAAQg0nyuE24BBGB/EsRvAQRgfxLEbwEEMG3NxU24BRDADT4d6uIBEIDlt0ZWMQAIwD4B52MAEIB9AnUMAAKwT6C0CYAAROo0BLxRAAQgzWW4GUAAJmp0qBlAAEZ6RWzOMgACkEaHfBZEABlsArVtAAQgZx3sD8UIIIMxoNYBEEDkZ4a8dQAEID5GwMcxAAjAvoD7GAAEYF9AHQOAAOyfBE8EcAsApEt5DyQAg+3Rr5YAbgOA13QPAgjAYl3eAAhANG8ABLBErwjgVgD4vAEQgLzkDYAALnkDIIBP8wZAAOe8ARBAhR45AhgFgA8zBaAEMAqAxp2zBkAAwHaWZ4CWAMYCgFWY8BYwPQACgO5kyD6c+fsABDDwGFD0aEkAYwKABhmqjwy8FEoAwHZWEwAdAYwMABrm9F7oBwQwNgBgPwSBLfrkhADGBwDdSOoa9KqdAgABAFrN4oUwnKYBQABAGebwVvhmKgAEABTVtAeAax9PB4AAgPJBkrS3+Y0gAgB04yW2pkTfvpgYAAEAWiwkqrND7zZTAyCAa+tNkL7tSkQUCGAGAK6V/QxUHyKmFyGAeQC4tn6s5L3yVXk7XwsngGtuVVdvXv1Hh9gCAcwLwDVXPj4s/t/i16VDfK0QwPwA/Ln16rF+qN7JP+ffVffLQpGoDQGMC6BHTrX8c2tVpE1legAEMGGbrAEQgErWAAhgkzUAAlDJGgABbLIGQACtZA2AAELWAAjgVXIGQAAqOQMgABeyBkAAteQMgAD2kjMAAlhLzgAIQEPOAAhAg2QMgAA0SMYACMDtJGMABKBBMgZAABokYwAEsA6SMQAC+MxLxgAIoBbJFwAB6E4yBkAAey/5AiAA7USyBUAA7tXLxAAIwLeYqlWQ6Aggvm4aAm0n8RFAkpqL5eUngAQ1n6vZ5SeANHUXY0c/AkidP7Rj/Of3Eh8BDGbg2WG42trLAN19lwAS1p3aQXb+gVZf5Cd33yGAtPnUCNpT52WovnP3fQIYoK6+PCG+43PdeRmyL+++JQPFduflc18G7ulSn70M3pd3vxM2aLuuXj63x7ev/POpPgcZqV/c/VbYKPldd6iXp8tz2x6PR/f3Ff/qX0/t8+W0PBy64P/Yjl0dxhZDMRTVg8TW+AS/hqmfYeq/kjAzw5VWCcZt82vVMaEwK/hDYfYHSJRlCcCUsmwIKFeg7QIImqwZIBwBlnBqQBPVxalCE1Vw5pAmKeFcmyZpF+f+ZJqiAKCbgdbFpT2aoMCVGk1OF9eCpnkAuAJ8AEg+BCwFbqnTJP8ANDvQxrgrMk1GDtxTp8mo4wEDmogWHvLnkCYh4WGRaHIvQIegA/DaXmbFWd4DvAI8/14Bnn+XoPtPawXYduAlBqwka83xMvXMyrFcx4tFjRVj48BrNBNFefufiymrxbe/l4BPf70lYHkReLv43S1gy/Yc71Smib+SrRYFH2KvuU78VWzV/Rf4SPPybzEerzJ/NMurzXrxbzLHCx0DfqeTayolS0kAAAAASUVORK5CYII=",B="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIEAAACQCAMAAAAY9PhcAAACFlBMVEUAAADL0tpEh/iOsutChfRChPdChfMA//9DhfTR0dFDhfRChfTI0dvI0dxChfTI0NxChfQ9hvNChfRChfTI0NvI0dtChfRDhfRBhfXI0dtChfRDhfRChfRChfRJkv85jv8zmf9ChfRChvRChfXI0duqqv+/v7/I0dvG09zI0N3I0dtChfRChfRDhfREhPLI0dpDhvJChfVChfRChfRDhfTJ0dvI0dtHgPHI0NvI0NvMzMxBhvPJ0ttChPTI0NrI0dtDhvXI0dvH0tpChvTI0dpEiO5AhfNDhfTJ0NqAgP9Dh/VBhPRChfTI0dtChfTI0dtBhfVEg/NChfSUs+TGzdxChvRBhfVChfVChfNEh/VBhfNChfVEiPdDhfRChfRBhvNBhvTH0tpChfRBhvTMzN1ChvPI0dtChvVBiPRChfT///9ChvRBhPRChfRDhfRChPZChfRChfNChfRBhfRDhfRChfX///9ChfTI0dtDhfRFh/PBzdxUj/Cgu+PH0dvFz9yzxd+OsOZKifOcuOONr+aswuBhlu+6yt65yd5zoOueueN3o+qAqOjCzt2Equdvn+xYkfB+p+nF0NxHiPNEhvNjmO5gl+5UkPGuwuC/zNzEztyUtOVQjfFTjvCSs+asweFakvDH0NtJifNNi/J4pOqlvOJqm+y+y91NjPKbt+OPseXDztyFq+hSjvF8pumKree3x9+7yt63K7hiAAAAd3RSTlMAIiI/6x+vAaELb/nnispB9hX4/mL9iMtm5PcX+u0HCQXa1GTIAwT8OjzJ145cPIsT8/37uM6VEkbbBT9VWZmrfsyuYbUPLLRoAjWJ1vDwsWIp9TkkpkuW3TFWxB4u9FKkyne/D2n7qi/vAXig04YbYMXy4nMyAoRL2UUAAAJLSURBVHja7dn1b1NhFMbxh9GWdmxMgLniLsN1uMtwl+EU1/POh7sOd3f9D3mbjrQZrO2y3PsQdr6/v8knJze5yTloLqPC16tQ2tFL04Z25Q5KHRhEVOOy8sTmhiBSZVoEMMkj7a7etL2p/RBuaFexuT4D24y+CDXMAigzsA2HbYRHhDQDWxqAISK8GZjKIDIyqQIzAL2FK0iFT4T5HZg+GEyeQS6WkGfQH0KegVGBClSgAhWo4D8VGBWoQAUqUIEKVKACpuD1lzNnbzIFtRfsu/pnH3iCy+GXNVerWYIa09yPGySBifT8Hltg6j9+5Qpsn7+/4gpsP99UcQW2B3fJAlvdfbbANNAFRgUqUIEKVKACFahABSpQgQpU8O8Kbn8iC96+EKqg8R13g/H+2x1hChpOneZusupqGdu8yJX93HnORrPRhLt4qUo4gism1LXrTbzt/q2H5tHjJ9QLR/XTpo5+Y1GBClSgAhWoQAUqUIEKVNBBBCPJgp4oJQtSMJosGINksmAsvGVcwXjATxVMmAh405mCybBN6c4TlAcRahpNMD2AcDMzOYJZO/C7OXMJgpR5JxHVgoWLCtwULF7aI4A/yk+yLVsuiVSR1KLOthUrOyVYADFaJQlUWATnWi0JtAYOVrJW4la2Dk62XuLmh7NtkDilb4SzbdossUuG022J/afYCufLkhh1K4YLbZNW2z4brrRzVCuA3UVwqT3Z8pf25nSBa5Xs80iLCvbnw9WKcw5IVJ6Dh+B+3sP+I6VH845l+46fmA9H+gX5+eo/YF2fpQAAAABJRU5ErkJggg==",L=n.p+"static/media/spine.b91d9c4546d5aae49e9e.png";const P=n.p+"static/media/wa.370533e215a14d7277b884eadaa7c8cd.svg";var R=n(69705),N=n(47738),E=n(21950),I=n(77459),F=n(55030),D=n(84765),T=n(13450),Q=n(44414);const z=e=>{if(void 0!==e.data){const t=e.data;if(t.root)return(0,Q.jsx)(f.A,{sx:{width:14,height:14}});if(!t.dir)return null;if(void 0===t.children)return null}return e.expanded?(0,Q.jsx)(y.pAn,{}):(0,Q.jsx)(y.HBj,{})},W=e=>{if(void 0!==e.data){const t=e.data;if(t.dir)return e.expanded?(0,Q.jsx)(y.$gs,{}):(0,Q.jsx)(y.V9V,{});switch(D.A.path.extname(t.key).toLowerCase()){case".lua":return(0,Q.jsx)("img",{src:C,alt:"lua",width:"14px",height:"14px"});case".tl":return(0,Q.jsx)("img",{src:M,alt:"teal",width:"12px",height:"12px"});case".yue":return(0,Q.jsx)("img",{src:j,alt:"yue",width:"14px",height:"14px"});case".tsx":case".ts":return(0,Q.jsx)("img",{src:S,alt:"typescript",width:"12px",height:"12px"});case".xml":return(0,Q.jsx)(R.PyP,{size:14});case".db":return(0,Q.jsx)(N.RY4,{size:14});case".md":return(0,Q.jsx)(E.y5i,{size:14});case".png":case".jpg":return(0,Q.jsx)(v.fB4,{size:14});case".wasm":return(0,Q.jsx)(x.oTy,{size:12});case".skel":return(0,Q.jsx)("img",{src:L,alt:"spine",width:"14px",height:"14px"});case".yarn":return(0,Q.jsx)("img",{src:"yarn-editor/icon_96x96.png",alt:"yarn",width:"14px",height:"14px"});case".bl":return(0,Q.jsx)("img",{src:B,alt:"blockly",width:"12px",height:"12px"});case".vs":return(0,Q.jsx)(x.kDX,{size:12});case".zip":return(0,Q.jsx)(y.d$h,{color:"fac03d"});case".wa":return(0,Q.jsx)("img",{src:P,alt:"wa",width:"12px",height:"12px"});case".mod":return(0,Q.jsx)(y.rBU,{size:14})}}return(0,Q.jsx)(y.XTd,{})},V={motionName:"rc-node-motion",motionAppear:!1,onAppearStart:()=>({height:0}),onAppearActive:e=>({height:e.scrollHeight-25}),onLeaveStart:e=>({height:e.offsetHeight}),onLeaveActive:()=>({height:0})},O=(0,i.memo)(function(e){var t,n;const{treeData:o,expandedKeys:r,selectedKeys:a}=e,[s,l]=(0,i.useState)(null),[c,d]=(0,i.useState)(!1),{t:u}=(0,F.Bd)();const p=(t,n)=>{e.onMenuClick(t,n),d(!1)},f=s?D.A.path.extname(s.data.key).toLowerCase():"",v=null!==(t=null===s||void 0===s?void 0:s.data.root)&&void 0!==t&&t,x=null!==(n=null===s||void 0===s?void 0:s.data.builtin)&&void 0!==n&&n,C=v||!x||D.A.engineDev,j=!v&&!x||D.A.engineDev,M=!v&&!x||D.A.engineDev,S=v||!x,B=v||!x,L=!v||x||D.A.engineDev,P=!v&&!x,R=v||!x||D.A.engineDev,E=v||!x||D.A.engineDev,O=!v&&!x||D.A.engineDev,K=!v&&!x&&(".ts"===f||".tsx"===f)||D.A.engineDev;return(0,Q.jsxs)(I.K9,{skin:"dark",style:{color:T.Q1.Primary,fontSize:"14px",width:"calc(100% - 4px)",height:"100%"},children:[(0,Q.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n\t.rc-tree-child-tree {\n\t\tdisplay: block;\n\t}\n\t.rc-node-motion {\n\t\ttransition: all .3s;\n\t\toverflow-y: hidden;\n\t\toverflow-x: hidden;\n\t}\n"}}),(0,Q.jsxs)(g.j,{id:"dora-menu",anchorEl:null===s||void 0===s?void 0:s.target,keepMounted:!0,autoFocus:!1,open:c,onClose:()=>p("Cancel",null===s||void 0===s?void 0:s.data),slotProps:{transition:{onExited:()=>l(null)}},children:[C?(0,Q.jsxs)(g.m,{onClick:()=>p("New",null===s||void 0===s?void 0:s.data),children:[(0,Q.jsx)(h.A,{children:(0,Q.jsx)(y.wrv,{})}),(0,Q.jsx)(m.A,{primary:u("menu.new")}),(0,Q.jsx)("div",{style:{fontSize:10,color:T.Q1.TextSecondary},children:"Mod+Shift+N"})]}):null,j?(0,Q.jsxs)(g.m,{onClick:()=>p("Delete",null===s||void 0===s?void 0:s.data),children:[(0,Q.jsx)(h.A,{children:(0,Q.jsx)(y.op0,{})}),(0,Q.jsx)(m.A,{primary:u("menu.delete")}),(0,Q.jsx)("div",{style:{fontSize:10,color:T.Q1.TextSecondary},children:"Mod+Shift+D"})]}):null,M?(0,Q.jsxs)(g.m,{onClick:()=>p("Rename",null===s||void 0===s?void 0:s.data),children:[(0,Q.jsx)(h.A,{children:(0,Q.jsx)(y.dtF,{})}),(0,Q.jsx)(m.A,{primary:u("menu.rename")})]}):null,S?(0,Q.jsxs)(g.m,{onClick:()=>p("Upload",null===s||void 0===s?void 0:s.data),children:[(0,Q.jsx)(h.A,{children:(0,Q.jsx)(y.kaf,{})}),(0,Q.jsx)(m.A,{primary:u("menu.upload")})]}):null,B?(0,Q.jsxs)(g.m,{onClick:()=>p("Download",null===s||void 0===s?void 0:s.data),children:[(0,Q.jsx)(h.A,{children:(0,Q.jsx)(y.pfD,{})}),(0,Q.jsx)(m.A,{primary:u("menu.download")})]}):null,L?(0,Q.jsxs)(g.m,{onClick:()=>p("Copy Path",null===s||void 0===s?void 0:s.data),children:[(0,Q.jsx)(h.A,{children:(0,Q.jsx)(A.OBG,{})}),(0,Q.jsx)(m.A,{primary:u("menu.copyPath")})]}):null,P&&s&&".zip"===f?(0,Q.jsxs)(g.m,{onClick:()=>p("Unzip",null===s||void 0===s?void 0:s.data),children:[(0,Q.jsx)(h.A,{children:(0,Q.jsx)(y.$gs,{})}),(0,Q.jsx)(m.A,{primary:u("menu.extract")})]}):null,R&&s&&(""===D.A.path.extname(D.A.path.basename(s.data.key,f))&&(".yue"===f||".tl"===f||".ts"===f||".tsx"===f||".xml"===f||".wa"===f||".mod"===f)||s.data.dir)?(0,Q.jsxs)(g.m,{onClick:()=>p("Build",null===s||void 0===s?void 0:s.data),children:[(0,Q.jsx)(h.A,{children:(0,Q.jsx)(k.tus,{})}),(0,Q.jsx)(m.A,{primary:u("menu.build")})]}):null,K&&s?(0,Q.jsxs)(g.m,{onClick:()=>p("Declaration",s.data),children:[(0,Q.jsx)(h.A,{children:(0,Q.jsx)(b.xvH,{})}),(0,Q.jsx)(m.A,{primary:u("menu.declaration")})]}):null,E&&s&&s.data.dir?(0,Q.jsxs)(g.m,{onClick:()=>p("Obfuscate",null===s||void 0===s?void 0:s.data),children:[(0,Q.jsx)(h.A,{children:(0,Q.jsx)(N.MTU,{})}),(0,Q.jsx)(m.A,{primary:u("menu.obfuscate")})]}):null,O&&s&&""===D.A.path.extname(D.A.path.basename(s.data.key,f))&&(".yue"===f||".tl"===f||".ts"===f||".tsx"===f||".xml"===f)?(0,Q.jsxs)(g.m,{onClick:()=>p("View Compiled",null===s||void 0===s?void 0:s.data),children:[(0,Q.jsx)(h.A,{children:(0,Q.jsx)(k.oTw,{})}),(0,Q.jsx)(m.A,{primary:u("menu.viewCompiled",{lang:"Lua"})})]}):null]}),(0,Q.jsx)(w.Ay,{onRightClick:function(e){l({target:e.event.currentTarget,data:e.node}),d(!0)},showIcon:!0,showLine:!0,virtual:!0,icon:W,switcherIcon:z,motion:V,draggable:!0,onDrop:t=>{e.onDrop(t.dragNode,t.node)},expandedKeys:r,treeData:o,onSelect:(t,n)=>{e.onSelect(n.selectedNodes)},onExpand:t=>{e.onExpand(t.map(e=>e.toString()))},selectedKeys:a,dropIndicatorRender:()=>(0,Q.jsx)("div",{})})]})},(e,t)=>{if(e.selectedKeys.length!==t.selectedKeys.length)return!1;e.selectedKeys.sort(),t.selectedKeys.sort();for(let n=0;n<e.selectedKeys.length;n++)if(e.selectedKeys[n]!==t.selectedKeys[n])return!1;if(e.expandedKeys.length!==t.expandedKeys.length)return!1;e.expandedKeys.sort(),t.expandedKeys.sort();for(let n=0;n<e.expandedKeys.length;n++)if(e.expandedKeys[n]!==t.expandedKeys[n])return!1;return e.treeData===t.treeData&&e.onSelect===t.onSelect&&e.onMenuClick===t.onMenuClick&&e.onExpand===t.onExpand&&e.onDrop===t.onDrop});var K=n(96195),U=n(82024),G=n(81415),Y=n(82096),q=n(57559);const H=(0,K.Ay)(e=>(0,Q.jsx)(U.A,(0,o.A)((0,o.A)({variant:"scrollable",selectionFollowsFocus:!0},e),{},{TabIndicatorProps:{children:(0,Q.jsx)("span",{className:"MuiTabs-indicatorSpan"})}})))({margin:0,"& .MuiTabs-indicator":{display:"flex",justifyContent:"center",backgroundColor:"transparent"},"& .MuiTabs-indicatorSpan":{maxWidth:40,width:"100%",backgroundColor:T.Q1.Theme}}),J=(0,K.Ay)(e=>{const{tooltip:t,onTabClose:n}=e,i=(0,o.A)({},e);return delete i.onTabClose,(0,Q.jsxs)("div",{children:[(0,Q.jsx)(q.A,{arrow:!0,title:e.tooltip,children:(0,Q.jsx)(G.A,(0,o.A)({disableRipple:!0,style:{textWrap:"nowrap"}},i))}),(0,Q.jsx)(c.A,{size:"small",color:"secondary",sx:{marginLeft:-3,opacity:.6},onPointerDown:()=>{n&&n(t)},children:(0,Q.jsx)(Y.cmI,{})})]})})(e=>{let{theme:t,status:n}=e,o=T.Q1.Secondary,i=T.Q1.Primary;switch(n){case"error":o="rgba(233, 133, 116, 0.7)",i="rgb(233, 133, 116)";break;case"warning":o="rgba(200, 177, 136, 0.7)",i="rgb(200, 177, 136)"}return{textTransform:"none",fontWeight:t.typography.fontWeightRegular,fontSize:t.typography.pxToRem(15),marginRight:t.spacing(1),color:o,"&.Mui-selected":{color:i},"&.Mui-focusVisible":{backgroundColor:"rgba(100, 95, 228, 0.32)"}}}),X=(0,i.memo)(function(e){const{index:t,items:n=[],onChange:o,onMenuClick:a,onTabClose:s}=e,[l,c]=(0,i.useState)(null),[d,u]=(0,i.useState)(!1),{t:p}=(0,F.Bd)();null!==t&&t!==d?u(t):null===t&&!1!==d&&u(!1);const f=e=>{c(e.currentTarget)},b=e=>{c(null),a(e)};return(0,Q.jsxs)(r.A,{width:"100%",children:[(0,Q.jsx)(H,{value:d,scrollButtons:n.length>0,onChange:(e,t)=>{u(t),o(t)},"aria-label":"styled tabs",children:n.map((e,t)=>(0,Q.jsx)(J,{onContextMenu:f,onTabClose:s,tooltip:e.key,label:(t<9?t+1+".":"")+(null!==e.contentModified?"*"+e.title:e.title),status:e.status},e.key))}),(0,Q.jsxs)(g.j,{id:"dora-menu",anchorEl:l,keepMounted:!0,autoFocus:!1,open:Boolean(l),onClose:b,children:[(0,Q.jsxs)(g.m,{onClick:()=>b("Save"),children:[(0,Q.jsx)(h.A,{children:(0,Q.jsx)(y.kuV,{})}),(0,Q.jsx)(m.A,{primary:p("menu.save")}),(0,Q.jsx)("div",{style:{fontSize:10,color:T.Q1.TextSecondary},children:"Mod+S"})]}),(0,Q.jsxs)(g.m,{onClick:()=>b("SaveAll"),children:[(0,Q.jsx)(h.A,{children:(0,Q.jsx)(y.FFq,{})}),(0,Q.jsx)(m.A,{primary:p("menu.saveAll")}),(0,Q.jsx)("div",{style:{fontSize:10,color:T.Q1.TextSecondary},children:"Mod+Shift+S"})]}),(0,Q.jsxs)(g.m,{onClick:()=>b("Close"),children:[(0,Q.jsx)(h.A,{children:(0,Q.jsx)(y.zhF,{})}),(0,Q.jsx)(m.A,{primary:p("menu.close")}),(0,Q.jsx)("div",{style:{fontSize:10,color:T.Q1.TextSecondary},children:"Mod+W"})]}),(0,Q.jsxs)(g.m,{onClick:()=>b("CloseAll"),children:[(0,Q.jsx)(h.A,{children:(0,Q.jsx)(y.cAB,{})}),(0,Q.jsx)(m.A,{primary:p("menu.closeAll")}),(0,Q.jsx)("div",{style:{fontSize:10,color:T.Q1.TextSecondary},children:"Mod+Shift+W"})]}),(0,Q.jsxs)(g.m,{onClick:()=>b("CloseOthers"),children:[(0,Q.jsx)(h.A,{children:(0,Q.jsx)(y.XfH,{})}),(0,Q.jsx)(m.A,{primary:p("menu.closeOthers")})]})]})]})},(e,t)=>e.index===t.index&&e.items.length===t.items.length&&e.onChange===t.onChange&&e.onMenuClick===t.onMenuClick&&e.items.every((e,n)=>{const o=t.items[n];return e.key===o.key&&e.title===o.title&&e.contentModified===o.contentModified&&e.status===o.status}));var _=n(65827),$=n(6732),Z=n(65250),ee=n(27522),te=n(53693),ne=n(47371),oe=n(66615),ie=n(5352),re=n(41680),ae=n(77850),se=n(80540),le=n(43711),ce=n(80727),de=n(32284),ue=n(34244),pe=n(98519),ge=n(35118),he=n(92860);const me=n.p+"static/media/yarn.a16bf421d36a1ae5d4ef.png";var fe=n(16253);const ye=[{icon:(0,Q.jsx)("img",{src:C,alt:"Lua",width:"50px",height:"50px",style:{marginLeft:"0px"}}),name:"Lua",desc:"file.lua",padding:"20px"},{icon:(0,Q.jsx)("img",{src:j,alt:"YueScript",width:"60px",height:"60px",style:{marginLeft:"-5px"}}),name:"YueScript",desc:"file.yuescript",padding:"10px"},{icon:(0,Q.jsx)("img",{src:M,alt:"Teal",width:"45px",height:"45px",style:{marginLeft:"5px"}}),name:"Teal",desc:"file.teal",padding:"20px"},{icon:(0,Q.jsx)("img",{src:S,alt:"TypeScript",width:"40px",height:"40px",style:{marginLeft:"5px"}}),name:"TypeScript",desc:"file.typescript",padding:"20px"},{icon:(0,Q.jsx)(R.PyP,{size:65,style:{marginLeft:"-3px"}}),name:"Dora XML",desc:"file.xml",padding:"13px"},{icon:(0,Q.jsx)("img",{src:me,alt:"Yarn",width:"50px",height:"50px",style:{marginLeft:"0px"}}),name:"Yarn",desc:"file.yarn",padding:"15px"},{icon:(0,Q.jsx)(E.y5i,{size:50,style:{marginLeft:"5px"}}),name:"Markdown",desc:"file.markdown",padding:"15px"},{icon:(0,Q.jsx)(x.kDX,{size:60,style:{marginLeft:"5px",width:"60px"}}),name:"Visual Script",desc:"file.visualScript",padding:"25px"},{icon:(0,Q.jsx)("img",{src:B,alt:"Blockly",width:"40px",height:"40px",style:{marginLeft:"8px"}}),name:"Blockly",desc:"file.blockly",padding:"22px"},{icon:(0,Q.jsx)("img",{src:P,alt:"Wa",width:"40px",height:"40px",style:{marginLeft:"4px"}}),name:"Wa",desc:"file.wa",padding:"22px"},{icon:(0,Q.jsx)(y.XnY,{size:50,style:{marginLeft:"0px"}}),name:"Folder",desc:"file.folder",padding:"20px"}],be={appear:!1,enter:!1,exit:!1};const Ae=function(e){const{t:t}=(0,F.Bd)(),{onClose:n,open:o}=e;return(0,Q.jsxs)(_.A,{maxWidth:"md",onClose:()=>{n(void 0)},open:o,transitionDuration:0,slotProps:{transition:be},children:[(0,Q.jsx)($.A,{children:t("file.new")}),(0,Q.jsx)(fe.A,{container:!0,columns:{sm:2,md:3},children:ye.map(e=>(0,Q.jsx)(fe.A,{size:1,children:(0,Q.jsx)(ge.Ay,{children:(0,Q.jsxs)(he.A,{sx:{height:"90px"},onClick:()=>{return t=e.name,void n(t);var t},children:[e.icon,(0,Q.jsx)(m.A,{primary:e.name,secondary:t(e.desc),sx:{paddingLeft:e.padding}})]},e.name)})},e.name))}),(0,Q.jsx)(ne.A,{})]})};const ke=n.p+"static/media/logo.ebe391acdca1c04d240f39411e85bd0a.svg";var ve=n(88198),xe=n(79771),we=n(59852),Ce=n(51598),je=n(41967),Me=n(57560),Se=n(2260),Be=n(26142),Le=n(98114),Pe=n(25357),Re=n(46877),Ne=n(13303),Ee=n(6332),Ie=n(10392),Fe=n(57847),De=n(85690),Te=n(48538),Qe=n(49629);const{Dragger:ze}=Re.A,{TextArea:We}=Ne.A,{Text:Ve}=Ee.A,Oe=e=>{const{t:t}=(0,F.Bd)(),{message:n,notification:r}=Ie.A.useApp(),[a,s]=(0,i.useState)(""),[l,c]=(0,i.useState)(""),[d,u]=(0,i.useState)("idle"),[p,g]=(0,i.useState)(0),[h,m]=(0,i.useState)("");(0,i.useEffect)(()=>{const o=(o,i,r)=>{o===a&&(u(i),g(r),"completed"===i?(n.success(t("download.completed")),e.onUploaded(e.path,l,!0)):"failed"===i&&(m(t("download.failed")),n.error(t("download.failed"))))};return we.E5(o),()=>we.dY(o)},[a,l,e,n,t]);const f=(0,i.useCallback)(e=>{try{const t=new URL(e).pathname;return t.split("/").pop()||"downloaded_file"}catch(t){return"downloaded_file"}},[]),b={name:"file",directory:!0,multiple:!0,showUploadList:!1,action:we.c2("/upload?path=".concat(e.path)),beforeUpload(e,n){if(n.length>501)return r.error({title:t("upload.exceeded"),key:"upload-exceeded-error",message:t("upload.failed"),placement:"top"}),Re.A.LIST_IGNORE;if(".DS_Store"===e.name)return Re.A.LIST_IGNORE;const o=new File([e],""!==e.webkitRelativePath?e.webkitRelativePath:e.name),i=o.name;return P(e=>{if(e.find(e=>e.name===i&&"uploading"===e.status))return e;const t="temp-".concat(Date.now(),"-").concat(Math.random(),"-").concat(i);return[...e,{uid:t,name:i,status:"uploading",percent:0}]}),o},onChange(t){const{status:n,percent:i,uid:r,name:a}=t.file;void 0!==i&&r&&R.current.set(r,i),P(t=>{let i=t.findIndex(e=>e.uid===r);if(-1===i&&(i=t.findIndex(e=>e.name===a&&"uploading"===e.status&&e.uid.startsWith("temp-"))),-1===i)return t;const s=[...t];return"done"===n?(s[i]=(0,o.A)((0,o.A)({},s[i]),{},{uid:r,status:"done",percent:100}),R.current.set(r,100),N.current.set(r,100),setTimeout(()=>{P(e=>e.filter(e=>e.uid!==r)),R.current.delete(r),N.current.delete(r)},2e3),e.onUploaded(e.path,a,!1)):"error"===n?(s[i]=(0,o.A)((0,o.A)({},s[i]),{},{uid:r,status:"error"}),setTimeout(()=>{P(e=>e.filter(e=>e.uid!==r)),r&&(R.current.delete(r),N.current.delete(r))},3e3)):"uploading"===n&&(s[i]=(0,o.A)((0,o.A)({},s[i]),{},{uid:r,status:"uploading"})),s})}},[A,k]=(0,i.useState)([]),[v,x]=(0,i.useState)(!1),[w,C]=(0,i.useState)(""),[j,M]=(0,i.useState)(""),[S,B]=(0,i.useState)(!1),[L,P]=(0,i.useState)([]),R=(0,i.useRef)(new Map),N=(0,i.useRef)(new Map);(0,i.useEffect)(()=>{const e=setInterval(()=>{P(e=>{let t=!1;const n=e.map(e=>{if("uploading"===e.status){const n=R.current.get(e.uid);if(void 0!==n){if(n!==N.current.get(e.uid))return t=!0,N.current.set(e.uid,n),(0,o.A)((0,o.A)({},e),{},{percent:n})}}return e});return t?n:e})},200);return()=>clearInterval(e)},[]);const E={onRemove:e=>{const t=A.indexOf(e),n=A.slice();n.splice(t,1),k(n)},beforeUpload:e=>(k([...A,e]),!1),fileList:A};return(0,Q.jsxs)(le.A,{maxWidth:"md",children:[(0,Q.jsx)("p",{className:"dora-upload-title",style:{color:T.Q1.TextPrimary},children:e.title}),(0,Q.jsx)(Fe.A,{defaultActiveKey:"1",accordion:!0,expandIconPlacement:"end",style:{marginBottom:20,backgroundColor:T.Q1.Background,borderColor:T.Q1.Line},items:[{key:"1",label:(0,Q.jsxs)(De.A,{children:[(0,Q.jsx)(Ce.A,{}),t("upload.localFiles")]}),children:(0,Q.jsxs)(De.A,{orientation:"vertical",style:{width:"100%"},children:[(0,Q.jsx)(Re.A,(0,o.A)((0,o.A)({},E),{},{style:{marginBottom:10},children:(0,Q.jsx)(Te.Ay,{icon:(0,Q.jsx)(Ce.A,{}),children:t("upload.selectFile")})})),(0,Q.jsx)(Te.Ay,{onClick:()=>{const o=new FormData;A.forEach(e=>{o.append("file",e)}),x(!0),fetch(we.c2("/upload?path=".concat(e.path)),{method:"POST",body:o}).then(()=>{A.forEach(t=>{const n=t;e.onUploaded(e.path,n.name,!1)}),k([]),n.success(t("upload.success"))}).catch(()=>{n.error(t("upload.failed"))}).finally(()=>{x(!1)})},disabled:0===A.length,loading:v,children:t(v?"upload.uploading":"upload.startUpload")}),(0,Q.jsx)("div",{style:{padding:10}}),(0,Q.jsxs)(ze,(0,o.A)((0,o.A)({},b),{},{children:[(0,Q.jsx)("p",{className:"dora-upload-drag-icon",style:{color:T.Q1.Primary},children:(0,Q.jsx)(y.kaf,{style:{fontSize:"40px"}})}),(0,Q.jsx)("p",{className:"dora-upload-text",style:{color:T.Q1.TextPrimary},children:t("upload.text")}),(0,Q.jsx)("p",{className:"dora-upload-hint",style:{color:T.Q1.TextSecondary},children:t("upload.hint")})]})),L.length>0&&(0,Q.jsxs)("div",{style:{marginTop:16,padding:12,backgroundColor:T.Q1.Background,border:"1px solid ".concat(T.Q1.Line),borderRadius:6},children:[(0,Q.jsxs)(Ve,{type:"secondary",style:{display:"block",marginBottom:12,fontSize:14},children:[t("upload.uploadingFiles")," (",L.length,")"]}),(0,Q.jsx)("div",{children:L.map((e,t)=>(0,Q.jsx)("div",{style:{padding:"8px 0",borderBottom:t<L.length-1?"1px solid ".concat(T.Q1.Line):"none"},children:(0,Q.jsxs)("div",{style:{width:"100%"},children:[(0,Q.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:6},children:[(0,Q.jsxs)("div",{style:{display:"flex",alignItems:"center",flex:1,minWidth:0},children:["done"===e.status&&(0,Q.jsx)(je.A,{style:{color:"#52c41a",marginRight:8,fontSize:16}}),"error"===e.status&&(0,Q.jsx)(Me.A,{style:{color:"#ff4d4f",marginRight:8,fontSize:16}}),"uploading"===e.status&&(0,Q.jsx)(Se.A,{style:{color:T.Q1.Primary,marginRight:8,fontSize:16}}),(0,Q.jsx)(Ve,{ellipsis:!0,style:{color:T.Q1.TextPrimary,fontSize:13,flex:1,minWidth:0},title:e.name,children:e.name})]}),"uploading"===e.status&&(0,Q.jsxs)(Ve,{type:"secondary",style:{marginLeft:12,fontSize:12,minWidth:45,textAlign:"right"},children:[Math.round(e.percent),"%"]})]}),"uploading"===e.status&&(0,Q.jsx)(Qe.A,{percent:Math.round(e.percent),status:"active",strokeColor:T.Q1.Primary,showInfo:!1,size:"small",style:{marginTop:4}})]})},e.uid))})]})]})},{key:"2",label:(0,Q.jsxs)(De.A,{children:[(0,Q.jsx)(Be.A,{}),t("download.networkResource")]}),children:(0,Q.jsxs)(De.A,{direction:"vertical",style:{width:"100%"},children:[(0,Q.jsx)(Ve,{type:"secondary",children:t("download.url")}),(0,Q.jsx)(We,{placeholder:t("download.urlPlaceholder"),value:a,onChange:e=>{const t=e.target.value;if(s(t),t){const e=f(t);c(e)}},rows:2}),(0,Q.jsx)(Ve,{type:"secondary",children:t("download.fileName")}),(0,Q.jsx)(Ne.A,{placeholder:t("download.fileNamePlaceholder"),value:l,onChange:e=>c(e.target.value)}),(0,Q.jsxs)(De.A,{children:[(0,Q.jsx)(Te.Ay,{type:"primary",icon:(0,Q.jsx)(Le.A,{}),onClick:async()=>{if(a.trim())if(l.trim())try{u("downloading"),g(0),m("");(await we.RG({url:a.trim(),target:"".concat(e.path,"/").concat(l.trim())})).success?n.success(t("download.startDownload")):(u("failed"),m(t("download.startFailed")),n.error(t("download.startFailed")))}catch(o){u("failed"),m(t("download.startFailed")),n.error(t("download.startFailed"))}else n.error(t("download.fileNameRequired"));else n.error(t("download.urlRequired"))},disabled:!a.trim()||!l.trim()||"downloading"===d,loading:"downloading"===d,children:t("downloading"===d?"download.downloading":"download.startDownload")}),(0,Q.jsx)(Te.Ay,{onClick:()=>{s(""),c(""),u("idle"),g(0),m("")},disabled:"downloading"===d,children:t("download.reset")})]}),"idle"!==d&&(0,Q.jsxs)("div",{children:[(0,Q.jsxs)(Ve,{type:"secondary",children:[t("download.status"),": "]}),(0,Q.jsx)(Ve,{type:"completed"===d?"success":"failed"===d?"danger":void 0,children:t("download.".concat(d))}),"downloading"===d&&(0,Q.jsx)(Qe.A,{percent:Math.round(100*p),status:"active",style:{marginTop:8}}),"failed"===d&&h&&(0,Q.jsxs)(Ve,{type:"danger",style:{display:"block",marginTop:8},children:[t("download.error"),": ",h]})]})]})},{key:"3",label:(0,Q.jsxs)(De.A,{children:[(0,Q.jsx)(Pe.A,{}),t("upload.createTextFile")]}),children:(0,Q.jsxs)(De.A,{direction:"vertical",style:{width:"100%"},children:[(0,Q.jsxs)("div",{children:[(0,Q.jsxs)(Ve,{type:"secondary",style:{display:"block",marginBottom:8},children:[t("upload.fileName"),":"]}),(0,Q.jsx)(Ne.A,{placeholder:t("upload.fileNamePlaceholder"),value:j,onChange:e=>M(e.target.value),style:{marginBottom:16}})]}),(0,Q.jsxs)("div",{children:[(0,Q.jsxs)(Ve,{type:"secondary",style:{display:"block",marginBottom:8},children:[t("upload.textContent"),":"]}),(0,Q.jsx)(We,{placeholder:t("upload.textContentPlaceholder"),value:w,onChange:e=>C(e.target.value),rows:6,style:{marginBottom:16}})]}),(0,Q.jsx)(Te.Ay,{type:"primary",onClick:async()=>{if(w.trim())if(j.trim())try{B(!0);(await we.Jd({path:D.A.path.join(e.path,j),content:w,folder:!1})).success?(e.onUploaded(e.path,j,!0),n.success(t("upload.textFileCreated")),C(""),M("")):n.error(t("upload.textFileCreationFailed"))}catch(o){n.error(t("upload.textFileCreationFailed"))}finally{B(!1)}else n.error(t("upload.textFileNameRequired"));else n.error(t("upload.textContentRequired"))},loading:S,disabled:!w.trim()||!j.trim(),icon:(0,Q.jsx)(Pe.A,{}),children:t(S?"upload.creating":"upload.createFile")})]})}]})]})},Ke=(0,i.memo)(e=>(0,Q.jsx)(ve.Ay,{theme:{algorithm:xe.A.darkAlgorithm,token:{colorPrimary:T.Q1.Theme,colorBgContainer:T.Q1.Background},components:{Input:{activeBorderColor:T.Q1.Primary,hoverBorderColor:T.Q1.Primary}}},children:(0,Q.jsx)(Ie.A,{children:(0,Q.jsx)(Oe,(0,o.A)({},e))})}));var Ue=n(38166),Ge=n(20503),Ye=(n(79494),n(34707)),qe=n(18091);const He=e=>{const{t:t}=(0,F.Bd)();return(0,Q.jsx)(Ye.A,{forcePopupIcon:!1,fullWidth:!0,openOnFocus:!0,disableListWrap:!0,filterOptions:(e,t)=>(0,qe.Ht)(e,t.inputValue,{keys:["title"]}),options:e.options,getOptionLabel:e=>e.fileKey,renderInput:e=>(0,Q.jsx)(te.A,(0,o.A)((0,o.A)({autoFocus:!0,sx:{m:1,width:"50ch","& .MuiOutlinedInput-notchedOutline":{borderColor:T.Q1.Secondary}}},e),{},{label:t("popup.goToFile")})),renderOption:(e,t)=>(delete e.key,(0,Q.jsxs)("li",(0,o.A)((0,o.A)({},e),{},{children:[t.title,"\u2003\u2003",(0,Q.jsx)("p",{style:{textAlign:"right",color:T.Q1.TextSecondary,fontSize:"12px"},children:t.path})]}),t.fileKey)),onChange:(t,n,o)=>{null!==n&&"selectOption"===o&&e.onClose(n)},onClose:(t,n)=>{"selectOption"!==n&&e.onClose(null)}})};var Je=n(68383);function Xe(e){var t;return["title: ".concat(e.title),"tags: ".concat(e.tags),"position: ".concat(e.position.x,",").concat(e.position.y),"colorID: ".concat(e.colorID),"---",(t=e.body,t.replace(/\r\n/g,"\n")),"===\n"].join("\n")}function _e(e){const t=e,n=function(e){var t,n;const o=[],i=e=>"  ".repeat(e);if(e.comments)for(const r of e.comments)o.push(r);if(null!==(t=e.pluginStorage)&&void 0!==t&&null!==(n=t.Runner)&&void 0!==n&&n.variables){o.push("variables:");for(const t of e.pluginStorage.Runner.variables)o.push("".concat(i(1),"- key: ").concat(t.key)),o.push("".concat(i(2),"value: ").concat(t.value))}return o.map(e=>"// ".concat(e)).join("\n")}(t.header),o=t.nodes.map(Xe).join("\n");return""===n?o:"".concat(n,"\n\n").concat(o)}function $e(e){var t,n;const o=e.replace(/\r\n/g,"\n").split("\n"),i=[];let r=0;for(;r<o.length;){const e=o[r].trim();if(e.startsWith("//"))i.push(e);else if(""!==e)break;r++}const a=o.slice(r);let s;try{s=function(e){const t={},n=[];let o=!1,i={};for(const r of e){const e=r.replace(/^\/\/\s?/,"").trim().replace(/\s+/," ");if("variables:"===e)o=!0;else if(o&&e.startsWith("- key:"))Object.keys(i).length>0&&(n.push(i),i={}),i.key=e.slice(6).trim();else if(o&&e.startsWith("value:")){const t=e.slice(6).trim();i.value=t}else t.comments?t.comments.push(e):t.comments=[e]}return Object.keys(i).length>0&&n.push(i),n.length>0&&(t.pluginStorage={Runner:{variables:n}}),t}(i)}catch(d){console.error(d)}null!==(t=s)&&void 0!==t||(s={});const l=a.join("\n");let c;try{c=function(e){return e.replace(/\r\n/g,"\n").split(/^===\s*$/m).map(e=>e.trim()).filter(Boolean).map(e=>{const[t,...n]=e.split(/^---\s*$/m),o=t.split("\n").map(e=>e.trim()),i=n.join("\n").trim();let r="",a="",s={x:0,y:0},l=0;for(const c of o)if(c.startsWith("title:"))r=c.slice(6).trim();else if(c.startsWith("tags:"))a=c.slice(5).trim();else if(c.startsWith("position:")){const[e,t]=c.slice(9).trim().split(",").map(e=>e.trim()).map(Number);s={x:e,y:t}}else c.startsWith("colorID:")&&(l=parseInt(c.slice(8).trim()));return{title:r,tags:a,position:s,colorID:l,body:i}})}(l)}catch(d){console.error(d)}return null!==(n=c)&&void 0!==n||(c=[]),{header:s,nodes:c}}const Ze=(0,i.memo)(e=>(0,Q.jsx)("iframe",{width:e.width,height:e.height,title:e.title,onLoad:t=>{if(null!==t.currentTarget.contentWindow){const n=t.currentTarget.contentWindow;let o;if(n.addEventListener("yarnSavedStateToLocalStorage",()=>{e.onChange()}),void 0!==e.defaultValue)try{o=JSON.stringify($e(e.defaultValue))}catch(t){console.error(t)}n.app.data.startNewFile(e.title,o),e.onLoad(n.app.data),n.document.addEventListener("YarnCheckSyntax",e=>{we.JI({code:e.code}).then(e=>{const t=new Event("YarnChecked");e.success?(t.syntaxError=e.syntaxError,n.document.dispatchEvent(t)):(t.syntaxError="Failed to check syntax",n.document.dispatchEvent(t))}).catch(()=>{const e=new Event("YarnChecked");e.syntaxError="Failed to check syntax",n.document.dispatchEvent(e)})}),n.document.addEventListener("keydown",t=>{if(t.ctrlKey||t.altKey||t.metaKey)switch(t.key){case"N":case"n":case"D":case"d":case"S":case"s":case"W":case"w":case"R":case"r":case"P":case"p":case"Q":case"q":t.preventDefault(),e.onKeydown(t)}})}},src:"yarn-editor/index.html",style:{border:"none",overflowY:"hidden"}}),(e,t)=>e.width===t.width&&e.height===t.height&&e.title===t.title),et=(0,i.memo)(e=>(0,Q.jsx)("iframe",{width:e.width,height:e.height,title:e.title,onLoad:t=>{if(null===t.currentTarget.contentWindow)return;const n=t.currentTarget.contentWindow;n.document.addEventListener("mouseup",()=>{e.onChange()}),void 0!==e.defaultValue&&""!==e.defaultValue&&n.setVisualScript(e.defaultValue),e.onLoad(n),n.document.addEventListener("keydown",t=>{if(t.ctrlKey||t.altKey||t.metaKey)switch(t.key){case"N":case"n":case"D":case"d":case"S":case"s":case"W":case"w":case"R":case"r":case"P":case"p":case"Q":case"q":t.preventDefault(),e.onKeydown(t)}else e.onChange()})},src:"code-wire/index.html",style:{border:"none",overflowY:"hidden"}}),(e,t)=>e.width===t.width&&e.height===t.height&&e.title===t.title);class tt{getFile(e){return Promise.resolve(void 0)}isFileAvailable(e){return Promise.resolve(!1)}}var nt=n(86292);class ot{constructor(){this.REGEX_DETECT_IMPORT=/(?:(?:(?:import)|(?:export))(?:.)*?from\s+["']([^"']+)["'])|(?:require|import)\s*\(["']([^"']+)["']\)|(?:import)\s+["']([^"']+)["']|(?:\/+\s*<reference\s+path=["']([^"']+)["']\s*\/>)/g,this.REGEX_NODE_MODULE=/^node:([\w\W/]+)$/}parseDependencies(e,t){return[...e.matchAll(this.REGEX_DETECT_IMPORT)].map(e=>{var t,n,o;return null!==(t=null!==(n=null!==(o=e[1])&&void 0!==o?o:e[2])&&void 0!==n?n:e[3])&&void 0!==t?t:e[4]}).filter(e=>!!e).map(e=>this.resolvePath(e,t))}resolvePath(e,t){const n=e.match(this.REGEX_NODE_MODULE);if(n)return{kind:"relative-in-package",packageName:"@types/node",importPath:"".concat(n[1],".d.ts"),sourcePath:""};if("string"===typeof t){if(e.startsWith("."))return{kind:"relative",importPath:e,sourcePath:t};if(e.startsWith("@")){const t=e.split("/");return{kind:"package",packageName:"".concat(t[0],"/").concat(t[1]),importPath:t.slice(2).join("/")}}{const t=e.split("/");return{kind:"package",packageName:t[0],importPath:t.slice(1).join("/")}}}switch(t.kind){case"package":throw Error("TODO?");case"relative":throw Error("TODO2?");case"relative-in-package":if(e.startsWith("."))return{kind:"relative-in-package",packageName:t.packageName,sourcePath:nt.default.join(t.sourcePath,t.importPath),importPath:e};if(e.startsWith("@")){const t=e.split("/");return{kind:"package",packageName:"".concat(t[0],"/").concat(t[1]),importPath:t.slice(2).join("/")}}{const t=e.split("/");return{kind:"package",packageName:t[0],importPath:t.slice(1).join("/")}}}}}const it=(e,t)=>{var n;let o="".concat(e.type,": ");switch(e.type){case"CodeChanged":case"ResolveNewImports":o+="";break;case"LookedUpTypeFile":o+='"'.concat(e.path,'" was ').concat(e.success?"sucessfully":"not sucessfully"," looked up");break;case"AttemptedLookUpFile":o+='"'.concat(e.path,'" was ').concat(e.success?"sucessfully":"not sucessfully"," attempted to looked up");break;case"LookedUpPackage":o+='package.json for package "'.concat(e.package,'" was ').concat(e.success?"sucessfully":"not sucessfully"," looked up").concat(e.definitelyTyped?" (found in definitely typed repo)":"");break;case"LoadedFromCache":o+='"'.concat(e.importPath,'" was loaded from cache');break;case"StoredToCache":o+='"'.concat(e.importPath,'" was stored to cache')}o.endsWith(": ")&&(o=o.slice(void 0,-2)),null===(n=t.onUpdate)||void 0===n||n.call(t,e,o)};class rt{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.options=e,this.fileRecursionDepth=t,this.packageRecursionDepth=n}nextPackage(){return new rt(this.options,this.fileRecursionDepth,this.packageRecursionDepth+1)}nextFile(){return new rt(this.options,this.fileRecursionDepth+1,this.packageRecursionDepth)}same(){return new rt(this.options,this.fileRecursionDepth,this.packageRecursionDepth)}shouldStop(){return this.options.fileRecursionDepth>0&&this.fileRecursionDepth>=this.options.fileRecursionDepth||this.options.packageRecursionDepth>0&&this.packageRecursionDepth>=this.options.packageRecursionDepth}}class at{constructor(e){if(this.options=e,this.loadedFiles=void 0,this.dependencyParser=void 0,this.cache=void 0,this.versions=void 0,this.newImportsResolved=void 0,this.monaco=void 0,this.loadedFiles=[],this.dependencyParser=new ot,this.cache=e.sourceCache,this.newImportsResolved=!1,this.monaco=e.monaco,e.preloadPackages&&e.versions){this.versions=e.versions;for(const[t]of Object.entries(e.versions))this.resolveImport({kind:"package",packageName:t,importPath:""},new rt(this.options)).catch(e=>{console.error(e)})}}wereNewImportsResolved(){return this.newImportsResolved}resetNewImportsResolved(){this.newImportsResolved=!1}async resolveImportsInFile(e,t,n){if(n.shouldStop())return;const o=this.dependencyParser.parseDependencies(e,t);for(const l of o)try{await this.resolveImport(l,n)}catch(s){var i,r,a;if(this.options.onError)null===(i=(r=this.options).onError)||void 0===i||i.call(r,null!==(a=s.message)&&void 0!==a?a:s);else console.error(s)}}async resolveImport(e,t){const n=this.hashImportResourcePath(e);if(!this.loadedFiles.includes(n))switch(this.loadedFiles.push(n),e.kind){case"package":{const n={kind:"relative-in-package",packageName:"",importPath:e.packageName+(e.importPath?"/"+e.importPath:""),sourcePath:""};return await this.resolveImportInPackage(n,t.nextFile())}case"relative":{const n={kind:"relative-in-package",packageName:"",importPath:e.importPath,sourcePath:e.sourcePath};return await this.resolveImportInPackage(n,t.nextFile())}case"relative-in-package":return await this.resolveImportInPackage(e,t.nextFile())}}async resolveImportInPackage(e,t){const n=await this.loadSourceFileContents(e);if(n){const{source:o,at:i}=n,r=i.startsWith("file:")?this.monaco.Uri.parse(i):this.monaco.Uri.file(i);this.monaco.editor.getModel(r)||this.createModel(o,r),await this.resolveImportsInFile(o,{kind:"relative-in-package",packageName:e.packageName,sourcePath:nt.default.dirname(i),importPath:""},t)}}async loadSourceFileContents(e){const t={type:"LookedUpTypeFile",path:nt.default.join(e.packageName,e.sourcePath,e.importPath),definitelyTyped:!1,success:!1},n=e.packageName,o=this.getVersion(e.packageName);let i=[".d.ts","/index.d.ts",".ts",".tsx","/index.ts","/index.tsx"];if(i.map(t=>e.importPath.endsWith(t)).reduce((e,t)=>e||t,!1)){const t=await this.resolveSourceFile(n,o,nt.default.join(e.sourcePath,e.importPath));if(t)return{source:t,at:nt.default.join(e.sourcePath,e.importPath)}}else for(const a of i){const t=nt.default.join(e.sourcePath,e.importPath),i=(".d.ts"===a&&t.endsWith(".js")?t.slice(0,-3):t)+a,r=await this.resolveSourceFile(n,o,i);if(it({type:"AttemptedLookUpFile",path:nt.default.join(n,i),success:!!r},this.options),r)return it({type:"LookedUpTypeFile",path:nt.default.join(n,i),success:!0},this.options),{source:r,at:i}}const r=await this.resolvePackageJson(n,o,nt.default.join(e.sourcePath,e.importPath));if(r){const{types:t}=JSON.parse(r);if(t){const i=nt.default.join(e.sourcePath,e.importPath,t),r=await this.resolveSourceFile(n,o,i);if(r)return it({type:"LookedUpTypeFile",path:nt.default.join(n,i),success:!0},this.options),{source:r,at:i}}}return it(t,this.options),null}getVersion(e){var t;return null===(t=this.versions)||void 0===t?void 0:t[e]}setVersions(e){var t,n;this.versions=e,null===(t=(n=this.options).onUpdateVersions)||void 0===t||t.call(n,e)}setVersion(e,t){this.setVersions((0,o.A)((0,o.A)({},this.versions),{},{[e]:t}))}createModel(e,t){this.monaco.editor.getModel(t)||(this.monaco.editor.createModel(e,"typescript",t),this.newImportsResolved=!0)}hashImportResourcePath(e){return(e=>{var t;switch(e.kind){case"package":return nt.default.join(e.packageName,null!==(t=e.importPath)&&void 0!==t?t:"","package.json");case"relative":return nt.default.join(e.sourcePath,e.importPath);case"relative-in-package":return nt.default.join(e.packageName,e.sourcePath,e.importPath)}})(e)}async resolvePackageJson(e,t,n){const o=nt.default.join(e+(t?"@".concat(t):""),null!==n&&void 0!==n?n:"","package.json");let i,r=!1;var a;return this.cache.isFileAvailable?r=await this.cache.isFileAvailable(o):(i=await this.cache.getFile(o),r=void 0!==i),r?null!==(a=i)&&void 0!==a?a:await this.cache.getFile(o):void 0}async resolveSourceFile(e,t,n){const o=nt.default.join(e+(t?"@".concat(t):""),n);let i,r=!1;var a;return this.cache.isFileAvailable?r=await this.cache.isFileAvailable(o):(i=await this.cache.getFile(o),r=void 0!==i),r?(it({type:"LoadedFromCache",importPath:o},this.options),null!==(a=i)&&void 0!==a?a:await this.cache.getFile(o)):void 0}}class st{constructor(e,t){this.editor=e,this.options=t,this.importResolver=void 0,this.debounceTimer=void 0,this.isResolving=void 0,this.disposables=void 0,this.disposables=[],this.importResolver=new at(t);const n=e.onDidChangeModelContent(e=>{this.debouncedResolveContents()});this.disposables.push(n)}static async create(e,t){var n;null!==t&&void 0!==t&&t.shareCache&&t.sourceCache&&!st.sharedCache&&(st.sharedCache=t.sourceCache);const i=null===t||void 0===t?void 0:t.monaco;if(!i)throw new Error("monacoInstance not found, you can specify the monaco instance via options.monaco");return new st(e,(0,o.A)((0,o.A)({onlySpecifiedPackages:!1,preloadPackages:!1,shareCache:!1,dontRefreshModelValueAfterResolvement:!1,sourceCache:null!==(n=st.sharedCache)&&void 0!==n?n:new tt,debounceDuration:4e3,fileRecursionDepth:10,packageRecursionDepth:3},t),{},{monaco:i}))}dispose(){for(const e of this.disposables)e.dispose()}setVersions(e){this.importResolver.setVersions(e),this.options.versions=e}debouncedResolveContents(){this.isResolving||(it({type:"CodeChanged"},this.options),this.options.debounceDuration<=0?this.resolveContents():(void 0!==this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout(async()=>{await this.resolveContents(),this.debounceTimer=void 0},this.options.debounceDuration)))}async resolveContents(){this.isResolving=!0,it({type:"ResolveNewImports"},this.options);const e=this.editor.getModel();if(!e)return;const t=e.getLinesContent();try{await this.importResolver.resolveImportsInFile(t.join("\n"),nt.default.dirname(e.uri.toString()),new rt(this.options))}catch(o){if(!this.options.onError)throw o;var n;this.options.onError(null!==(n=o.message)&&void 0!==n?n:o)}if(this.importResolver.wereNewImportsResolved()){if(!this.options.dontRefreshModelValueAfterResolvement){const t=this.editor.getPosition();e.setValue(e.getValue()),t&&this.editor.setPosition(t)}this.importResolver.resetNewImportsResolved()}this.isResolving=!1}}st.sharedCache=void 0;class lt extends st{constructor(e,t){super(e,t)}static async create(e,t){var i;return await st.create(e,(0,o.A)((0,o.A)({},t),{},{monaco:null!==(i=null===t||void 0===t?void 0:t.monaco)&&void 0!==i?i:await Promise.resolve().then(n.bind(n,20503))}))}}var ct=n(219);const dt=0===navigator.platform.indexOf("Mac")||"iPhone"===navigator.platform||"iPad"===navigator.platform,ut=()=>{const{t:e}=(0,F.Bd)(),t=[{description:e("menu.modKey"),keys:dt?["\u2303","\u2325","\u2318"]:["Ctrl","Alt","Win"]},{description:e("menu.goToFile"),keys:["Mod","P"]},{description:e("menu.switchTab"),keys:["Mod","Number"]},{description:e("menu.new"),keys:["Mod",dt?"\u21e7":"Shift","N"]},{description:e("menu.delete"),keys:["Mod",dt?"\u21e7":"Shift","D"]},{description:e("menu.save"),keys:["Mod","S"]}],n=[{description:e("menu.saveAll"),keys:["Mod",dt?"\u21e7":"Shift","S"]},{description:e("menu.viewLog"),keys:["Mod","."]},{description:e("menu.stop"),keys:["Mod","Q"]},{description:e("menu.runThis"),keys:["Mod",dt?"\u21e7":"Shift","R"]},{description:e("menu.run"),keys:["Mod","R"]}];return(0,Q.jsx)("div",{style:{width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,Q.jsxs)("div",{className:"container",children:[(0,Q.jsx)("ul",{className:"list",children:t.map((e,t)=>(0,Q.jsxs)("li",{className:"list-item",children:[(0,Q.jsx)("span",{className:"description",children:e.description}),(0,Q.jsx)("div",{className:"keys",children:e.keys.map((e,t)=>(0,Q.jsx)("kbd",{className:"key",children:e},t))})]},t))}),(0,Q.jsx)("ul",{className:"list",children:n.map((e,t)=>(0,Q.jsxs)("li",{className:"list-item",children:[(0,Q.jsx)("span",{className:"description",children:e.description}),(0,Q.jsx)("div",{className:"keys",children:e.keys.map((e,t)=>(0,Q.jsx)("kbd",{className:"key",children:e},t))})]},t))})]})})};var pt=n(54616);const gt=e=>(0,Q.jsx)("span",{children:e.split(/\[(error|warning|info)\]/).map((e,t)=>t%2===1?(0,Q.jsxs)("span",{children:["[",(0,Q.jsx)("span",{style:{color:"error"===e?T.Q1.Error:"warning"===e?T.Q1.Warning:T.Q1.Info},children:e}),"]"]},t):(0,Q.jsx)("span",{children:e},t))}),ht=(0,i.memo)(e=>{const{t:t}=(0,F.Bd)(),[n,o]=(0,i.useState)(t("log.wait"));return(0,i.useEffect)(()=>{const e=(e,n)=>{o(""===n?t("log.wait"):n)};return we.oi(e),()=>{we.N4(e)}},[t]),(0,Q.jsx)(pt.LazyLog,{height:e.height,text:n,style:{msOverflowStyle:"none",scrollbarWidth:"none",WebkitScrollSnapType:"none",fontSize:18,fontFamily:"Roboto,Helvetica,Arial,sans-serif",color:T.Q1.TextSecondary,background:T.Q1.BackgroundDark},formatPart:gt,rowHeight:22,extraLines:1,selectableLines:!0,enableSearch:!0,caseInsensitive:!0,stream:!0,follow:!0})});var mt=n(45383),ft=n(80505),yt=n(69193),bt=n(39872);const At=i.lazy(()=>Promise.all([n.e(7250),n.e(4892)]).then(n.bind(n,64892))),kt=i.lazy(()=>Promise.all([n.e(9389),n.e(3318)]).then(n.bind(n,33318))),vt=i.lazy(()=>Promise.all([n.e(8145),n.e(5892)]).then(n.bind(n,55892))),xt=i.lazy(()=>Promise.all([n.e(9298),n.e(672)]).then(n.bind(n,70672))),{path:wt}=D.A;p.wG.config({monaco:Ge});let Ct=Date.now(),jt=Date.now(),Mt=!1;document.addEventListener("contextmenu",e=>{e.preventDefault()});let St=!1,Bt=!1,Lt=()=>{},Pt=Date.now();let Rt=null;const Nt=(e,t)=>{if(null===e&&null===t)return!0;if(null===e||null===t)return!1;if(e.index!==t.index)return!1;if(e.files.length!==t.files.length)return!1;for(let n=0;n<e.files.length;n++){const o=e.files[n],i=t.files[n];if(o.key!==i.key)return!1;if(o.title!==i.title)return!1;if(o.mdEditing!==i.mdEditing)return!1;if(o.yarnTextEditing!==i.yarnTextEditing)return!1;if(o.readOnly!==i.readOnly)return!1;if(o.folder!==i.folder)return!1;if(o.position&&i.position){if(o.position.lineNumber!==i.position.lineNumber)return!1;if(o.position.column!==i.position.column)return!1}else if(o.position!==i.position)return!1}return!0};setInterval(()=>{const e=Date.now();e-Pt>=1e4&&(Lt(),Pt=e)},1e4),window.onbeforeunload=e=>{if(void 0!==D.A.version&&(Lt(),St))return e.returnValue="Please save before leaving!","Please save before leaving!"};const Et=(e,t)=>!!e.startsWith(t)&&!wt.relative(t,e).startsWith(".."),It=(0,Q.jsx)("div",{style:{width:"100%",height:"100%",backgroundColor:"#1a1a1a"}}),Ft=(0,i.memo)(e=>{const{hidden:t,width:n,height:o,language:r,editingFile:a,readOnly:s,minimap:l,onMount:c,onModified:d,onValidate:u}=e,g=(0,i.useCallback)(e=>{u(e,a.key)},[u,a.key]),h=(0,i.useCallback)((e,t)=>{void 0!==e&&d(a,e,t.changes.at(-1))},[d,a]);return(0,Q.jsx)("div",{hidden:t,children:(0,Q.jsx)(p.Ay,{width:n,height:o,language:r,theme:ct.v,onMount:c,keepCurrentModel:!0,loading:It,onChange:h,onValidate:"typescript"===r?g:void 0,path:Ge.Uri.file(a.key).toString(),options:{readOnly:s,padding:{top:20},wordWrap:"on",wordBreak:"keepAll",selectOnLineNumbers:!0,matchBrackets:"near",fontSize:18,useTabStops:!1,insertSpaces:!1,renderWhitespace:"all",tabSize:2,minimap:{enabled:l},definitionLinkOpensInPeek:!0}})})});Ft.displayName="Editor";const Dt=e=>{var t;let{minWidth:n,defaultWidth:o}=e;null!==(t=o)&&void 0!==t||(o=n);const[r,a]=(0,i.useState)(!1),[s,l]=(0,i.useState)(o),[c,d]=(0,i.useState)(null),u=(0,i.useCallback)(e=>{r||(e.preventDefault(),d(e.target),e.target.setPointerCapture(e.pointerId),a(!0))},[r]),p=(0,i.useCallback)(e=>{r&&(a(!1),null===c||void 0===c||c.releasePointerCapture(e.pointerId),d(null),we.G5({code:"require('Script.Dev.Entry').getConfig().drawerWidth = ".concat(s),log:!1}))},[r,c,s]),g=(0,i.useCallback)(e=>{if(r){e.preventDefault();const t=e.clientX-Tt;t>=n&&l(t)}},[n,r]);return(0,i.useEffect)(()=>(document.addEventListener("pointermove",g),document.addEventListener("pointerup",p),()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",p)}),[p,g]),{width:s,enableResize:u,isResizing:r}},Tt=4,Qt={appear:!1,enter:!1,exit:!1};let zt="",Wt="";function Vt(){var e,t,p,g,h,m,f,y,b;const{t:A}=(0,F.Bd)(),[k,v]=(0,i.useState)([]),[x,w]=(0,i.useState)(!1),[C,j]=(0,i.useState)(!0),[M,S]=(0,i.useState)(null),[B,L]=(0,i.useState)([]),[P,R]=(0,i.useState)([]),[E,z]=(0,i.useState)([]),[W,V]=(0,i.useState)([]),[K,U]=(0,i.useState)(null),[G,Y]=(0,i.useState)(null),[H,J]=(0,i.useState)(null),[ge,he]=(0,i.useState)(null),[me,fe]=(0,i.useState)(null),[ye,be]=(0,i.useState)(null),[ve,xe]=(0,i.useState)(!1),[Ce,je]=(0,i.useState)(null),{width:Me,enableResize:Se,isResizing:Be}=Dt({minWidth:150,defaultWidth:D.A.drawerWidth}),[Le,Pe]=(0,i.useState)({width:window.innerWidth,height:window.innerHeight}),Re=Le.width-(C?Me:0),Ne=Le.height-48,[Ee,Ie]=(0,i.useState)(null),[Fe,De]=(0,i.useState)(!1),[Te,Qe]=(0,i.useState)(!1),[ze,We]=(0,i.useState)(!1),Ve=(e,t,n)=>{const o=e+Date.now().toString();v(i=>[...i,{msg:e,key:o,type:t,openLog:n}]),setTimeout(()=>{v(e=>e.filter(e=>e.key!==o))},5e3)},[Oe,Ye]=(0,i.useState)(!0),qe=(0,i.useCallback)(()=>we.mY().then(e=>(e.root=!0,e.title=A("tree.assets"),R([e]),e)).catch(()=>(Ve(A("alert.assetLoad"),"error"),null)),[A]);(0,i.useEffect)(()=>{void 0!==D.A.version?(Ve(A("alert.platform",{platform:D.A.platform}),"success"),document.addEventListener("keydown",e=>{if(e.ctrlKey||e.altKey||e.metaKey)switch(e.key){case"N":case"n":case"D":case"d":case"S":case"s":case"W":case"w":case"R":case"r":case"P":case"p":case"Q":case"q":case".":e.preventDefault(),Y(e);break;default:{const t=Number.parseInt(e.key);!Number.isNaN(t)&&t>=1&&t<=9&&(e.preventDefault(),Y(e));break}}},!1),window.addEventListener("resize",()=>{j(e=>(Pe({width:window.innerWidth,height:window.innerHeight}),e))}),we.Kl(()=>{Ve(A("log.open"),"success"),Ye(!1)}),we.Qu(()=>{Ve(A("log.close"),"error"),Ye(!0)}),we.MX(),Ge.typescript.typescriptDefaults.setExtraLibs([]),Promise.all([we.LF({path:"es6-subset.d.ts"}),we.LF({path:"lua.d.ts"}),we.LF({path:"Dora.d.ts"}),qe()]).then(e=>{let[t,n,o,i]=e;t.success&&Ge.typescript.typescriptDefaults.addExtraLib(t.content,"es6-subset.d.ts"),n.success&&Ge.typescript.typescriptDefaults.addExtraLib(n.content,"lua.d.ts"),o.success&&Ge.typescript.typescriptDefaults.addExtraLib(o.content,"Dora.d.ts"),null!==i&&z([i.key]),we.Br().then(e=>{if(e.success&&e.editingInfo){const t=JSON.parse(e.editingInfo);let n=t.index;Promise.all(t.files.map(async(e,t)=>{try{const n=await at(e.key,e.title,e.folder);return n.position=e.position,n.mdEditing=e.mdEditing,n.yarnTextEditing=e.yarnTextEditing,n.readOnly=e.readOnly,n.sortIndex=t,n}catch(n){return Ve(A("alert.read",{title:e.title}),"error"),null}})).then(e=>{const t=e.filter(e=>null!==e).sort((e,t)=>{var n,o;const i=null!==(n=e.sortIndex)&&void 0!==n?n:0,r=null!==(o=t.sortIndex)&&void 0!==o?o:0;return i<r?-1:i>r?1:0});L(t),n>=t.length&&(n=t.length-1),n<0&&(n=0),nt(n,t[n])}).catch(()=>{Ve(A("alert.open"),"error")})}})})):Ve(A("alert.getInfo"),"error")},[]),zt=null!==(e=null===(t=P.at(0))||void 0===t?void 0:t.key)&&void 0!==e?e:"",Wt=null!==(p=null===(g=P.at(0))||void 0===g||null===(h=g.children)||void 0===h||null===(m=h.at(0))||void 0===m?void 0:m.key)&&void 0!==p?p:"";const Xe=(0,i.useCallback)(e=>{L(t=>{let n=!1;return t.forEach(t=>{t.key===e.key&&(e.content!==t.content||t.yarnData||t.codeWireData?(t.contentModified=e.content,void 0!==e.blocklyCode&&(t.blocklyData=e.blocklyCode),n=!0):null!==t.contentModified&&(t.contentModified=null,n=!0))}),n?[...t]:t})},[]);St=void 0!==B.find(e=>null!==e.contentModified);const $e=(0,i.useCallback)((e,t)=>!D.A.engineDev&&(""===e||""===Wt||!!Et(e,Wt)&&(t&&Ve(A("alert.builtin"),"info"),!0)),[A]),tt=(0,i.useCallback)((e,t,n)=>{const o=e.editor;if(void 0===o)return;const i=o.getModel();null!==i&&($e(e.key,!1)||e.readOnly||(Ct=Date.now(),We(!0),new Promise(e=>{setTimeout(e,500)}).then(()=>{Date.now()-Ct>=500&&(Xe({key:e.key,content:t}),Ht(e,t,i,n),We(!1))})))},[$e,Xe]),nt=(0,i.useCallback)((e,t)=>{var n,o;null!==M&&(null===(n=B[M])||void 0===n||null===(o=n.editor)||void 0===o||o.updateOptions({stickyScroll:{enabled:!1}}));if(S(e),null!==e&&void 0!==t){const e=t;R(t=>{var n;if(e.key===(null===(n=t.at(0))||void 0===n?void 0:n.key))return t;const o=[];function i(t){if(t.key===e.key)return V([t.key]),U(t),!1;if(void 0!==t.children){o.push(t);const e=t.children.every(e=>i(e));return e&&o.pop(),e}return!0}for(let e=0;e<t.length;e++)if(!i(t[e])){for(const e of o)-1===E.indexOf(e.key)&&E.push(e.key);z([...E]);break}return t})}},[E,M,B]),ot=(0,i.useCallback)(e=>{nt(e,B[e])},[nt,B]),it=null!==M?B.at(M):void 0;(0,i.useEffect)(()=>{if(void 0!==it){const o=wt.extname(it.key).toLowerCase();var e;if(".yarn"===o&&!it.yarnTextEditing)return void(null===(e=it.yarnData)||void 0===e||e.warpToFocusedNode());const{editor:i}=it;if(void 0===i)return;if(i.focus(),i.updateOptions({stickyScroll:{enabled:!0}}),it.position){const{position:e}=it;it.position=void 0,L(e=>[...e]),setTimeout(()=>{i.setPosition(e),i.revealPositionInCenter(e)},100)}const r=i.getModel();if(null===r)return;var t;if(!$e(it.key,!1)&&!it.readOnly)Ht(it,null!==(t=it.contentModified)&&void 0!==t?t:it.content,r);".ts"!==o&&".tsx"!==o||Promise.all([n.e(475),n.e(8959)]).then(n.bind(n,26031)).then(e=>{let{revalidateModel:t}=e;t(r)})}},[it,null===it||void 0===it?void 0:it.editor,$e]);const rt=(0,i.useCallback)(e=>async t=>{e.editor=t,L(e=>[...e]);let o=null;const i=wt.extname(e.key).toLowerCase().substring(1);switch(i){case"lua":case"tl":case"yue":o=i}if("wa"===i){const{key:n}=e;t.addAction({id:"dora-action-format",label:A("editor.format"),keybindings:[Ge.KeyCode.KeyK|Ge.KeyMod.CtrlCmd,Ge.KeyCode.KeyK|Ge.KeyMod.WinCtrl],contextMenuGroupId:"navigation",contextMenuOrder:2,run:async function(){const e=t.getModel();if(null===e)return;if(!(await we.M9({path:n,content:e.getValue()})).success)return;const o=await we.wm({file:n});o.success&&(e.pushStackElement(),e.pushEditOperations(null,[{text:o.code,range:e.getFullModelRange()}],()=>null))}})}if(null!==o){const n=o;t.addAction({id:"dora-action-definition",label:A("editor.goToDefinition"),keybindings:[Ge.KeyCode.F12|Ge.KeyMod.CtrlCmd,Ge.KeyCode.F12|Ge.KeyMod.WinCtrl],contextMenuGroupId:"navigation",contextMenuOrder:1,run:function(o){const i=o.getPosition();if(null===i)return;const r=o.getModel();if(null===r)return;const a=r.getWordAtPosition(i);if(null===a)return;const s=r.getValueInRange({startLineNumber:i.lineNumber,startColumn:1,endLineNumber:i.lineNumber,endColumn:a.endColumn});we.xP({lang:n,line:s,file:e.key,row:i.lineNumber,content:r.getValue()}).then(function(e){if(e.success&&e.infered)if(void 0!==e.infered.key)be({key:e.infered.key,title:wt.basename(e.infered.file),row:e.infered.row,col:e.infered.col});else if(e.infered.row>0&&e.infered.col>0){const n={lineNumber:e.infered.row,column:e.infered.col};t.setPosition(n),t.revealPositionInCenterIfOutsideViewport(n)}})}});e.readOnly||$e(e.key,!1)||"tl"!==n&&"lua"!==n||t.addAction({id:"dora-action-require",label:A("editor.require"),keybindings:[Ge.KeyCode.F1|Ge.KeyMod.CtrlCmd,Ge.KeyCode.F1|Ge.KeyMod.WinCtrl],contextMenuGroupId:"navigation",contextMenuOrder:2,run:function(e){const t=e.getPosition();if(null===t)return;const n=e.getModel();if(null===n)return;const o=n.getWordAtPosition(t);null!==o&&n.pushEditOperations(null,[{text:"local ".concat(o.word,' <const> = require("').concat(o.word,'")\n'),range:{startLineNumber:1,startColumn:0,endLineNumber:1,endColumn:0}}],()=>null)}})}const r=t.getModel();if(r&&r.setValue(e.content),"tsx"===i||"ts"===i){"tsx"===i&&n.e(1597).then(n.bind(n,11597)).then(e=>{let{jsxSyntaxHighlight:n}=e;const{highlighter:o,dispose:i}=n.highlighterBuilder({editor:t});o(),t.onDidChangeModelContent(()=>{o()}),t.onDidDispose(()=>{i()})});const e=t.getModel();if(null===e)return;const o=e.uri.fsPath,r=await lt.create(t,{debounceDuration:2e3,sourceCache:{isFileAvailable:async e=>{const t=e.startsWith("file:")?Ge.Uri.parse(e).fsPath:e,n=wt.basename(t),i=n.toLowerCase();if(i.startsWith("dora.")&&"Dora.d.ts"!==n)return!1;if(i.startsWith("es6-subset."))return!1;if(i.startsWith("lua."))return!1;if(void 0!==Ge.typescript.typescriptDefaults.getExtraLibs()[t])return!0;if(null!==Ge.editor.getModel(Ge.Uri.file(t)))return!0;return(await we.qU({file:t,projFile:o})).success},getFile:async e=>{const t=e.startsWith("file:")?Ge.Uri.parse(e).fsPath:e,n=Ge.typescript.typescriptDefaults.getExtraLibs()[t];if(void 0!==n)return n.content;const i=Ge.editor.getModel(Ge.Uri.file(t));if(null!==i)return i.getValue();const r=await we.LF({path:t,projFile:o});return r.success?r.content:void 0}}});await r.resolveContents();const{revalidateModel:a}=await Promise.all([n.e(475),n.e(8959)]).then(n.bind(n,26031));a(e)}},[A,$e]),at=(0,i.useCallback)((e,t,n)=>new Promise((o,i)=>{if(n){if($e(e,!0))return void i("file readonly");const n={key:e,title:t,folder:!0,content:"",contentModified:null,status:"normal",onMount:()=>{}};return n.onMount=rt(n),void o(n)}switch(wt.extname(t).toLowerCase()){case".png":case".jpg":case".skel":{const n={key:e,title:t,content:"",contentModified:null,folder:!1,status:"normal",onMount:()=>{}};n.onMount=rt(n),o(n);break}case".bl":case".lua":case".tl":case".yue":case".xml":case".md":case".yarn":case".vs":case".ts":case".tsx":case".wa":case".mod":we.LF({path:e}).then(n=>{if(n.success&&void 0!==n.content){const{content:i}=n,r={key:e,title:t,content:i,contentModified:null,folder:!1,status:"normal",onMount:()=>{}};r.onMount=rt(r),o(r)}else i("file read error")}).catch(()=>{Ve(A("alert.read",{title:t}),"error"),i("file read error")});break;default:Ve(A("alert.unsuppored",{title:t}),"warning"),i("unknown file type")}}),[$e,rt,A]),st=(0,i.useCallback)((e,t,n,o,i)=>{let r=null;const a=B.find((t,n)=>""===wt.relative(t.key,e)&&(r=n,!0));null===r?at(e,t,n).then(e=>{e.readOnly=i,e.position=o,L(t=>{const n=[...t,e],o=n.length-1;return nt(o,n[o]),n})}).catch(()=>{}):(nt(r,a),a&&o&&(a.position=o,L([...B])))},[nt,B,at]);(0,i.useEffect)(()=>{null!==ye&&(st(ye.key,ye.title,!1,{lineNumber:ye.row,column:ye.col}),be(null))},[ye,st]);const ct=(0,i.useCallback)(e=>{if(V(e.map(e=>e.key)),0===e.length)return void U(null);const{key:t,title:n,dir:o}=e[0];U(e[0]),(o||""!==wt.extname(n))&&st(t,n,o)},[st]),dt=(0,i.useCallback)(e=>{const t=P.at(0);if(void 0===t)return;let n;if(n=E.length>e.length?E.filter(t=>void 0===e.find(e=>e===t)).at(0):e.filter(e=>void 0===E.find(t=>t===e)).at(0),n===t.key)return St?void Ve(A("alert.reloading"),"warning"):void qe().then(e=>{null!==e&&(L([]),nt(null),V([]),Ve(A("alert.reloaded"),"success"))});z(e)},[E,qe,nt,A,P]),pt=(0,i.useCallback)((e,t,n)=>{if(ze)return;De(null!==n&&void 0!==n&&n);let o=null,i=null,r=!1;if(null!==M){const e=B.at(M);if(void 0!==e&&(o=e.key,i=e.title,r=e.folder,".md"===wt.extname(i).toLowerCase()))return e.mdEditing=!1,void L([...B])}if(null===o||null===i){if(null===K)return void Ve(A("alert.runNoTarget"),"info");o=K.key,i=K.title,r=K.dir}let a="Run"===e;r&&(o=wt.join(o,"init"),a=!0);const s=wt.extname(o).toLowerCase();switch(s){case".lua":case".yue":case".tl":case".ts":case".tsx":case".xml":case".wasm":case".yarn":case".vs":case".bl":case".wa":case".mod":case"":if(".yarn"===s&&!a)break;if(".wa"===s&&!a)break;return".mod"!==s||a||(a=!0),void we.eF({file:o,asProj:a}).then(e=>{var n,o,r,a,s,l;e.success?(Ve(A("alert.run",{title:null!==(n=e.target)&&void 0!==n?n:i}),"success"),t||Ie({title:null!==(o=null!==(r=e.target)&&void 0!==r?r:i)&&void 0!==o?o:"Running",stopOnClose:!0})):Ve(A("alert.runFailed",{title:null!==(a=e.target)&&void 0!==a?a:i}),"error");t||void 0===e.err||he({title:null!==(s=null!==(l=e.target)&&void 0!==l?l:i)&&void 0!==s?s:"",msg:e.err,raw:!0})}).catch(()=>{Ve(A("alert.runFailed",{title:i}),"error")})}Ve(A("alert.runFailed",{title:i}),"info")},[B,M,A,K,ze]),gt=(0,i.useCallback)((e,t)=>new Promise((o,i)=>{const r=n=>{const r=void 0!==n?[e,n]:[e];if(null!==e.contentModified){if($e(e.key,!0))return Ve(A("alert.builtin"),"warning"),void o(r);const{contentModified:n}=e;we.M9({path:e.key,content:n}).then(a=>{if(a.success){e.content=n,e.contentModified=null;const i=wt.extname(e.key).toLowerCase();if(".yue"===i||".tl"===i||".xml"===i){const{key:t}=e,n=wt.extname(t),i=wt.basename(t,n),s=wt.dirname(t),l=wt.join(s,i+".lua"),c=B.find(e=>""===wt.relative(e.key,l));if(void 0!==c){const t=void 0===a.resultCodes?"":a.resultCodes;c.content=t,setTimeout(()=>{const e=Ge.editor.getModel(Ge.Uri.file(l));e&&e.setValue(t)},10),o([e,c])}else o(r)}else".wa"===i?(w(!0),we.z6({path:e.key}).then(e=>{e.success||(Ve(e.message,"error",!0),we.G5({code:'Log "Error", "'.concat(e.message.replace(/[\\"]/g,"\\$&"),'"'),log:!1}))}).finally(()=>{w(!1),o(r)})):o(r);switch(i){case".ts":case".tsx":case".lua":case".tl":case".yue":case".xml":case".bl":{let e=n.search(/@preview-file on\b/);if(t&&e>=0){let t=n.indexOf("\n",e);-1===t&&(t=void 0);const o=n.substring(e,t);o.search(/\bclear\b/)>=0&&we.Ux();const i=o.search(/\bnolog\b/)<0;pt("Run This",!0,i)}else if(e=n.search(/@preview-project on\b/),t&&e>=0){let t=n.indexOf("\n",e);-1===t&&(t=void 0);const o=n.substring(e,t);o.search(/\bclear\b/)>=0&&we.Ux();const i=o.search(/\bnolog\b/)<0;pt("Run",!0,i)}break}}}else Ve(A("alert.saveCurrent"),"error"),i("failed to save file")}).catch(()=>{Ve(A("alert.saveCurrent"),"error"),i("failed to save file")})}else o(r)};if(void 0!==e.yarnData)e.yarnData.getJSONData().then(t=>{const n=_e(JSON.parse(t));e.contentModified=n,r()}).catch(()=>{Ve(A("alert.saveCurrent"),"error"),i("failed to save file")});else if(void 0!==e.codeWireData){const{codeWireData:t}=e,n=t.getVisualScript();if(null!==e.contentModified||e.content!==n){e.contentModified=n;const o=t.getScript(),a=wt.extname(e.key),s=wt.basename(e.key,a),l=wt.join(wt.dirname(e.key),s+".tl"),c=B.find(e=>""===wt.relative(e.key,l));if(void 0!==c){c.content=o;const e=Ge.editor.getModel(Ge.Uri.file(l));e&&e.setValue(o)}we.M9({path:l,content:o}).then(e=>{e.success||(Ve(A("alert.saveCurrent"),"error"),i("failed to save file"))}).then(()=>{r(c),we.Sr({file:l,content:o}).then(e=>{if(e.success&&""!==o)t.reportVisualScriptError("");else if(void 0!==e.info){const n=o.split("\n"),i=[];for(const t of e.info){const[,e,o,,r]=t;let a="";if(""===wt.relative(e,l)&&1<=o&&o<=n.length){const e=n[o-1].match(/-- (\d+)$/);null!==e&&(a="node "+e[1]+", ")}i.push(a+"line "+o+": "+r)}t.reportVisualScriptError(i.join("<br>"))}})}).catch(()=>{Ve(A("alert.saveCurrent"),"error"),i("failed to save file")})}}else if(void 0!==e.blocklyData){const{key:t,blocklyData:n}=e,o=wt.extname(t),i=wt.basename(t,o),a=wt.join(wt.dirname(t),i+".lua"),s=B.find(e=>""===wt.relative(e.key,a));if(void 0!==s){s.content=n;const e=Ge.editor.getModel(Ge.Uri.file(a));e&&e.setValue(n)}we.M9({path:a,content:n}).then(e=>{e.success&&r()})}else{const o=wt.extname(e.key).toLowerCase();if(null===e.contentModified||".ts"!==o&&".tsx"!==o||e.key.toLocaleLowerCase().endsWith(".d.ts"))r();else{const{key:o,contentModified:a,editor:s}=e,l=null===s||void 0===s?void 0:s.getModel();Promise.all([n.e(475),n.e(8959)]).then(n.bind(n,26031)).then(n=>{let{transpileTypescript:s,setModelMarkers:c}=n;s(o,a).then(n=>{const{luaCode:o,success:a,diagnostics:s,extraError:d}=n;if(a||(d&&Ve(A("alert.failedTS"),"error",!0),t=!1),l&&c(l,s),void 0!==o){const t=wt.extname(e.key),n=wt.basename(e.key,t),a=wt.join(wt.dirname(e.key),n+".lua"),s=B.find(e=>""===wt.relative(e.key,a));if(void 0!==s){s.content=o;const e=Ge.editor.getModel(Ge.Uri.file(a));e&&e.setValue(o)}we.M9({path:a,content:o}).then(e=>{e.success?r(s):(Ve(A("alert.saveCurrent"),"error"),i("failed to save file"))}).catch(()=>{Ve(A("alert.saveCurrent"),"error"),i("failed to save file")})}}).catch(()=>{Ve(A("alert.saveCurrent"),"error"),i("failed to save file")})})}}}),[A,pt,$e,B]),Pt=(0,i.useCallback)(async()=>{if(Mt)return!1;Mt=!0;const e=B.filter(e=>null!==e.contentModified);try{const t=(await Promise.all(e.map(e=>gt(e,!1)))).flat();return L(e=>e.map(e=>{const n=t.find(t=>t.key===e.key);return void 0!==n?n:e})),Mt=!1,!0}catch(t){return console.error(t),Mt=!1,!1}},[gt,B]),It=(0,i.useCallback)(()=>{if(null!==M){let e=M;const t=()=>{const t=B.filter((t,n)=>n!==e);0===t.length?nt(null):(e>=t.length&&(e=t.length-1),nt(e,t[e])),L(t)};if(null!==B[M].contentModified)return void he({title:A("popup.closingTab"),msg:A("popup.closingNoSave"),cancelable:!0,confirmed:t});setTimeout(t,10)}},[nt,A,B,M]),Vt=(0,i.useCallback)(()=>{const e=()=>{L([]),nt(null)};St?he({title:A("popup.closingTab"),msg:A("popup.closingNoSave"),cancelable:!0,confirmed:e}):e()},[nt,A]),Ot=(0,i.useCallback)(()=>{const e=()=>{const e=B.filter((e,t)=>t===M);L(e),nt(0,e[0])};void 0!==B.filter((e,t)=>t!==M).find(e=>null!==e.contentModified)?he({title:A("popup.closingTab"),msg:A("popup.closingNoSave"),cancelable:!0,confirmed:e}):e()},[B,nt,A,M]),Kt=(0,i.useCallback)(e=>{const t=P.at(0);void 0!==t&&(t.key!==e.key?he({title:A("menu.delete"),msg:A(e.dir?"file.deleteFolder":"file.deleteFile",{name:e.title}),cancelable:!0,confirmed:()=>{we.Ww({path:e.key}).then(n=>{if(!n.success)return;const o=Ge.Uri.file(e.key),i=Ge.editor.getModel(o);null!==i&&i.dispose();const r=new Set;if(e.dir){const t=e=>{if(r.add(e.key),void 0!==e.children)for(let n=0;n<e.children.length;n++)t(e.children[n])};t(e)}const a=t=>{if(e.key===t.key)return"find";if(void 0!==t.children)for(let n=0;n<t.children.length;n++){const o=a(t.children[n]);if("find"===o)return t.children=t.children.filter(t=>t.key!==e.key),"stop";if("stop"===o)return"stop"}return"continue"};a(t);const s=B.filter(t=>""!==wt.relative(t.key,e.key)&&!r.has(t.key));s.length!==B.length&&(L(s),null!==M&&M>=s.length&&nt(s.length-1,s[s.length-1])),R([t])}).then(()=>{Ve(A("alert.deleted",{title:e.title}),"success")}).catch(()=>{Ve(A("alert.delete"),"error")})}}):Ve(A("alert.deleteRoot"),"info"))},[B,M,A,P,nt]),Ut=(0,i.useCallback)((e,t)=>{if(Mt)Ve(A("alert.waitForJob"),"info");else if("Cancel"!==e&&void 0!==t)switch(e){case"New":J(t);break;case"Upload":{const e=P.at(0);if(void 0===e)break;let{key:n,title:o}=t;t.dir||(n=wt.dirname(n),o=wt.basename(n),""===wt.relative(n,e.key)&&(o="Assets"));const i=B.find(e=>""===wt.relative(e.key,n));if(void 0!==i){const e=B.indexOf(i);nt(e,i);break}st(n,o,!0,void 0,!1);break}case"Download":case"Obfuscate":{const n=P.at(0);if(void 0===n)break;const{key:o,title:i}=t;if(!Et(o,n.key)){Ve(A("alert.downloadFailed"),"error");break}const r=e=>{const t=wt.relative(zt,e).replace("\\","/"),n=new XMLHttpRequest;n.open("GET",we.c2("/"+t),!0),n.responseType="blob",n.onload=function(){const e=window.URL.createObjectURL(n.response),t=document.createElement("a");t.href=e,t.download=i,t.click()},n.send()};if(t.dir){if(Bt){Ve(A("alert.downloadWait"),"info");break}Bt=!0,Ve(A("alert.downloadStart"),"info");const t=wt.join(zt,".download",i+".zip");we.yU({zipFile:t,path:o,obfuscated:"Obfuscate"===e}).then(e=>{Bt=!1,e.success?r(t):Ve(A("alert.downloadFailed"),"error")}).catch(()=>{Ve(A("alert.downloadFailed"),"error"),Bt=!1})}else r(o);break}case"Rename":{if(St){Ve(A("alert.renameSave"),"info");break}const e=P.at(0);if(void 0===e)break;if(e.key===t.key){Ve(A("alert.renameRoot"),"info");break}if(void 0!==t){const e=t.dir?"":wt.extname(t.title),n=t.dir?t.title:wt.basename(t.title,e),o=e.toLowerCase();fe({title:"file.rename",node:t,name:n,ext:o})}break}case"Delete":Kt(t);break;case"Unzip":{if(void 0===P.at(0))break;const{key:e,title:n}=t,o=wt.extname(e),i=wt.basename(e,o),r=wt.dirname(e);Ve(A("alert.startUnzip",{title:n}),"info"),we.$1({zipFile:e,path:wt.join(r,i)}).then(e=>{e.success?Ve(A("alert.doneUnzip",{title:n}),"success"):Ve(A("alert.failedUnzip",{title:n}),"error"),qe()});break}case"Declaration":{const{key:e}=t;we.LF({path:e}).then(t=>{t.success&&void 0!==t.content&&Promise.all([n.e(475),n.e(8959)]).then(n.bind(n,26031)).then(n=>{let{getDeclarationFile:o}=n;const i=o(e,t.content);if(null!==i){const t=Ge.Uri.file(i.fileName),n=Ge.editor.getModel(t);null!==n&&n.setValue(i.content),we.qU({file:i.fileName}).then(t=>{const n=t.success;if(we.M9({path:i.fileName,content:i.content}).then(t=>{t.success||Ve(A("alert.noDeclaration",{title:wt.basename(e)}),"error")}),n)st(i.fileName,wt.basename(i.fileName),!1,void 0,!1);else{const t=P.at(0);if(void 0===t)return;const n={key:i.fileName,title:wt.basename(i.fileName),dir:!1},o=t=>{if(t.key===e)return"find";if(t.children)for(let e=0;e<t.children.length;e++){const i=o(t.children[e]);if("find"===i){const o=t.children[e];let i=o;return o.dir?(void 0===o.children&&(o.children=[]),o.children.push(n)):(i=t,t.children.push(n)),void 0===E.find(e=>i.key===e)&&(E.push(i.key),z(E)),"stop"}if("stop"===i)return"stop"}return"continue"};"find"===o(t)&&(void 0===t.children&&(t.children=[]),t.children.push(n),void 0===E.find(e=>t.key===e)&&(E.push(t.key),z(E))),R([t]),V([i.fileName]),U(n);const r=B.length,a={key:i.fileName,title:wt.basename(i.fileName),folder:!1,content:i.content,contentModified:null,status:"normal",onMount:()=>{}};a.onMount=rt(a),L([...B,a]),nt(r,a)}}).catch(()=>{Ve(A("alert.noDeclaration",{title:wt.basename(e)}),"error")})}else Ve(A("alert.noDeclaration",{title:wt.basename(e)}),"error")})});break}case"Build":{const{key:e}=t;let o=!1;const i=async(e,t)=>{const i=t;if($e(e,!1))return;const r=wt.basename(e),a=wt.extname(e).toLowerCase(),s=wt.basename(e,a);if(".d"===wt.extname(s))return;const l=wt.dirname(e),c=wt.join(l,s+".lua"),d=B.find(e=>""===wt.relative(e.key,c));try{if(".wa"!==a||t)if(t&&".mod"===a){o=!0,w(!0);try{const t=await we.z6({path:e});t.success?we.G5({code:'Log "Info", "Built '.concat(r.replace(/[\\"]/g,"\\$&"),'"'),log:!1}):await we.G5({code:'Log "Error", "'.concat(t.message.replace(/[\\"]/g,"\\$&"),'"'),log:!1})}finally{w(!1)}}else if(t||".mod"!==a)if(".ts"!==a&&".tsx"!==a||e.toLocaleLowerCase().endsWith(".d.ts")){if(".yue"===a||".tl"===a||".xml"===a){const t=await we.jq({path:e});if(o=!0,t.success){if(i?we.G5({code:'Log "Info", "Built '.concat(r.replace(/[\\"]/g,"\\$&"),'"'),log:!1}):Ve(A("alert.build",{title:r}),"success"),void 0!==d){const e=void 0===t.resultCodes?"":t.resultCodes;d.content=e,setTimeout(()=>{const t=Ge.editor.getModel(Ge.Uri.file(c));t&&t.setValue(e)},10)}}else i?we.G5({code:'Log "Error", "Failed to build '.concat(r.replace(/[\\"]/g,"\\$&"),'"'),log:!1}):Ve(A("alert.failedCompile",{title:r}),"warning")}}else{o=!0;const t=await we.LF({path:e});if(t.success&&void 0!==t.content){if(/^[\s\n\r]*<\?xml/.test(t.content))return;const{transpileTypescript:o,addDiagnosticToLog:a}=await Promise.all([n.e(475),n.e(8959)]).then(n.bind(n,26031)),{luaCode:s,diagnostics:l}=await o(e,t.content);if(l.length>0)return a(e,l),void(i||Ve(A("alert.failedCompile",{title:r}),"warning"));if(void 0!==s){if(void 0!==d){d.content=s;const e=Ge.editor.getModel(Ge.Uri.file(c));e&&e.setValue(s)}(await we.M9({path:c,content:s})).success?i?we.G5({code:'Log "Info", "Built '.concat(r.replace(/[\\"]/g,"\\$&"),'"'),log:!1}):Ve(A("alert.build",{title:r}),"success"):i?we.G5({code:'Log "Error", "Failed to save '.concat(r.replace(/[\\"]/g,"\\$&"),'"'),log:!1}):Ve(A("alert.saveCurrent"),"error")}}}else{o=!0,w(!0);try{const t=await we.z6({path:e});t.success?Ve(A("alert.build",{title:r}),"success"):(Ve(t.message,"error",!0),await we.G5({code:'Log "Error", "'.concat(t.message.replace(/[\\"]/g,"\\$&"),'"'),log:!1}))}finally{w(!1)}}else{o=!0,w(!0);try{const t=await we.z6({path:e});t.success?Ve(A("alert.build",{title:r}),"success"):(Ve(t.message,"error",!0),await we.G5({code:'Log "Error", "'.concat(t.message.replace(/[\\"]/g,"\\$&"),'"'),log:!1}))}finally{w(!1)}}}catch(u){o=!0,console.error(u),i?we.G5({code:'Log "Error", "Failed to build '.concat(r.replace(/[\\"]/g,"\\$&"),'"'),log:!1}):Ve(A("alert.failedCompile",{title:r}),"warning")}};if(t.dir){const{title:e}=t;Ie({title:A("menu.build")+" "+e,stopOnClose:!1});(async()=>{if(Mt)return void Ve(A("alert.waitForJob"),"info");Mt=!0;const n=async e=>{if(void 0!==e.children)for(let t=0;t<e.children.length;t++)await n(e.children[t]);e.dir||await i(e.key,!0)};try{await n(t),await new Promise(e=>setTimeout(e,100)),we.G5({code:'Log "Info", "'.concat(A(o?"alert.buildDone":"alert.noBuild",{title:e}).replace(/[\\"]/g,"\\$&"),'"'),log:!1})}finally{Mt=!1}})()}else i(e,!1);break}case"View Compiled":{const{key:e,title:n}=t,o=wt.extname(e),i=wt.basename(e,o),r=wt.dirname(e),a=wt.join(r,i+".lua");we.LF({path:a}).then(e=>{e.success&&void 0!==e.content?st(a,i+".lua",!1,void 0,!0):Ve(A("alert.notGenerated",{title:n}),"warning")}).catch(()=>{Ve(A("alert.read",{title:i+".lua"}),"error")});break}case"Copy Path":{let e;e=Et(t.key,zt)?wt.relative(zt,t.key):wt.relative(Wt,t.key),navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(e).then(()=>{Ve(A("alert.copied",{title:t.title}),"success")}).catch(()=>{Ve(A("alert.copy"),"error")}):he({title:A("alert.tocopy",{title:t.title}),msg:e,selectable:!0,raw:!0});break}}},[$e,qe,A,B,Kt,P,st,E,rt,nt]),Gt=(0,i.useCallback)((e,t)=>we.p_({path:e}).then(n=>{if(n.success){const o=n.files.map(n=>[wt.join(e,n),wt.join(t,n)]);o.push([e,t]);return{newFiles:B.map(e=>(o.some(t=>t[0]===e.key&&(e.key=t[1],e.folder&&(e.title=wt.basename(e.key)),null!==e.contentModified&&(e.content=e.contentModified),!0)),e)),newExpanded:E.map(e=>{const t=o.find(t=>t[0]===e);return void 0!==t?t[1]:e})}}}),[E,B]),Yt=(0,i.useCallback)((e,t)=>{if(St)return void Ve(A("alert.movingNoSave"),"info");if($e(e.key,!0))return;if($e(t.key,!0))return;const n=P.at(0);if(void 0===n)return;let o=t.title,i=t.key;t.dir||(i=wt.dirname(t.key),o=""===wt.relative(i,n.key)?n.title:wt.basename(i)),""!==wt.relative(i,wt.dirname(e.key))&&he({title:A("popup.moving"),msg:A("popup.movingInfo",{from:e.title,to:o}),cancelable:!0,confirmed:()=>{const t=wt.join(i,wt.basename(e.key)),n=()=>we.$w({old:e.key,new:t}).then(t=>{if(t.success)return qe().then(()=>{Ve(A("alert.moved",{from:e.title,to:o}),"success")});Ve(A("alert.movingFailed",{from:e.title,to:o}),"error")});e.dir?Gt(e.key,t).then(e=>{void 0!==e&&n().then(()=>{L(e.newFiles),z(e.newExpanded),null!==M&&M<e.newFiles.length&&e.newFiles[M].key===t&&nt(M,e.newFiles[M])})}):n().then(()=>{const n=B.find(t=>""===wt.relative(t.key,e.key));void 0!==n&&(n.key=t,L(e=>[...e])),z(E.filter(t=>t!==e.key)),null!==M&&M<B.length&&B[M].key===t&&nt(M,B[M])})}})},[$e,E,B,Gt,qe,A,P,nt,M]),qt=(0,i.useCallback)((e,t,n)=>{const o=wt.join(e,t),i=B.filter(e=>""!==wt.relative(e.key,o));if(t.length!==i.length&&(L(i),M&&M>i.length)){const e=i.length>0?i.length-1:null;null===e?nt(e):nt(e,i[e])}n?qe().then(()=>{n&&st(o,t,!1)}):(jt=Date.now(),setTimeout(()=>{Date.now()-jt>=2e3&&qe()},2e3))},[M,qe,nt,B,st]),Ht=(e,t,n,o)=>{const i=wt.extname(e.key).toLowerCase();if(".yarn"!==i){switch(i){case".lua":case".tl":case".yue":case".xml":break;default:return}we.Sr({file:e.key,content:t}).then(t=>{let i="normal";const r=[];if(!t.success&&void 0!==t.info)for(let a=0;a<t.info.length;a++){const[s,l,c,d,u]=t.info[a];if(!wt.isAbsolute(l)||""!==wt.relative(l,e.key)){i="error";let e=Ge.MarkerSeverity.Info;switch(s){case"parsing":case"syntax":case"type":case"crash":i="error",e=Ge.MarkerSeverity.Error;break;case"warning":"error"!==i&&(i="warning",e=Ge.MarkerSeverity.Warning)}r.push({severity:e,message:l+": "+u,startLineNumber:1,startColumn:1,endLineNumber:1,endColumn:1});continue}let p=c,g=d,h=c,m=d;switch(0===c&&(p=1,h=1),0===d&&(g=n.getLineFirstNonWhitespaceColumn(c),m=n.getLineLastNonWhitespaceColumn(c)),s){case"parsing":case"syntax":case"type":i="error",r.push({severity:Ge.MarkerSeverity.Error,message:u,startLineNumber:p,startColumn:g,endLineNumber:h,endColumn:m});break;case"warning":"error"!==i&&(i="warning"),r.push({severity:Ge.MarkerSeverity.Warning,message:u,startLineNumber:p,startColumn:g,endLineNumber:h,endColumn:m});break;case"crash":i="error",void 0!==o?r.push({severity:Ge.MarkerSeverity.Error,message:"compiler crashes",startLineNumber:o.range.startLineNumber,startColumn:o.range.startColumn,endLineNumber:o.range.endLineNumber,endColumn:o.range.endColumn}):r.push({severity:Ge.MarkerSeverity.Error,message:"compiler crashes",startLineNumber:1,startColumn:1,endLineNumber:1,endColumn:1})}}e.status!==i&&(e.status=i,L(e=>[...e])),Ge.editor.setModelMarkers(n,n.getLanguageId(),r)}).catch(e=>{console.error("failed to check file, due to: ".concat(e))})}else we.vo({code:t}).then(t=>{let o="normal";const i=[];if(!t.success){o="error";const e=t.message;let r=t.line,a=t.column,s=t.line,l=t.column+1;0===r&&(r=1,s=1),a<=1&&(a=n.getLineFirstNonWhitespaceColumn(r),l=n.getLineLastNonWhitespaceColumn(r)),i.push({severity:Ge.MarkerSeverity.Error,message:e,startLineNumber:r,startColumn:a,endLineNumber:s,endColumn:l})}e.status!==o&&(e.status=o,L(e=>[...e])),Ge.editor.setModelMarkers(n,n.getLanguageId(),i)}).catch(e=>{console.error("failed to check yarn file, due to: ".concat(e))})},Jt=(0,i.useCallback)(()=>{if(De(!1),null!==M){const e=B.at(M);if(void 0!==e){const t=e.title;if(".md"===wt.extname(t).toLowerCase()){if(e.mdEditing=!0,void 0!==e.editor){const t=e.editor;setTimeout(()=>{t.focus()},100)}return void L([...B])}}}we.ds().then(e=>{e.success?(Ve(A("alert.stopped"),"success"),null!==Ee&&Ie(null)):Ve(A("alert.stopNone"),"info")}).catch(()=>{Ve(A("alert.stopFailed"),"error")})},[Ee,A,M,B]),Xt=(0,i.useCallback)((e,t)=>{if(Mt&&"View Log"!==e){let e=!1;if(null!==M){const t=B.at(M);void 0!==t&&(e=".md"===wt.extname(t.title).toLowerCase())}return void(e||Ve(A("alert.waitForJob"),"info"))}"Go to File"!==e?"View Log"!==e?Pt().then(n=>{if(n)switch(e){case"Run":case"Run This":return void pt(e,t);case"Stop":return void Jt()}}):null===Ee&&Ie({title:A("menu.viewLog"),stopOnClose:!1}):xe(!0)},[Ee,A,Jt,Pt,pt,B,M]),_t=(0,i.useCallback)(async()=>{if(null===M)return;if(ze)return void Qe(!0);if(Mt)return;Mt=!0;const e=B[M];try{const t=await gt(e,!0);L(e=>e.map(e=>{const n=t.find(t=>t.key===e.key);return void 0!==n?n:e}))}catch(t){console.error("failed to save current tab, due to: ".concat(t))}finally{Mt=!1}},[gt,ze,M,B]);(0,i.useEffect)(()=>{Te&&!ze&&(_t(),Qe(!1))},[Te,ze,_t]);const $t=(0,i.useCallback)(e=>{switch(e){case"Save":_t();break;case"SaveAll":Pt();break;case"Close":It();break;case"CloseAll":Vt();break;case"CloseOthers":Ot()}},[_t,Pt,It,Vt,Ot]),Zt=(0,i.useCallback)(e=>{let t=B.findIndex(t=>t.key===e);if(-1!==t&&null!==M){const e=M===t,n=()=>{const n=B.filter((e,n)=>n!==t);L(n),e?0===n.length?nt(null):(t>=n.length&&(t=n.length-1),nt(t,n[t])):t<M&&S(M-1)};if(null!==B[t].contentModified)return void he({title:A("popup.closingTab"),msg:A("popup.closingNoSave"),cancelable:!0,confirmed:n});setTimeout(n,10)}},[nt,A,B,M]);null!==G&&(Y(null),(e=>{if(!Oe&&(e.ctrlKey||e.altKey||e.metaKey))switch(e.key){case"N":case"n":if(!e.shiftKey)break;if(null===K){Ve(A("alert.newNoTarget"),"info");break}if($e(K.key,!0))break;J(K);break;case"D":case"d":if(!e.shiftKey)break;if(null===K){Ve(A("alert.deleteNoTarget"),"info");break}if($e(K.key,!0))break;Kt(K);break;case"S":case"s":e.shiftKey?Pt():_t();break;case"W":case"w":e.shiftKey?Vt():It();break;case"R":case"r":{const t=e.shiftKey;Xt(t?"Run This":"Run");break}case"P":case"p":xe(!0);break;case"Q":case"q":Jt();break;case".":null!==Ee?Ie(null):Xt("View Log");break;default:{const t=Number.parseInt(e.key);!Number.isNaN(t)&&t>=1&&t<=9&&t<=B.length&&nt(t-1);break}}})(G));const en=(0,i.useCallback)((e,t)=>{const n=wt.join(wt.dirname(t),...e.split("[\\/]")),o=wt.basename(n);st(n,o,!1)},[st]);if(ve){xe(!1);const e=P.at(0);if(void 0!==e){const t=[],{engineDev:n}=D.A,o=wt.join(Wt,"Script","Tools"),i=e=>{if(!e.dir){const i=Et(e.key,zt);let r=Et(e.key,o);r&&wt.dirname(e.key)!==o&&(r=!1),(n||i||r)&&t.push({title:e.title,fileKey:e.key,path:e.key.substring(i?zt.length+1:Wt.length+1)})}const{children:r}=e;if(void 0!==r)for(let t=0;t<r.length;t++)i(r[t])};i(e),je(t)}}const tn=(0,i.useCallback)(e=>{Ve(e,"error")},[]);Lt=()=>{const e={index:null!==M&&void 0!==M?M:0,files:B.map(e=>{const{key:t,title:n,mdEditing:o,yarnTextEditing:i,editor:r,readOnly:a}=e;let{position:s}=e;const{folder:l=!1}=e;var c;void 0===s&&void 0!==r&&(s=null!==(c=r.getPosition())&&void 0!==c?c:void 0);return{key:t,title:n,mdEditing:o,yarnTextEditing:i,position:s,readOnly:a,folder:l}})};Nt(e,Rt)||(Rt=e,we.Br({editingInfo:e.files.length>0?JSON.stringify(e):""}).catch(e=>{console.error("failed to save editing info, due to: ".concat(e))}))};const nn=(0,i.useCallback)(()=>{null!==Ee&&void 0!==Ee&&Ee.stopOnClose&&Jt(),Ie(null)},[Ee,Jt]),on=(0,i.useCallback)((e,t)=>{if($e(t,!1))return;const n=B.find(e=>e.key===t);if(void 0===n)return;let o="normal",i=0;for(const r of e)r.severity>i&&(i=r.severity);if(i>0)switch(i){case Ge.MarkerSeverity.Error:o="error";break;case Ge.MarkerSeverity.Warning:o="warning";break;default:o="normal"}if(void 0!==n.editor){const t=e.filter(e=>"tstl"!==e.owner&&"2497"!==e.code&&"2666"!==e.code);if(t.length!==e.length){const e=n.editor.getModel();e&&Ge.editor.setModelMarkers(e,e.getLanguageId(),t)}}n.status!==o&&(n.status=o,L([...B]))},[B,$e]),rn=(0,i.useCallback)(e=>{je(null),null!==e&&st(e.fileKey,e.title,!1)},[je,st]);return(0,Q.jsxs)(T.HK,{children:[(0,Q.jsx)(_.A,{maxWidth:"lg",open:null!==Ce,transitionDuration:0,slotProps:{transition:Qt},children:(0,Q.jsx)(Z.A,{children:null!==Ce?(0,Q.jsx)(He,{options:Ce,onClose:rn}):null})}),(0,Q.jsx)(vt,{openName:null===Ee?null:Ee.title,height:.9*Ne,onClose:nn}),(0,Q.jsxs)(_.A,{maxWidth:"lg",open:null!==ge,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",transitionDuration:0,slotProps:{transition:Qt},children:[(0,Q.jsx)($.A,{id:"alert-dialog-title",children:null===ge||void 0===ge?void 0:ge.title}),(0,Q.jsx)(I.K9,{skin:"dark",style:{height:"100%"},children:(0,Q.jsx)(Z.A,{children:(0,Q.jsx)(ee.A,{component:"span",id:"alert-dialog-description",children:null!==ge&&void 0!==ge&&ge.selectable?(0,Q.jsx)(te.A,{fullWidth:!0,hiddenLabel:!0,multiline:!0,variant:"outlined",id:"popupText",defaultValue:null===ge||void 0===ge?void 0:ge.msg,slotProps:{input:{readOnly:!0}},sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:T.Q1.Secondary}},onFocus:e=>e.target.setSelectionRange(0,e.target.value.length)}):null!==ge&&void 0!==ge&&ge.raw?(0,Q.jsx)("pre",{children:null===ge||void 0===ge?void 0:ge.msg}):null===ge||void 0===ge?void 0:ge.msg})})}),(0,Q.jsxs)(ne.A,{children:[(0,Q.jsx)(oe.A,{onClick:()=>{void 0!==(null===ge||void 0===ge?void 0:ge.confirmed)&&ge.confirmed(),he(null)},autoFocus:void 0===(null===ge||void 0===ge?void 0:ge.cancelable),children:A(void 0!==(null===ge||void 0===ge?void 0:ge.cancelable)?"action.confirm":"action.ok")}),void 0!==(null===ge||void 0===ge?void 0:ge.cancelable)?(0,Q.jsx)(oe.A,{onClick:()=>{he(null)},children:A("action.cancel")}):null]})]}),(0,Q.jsxs)(_.A,{open:null!==me,"aria-labelledby":"filename-dialog-title","aria-describedby":"filename-dialog-description",transitionDuration:0,slotProps:{transition:Qt},children:[(0,Q.jsx)($.A,{id:"filename-dialog-title",children:A(null!==(f=null===me||void 0===me?void 0:me.title)&&void 0!==f?f:"")}),(0,Q.jsx)(Z.A,{children:(0,Q.jsxs)(r.A,{display:"flex",flexDirection:"column",gap:2,children:[(0,Q.jsx)(te.A,{autoFocus:!0,label:null!==(y="file.new"===(null===me||void 0===me?void 0:me.title)?A("file.enterFile"):void 0)&&void 0!==y?y:"file.newFolder"===(null===me||void 0===me?void 0:me.title)?A("file.enterFolder"):void 0,defaultValue:null!==(b=null===me||void 0===me?void 0:me.name)&&void 0!==b?b:"",id:"filename-adornment",sx:{m:1,width:"25ch","& .MuiOutlinedInput-notchedOutline":{borderColor:T.Q1.Secondary}},slotProps:{input:{endAdornment:(0,Q.jsx)(ie.A,{position:"end",children:void 0===(null===me||void 0===me?void 0:me.ext)?void 0:".ts"!==me.ext&&".tsx"!==me.ext?".wa"===me.ext&&me.project?void 0:me.ext:(0,Q.jsxs)("div",{style:{color:T.Q1.Secondary},children:[me.ext,(0,Q.jsx)(c.A,{size:"small","aria-label":"toggle tsx",edge:"end",color:"primary",onClick:()=>{fe((0,o.A)((0,o.A)({},me),{},{ext:".ts"===me.ext?".tsx":".ts"}))},children:(0,Q.jsx)(N.$3b,{})})]})})}},onChange:e=>{me&&(me.name=e.target.value,fe(me))}}),".wa"===(null===me||void 0===me?void 0:me.ext)&&"file.new"===me.title?(0,Q.jsx)(re.A,{style:{marginLeft:5},label:A("file.project",{name:"Wa"}),control:(0,Q.jsx)(ae.A,{checked:null===me||void 0===me?void 0:me.project,onChange:e=>{if(null===me)return;const t=(0,o.A)((0,o.A)({},me),{},{project:e.target.checked});fe(t)}})}):null]})}),(0,Q.jsxs)(ne.A,{children:[(0,Q.jsx)(oe.A,{onClick:()=>{if(me&&void 0!==me.node){const e=me.node;if("file.rename"===me.title){const t=me.name+me.ext;if(t===e.title)return void fe(null);const n=e.key,o=wt.join(wt.dirname(e.key),t),i=()=>we.$w({old:n,new:o}).then(i=>{if(!i.success)return void Ve(A("alert.renameFailed"),"error");const r=Ge.Uri.file(n),a=Ge.editor.getModel(r);if(null!==a&&a.dispose(),e.dir)return void qe().then(()=>{Ve(A("alert.renamed",{oldFile:wt.basename(n),newFile:wt.basename(o)}),"success")});const s=B.find(e=>""===wt.relative(e.key,n));void 0!==s&&(s.key=o,s.title=t,L([...B]));const l=P.at(0);if(void 0===l)return;let c=null;const d=n=>{if(n.key===e.key)return n.key=o,n.title=t,c=n,!0;if(n.children)for(let e=0;e<n.children.length;e++)if(d(n.children[e]))return!0;return!1};d(l),R([l]),null!==c?(U(c),V([o])):(U(null),V([])),Ve(A("alert.renamed",{oldFile:wt.basename(n),newFile:wt.basename(o)}),"success")}).catch(()=>{Ve(A("alert.renameFailed"),"error")});e.dir?Gt(n,o).then(e=>{i().then(()=>{void 0!==e&&(L(e.newFiles),z(e.newExpanded),U(null),V([]))})}):(i(),U(null),V([]))}else{const t=e.dir?e.key:wt.dirname(e.key),{ext:n}=me,o=wt.join(t,me.name);if(".wa"===n&&me.project)return we.XX({path:o}).then(e=>{e.success?qe().then(()=>{const e=wt.join(o,"src","main.wa");st(e,"main.wa",!1,void 0,!1),w(!0),we.z6({path:e}).then(e=>{e.success||(Ve(e.message,"error",!0),we.G5({code:'Log "Error", "'.concat(e.message.replace(/[\\"]/g,"\\$&"),'"'),log:!1}))}).finally(()=>{w(!1)})}):(Ve(A("alert.newFailed"),"error"),we.G5({code:'Log "Error", "Failed to create Wa project, due to '.concat(e.message,'"'),log:!1}))}),void fe(null);const i=me.name+n,r=wt.join(t,i);let a,s="";switch(n){case".lua":s="-- @preview-file on clear\n\n",a={lineNumber:3,column:1};break;case".yue":s="-- @preview-file on clear\n_ENV = Dora\n\n",a={lineNumber:4,column:1};break;case".tsx":s="// @preview-file on clear nolog\nimport { React, toNode, useRef } from 'DoraX';\nimport {} from 'Dora';\n\n",a={lineNumber:5,column:1};break;case".ts":s="// @preview-file on clear\nimport {} from 'Dora';\n\n",a={lineNumber:4,column:1};break;case".xml":s="\x3c!-- @preview-file on clear nolog --\x3e\n<Dora>\n\t\n</Dora>\n",a={lineNumber:3,column:2};break;case".bl":s='{"blocks":{"blocks":[{"type":"comment_block","fields":{"NOTE":"@preview-file on clear"}}]}}';break;case".yarn":s="title: Start\ntags:\nposition: 50,50\ncolorID: 0\n---\nHello World!\n===\n"}const l="file.newFolder"===me.title;we.Jd({path:r,content:s,folder:l}).then(t=>{if(!t.success)return void Ve(A("alert.new".concat(t.message)),"error");const o=P.at(0);if(void 0===o)return;const c={key:r,title:i,dir:l},d=t=>{if(t.key===e.key)return"find";if(t.children)for(let e=0;e<t.children.length;e++){const n=d(t.children[e]);if("find"===n){const n=t.children[e];let o=n;return n.dir?(void 0===n.children&&(n.children=[]),n.children.push(c)):(o=t,t.children.push(c)),void 0===E.find(e=>o.key===e)&&(E.push(o.key),z([...E])),"stop"}if("stop"===n)return"stop"}return"continue"};"find"===d(o)&&(void 0===o.children&&(o.children=[]),o.children.push(c),void 0===E.find(e=>o.key===e)&&(E.push(o.key),z([...E]))),R([o]),V([r]),U(c);const u={key:r,title:i,folder:l,position:a,content:s,contentModified:null,status:"normal",onMount:()=>{}};".md"===n&&(u.mdEditing=!0),u.onMount=rt(u),L([...B,u]),nt(B.length,u)}).catch(()=>{Ve(A("alert.newFailed"),"error")})}}fe(null)},children:A("action.ok")}),(0,Q.jsx)(oe.A,{onClick:()=>{fe(null)},children:A("action.cancel")})]})]}),(0,Q.jsx)(Ae,{open:null!==H,onClose:e=>{let t=null;switch(e){case"Lua":t=".lua";break;case"Teal":t=".tl";break;case"YueScript":t=".yue";break;case"Dora XML":t=".xml";break;case"Markdown":t=".md";break;case"Yarn":t=".yarn";break;case"Visual Script":t=".vs";break;case"Blockly":t=".bl";break;case"Wa":t=".wa";break;case"Folder":t="";break;case"TypeScript":t=".tsx"}null!==t&&fe({title:""===t?"file.newFolder":"file.new",node:null!==H?H:void 0,name:"",ext:t}),J(null)}}),(0,Q.jsxs)(r.A,{sx:{display:"flex",width:"100%",height:"100%"},children:[(0,Q.jsx)(l.Ay,{}),(0,Q.jsx)(T.hw,{position:"fixed",open:C,drawerWidth:Me,isResizing:Be,children:(0,Q.jsxs)(s.A,{variant:"dense",sx:{backgroundColor:T.Q1.BackgroundDark,width:"100%",color:T.Q1.Primary,minHeight:48},children:[(0,Q.jsx)(c.A,{color:"inherit","aria-label":"open drawer",onClick:()=>{j(!C)},edge:"start",children:C?(0,Q.jsx)(d.A,{}):(0,Q.jsx)(u.A,{})}),(0,Q.jsx)(X,{index:M,items:B,onChange:ot,onMenuClick:$t,onTabClose:Zt})]})}),(0,Q.jsxs)(a.Ay,{sx:{width:Me,flexShrink:0,"& .MuiDrawer-paper":{width:Me,boxSizing:"border-box",borderRightColor:T.Q1.Line,borderRightWidth:.5}},variant:"persistent",anchor:"left",open:C,children:[(0,Q.jsx)("a",{href:D.A.locale.match(/^zh/)?"https://ippclub.atomgit.net/Dora-SSR/zh-Hans/docs/api/intro":"https://dora-ssr.net/docs/api/intro",target:"_blank",rel:"noreferrer",style:{paddingTop:8,paddingLeft:10},children:(0,Q.jsx)("img",{src:ke,alt:"logo",height:34})}),(0,Q.jsx)(T.wv,{}),(0,Q.jsx)(O,{selectedKeys:W,expandedKeys:E,treeData:P,onMenuClick:Ut,onSelect:ct,onExpand:dt,onDrop:Yt}),(0,Q.jsx)("div",{style:{position:"absolute",width:Tt,zIndex:1e3,top:0,right:0,bottom:0,cursor:"col-resize",backgroundColor:Be?T.Q1.Theme+"88":"transparent",transition:"background-color 0.3s"},onPointerDown:Se})]}),(0,Q.jsx)(Q.Fragment,{children:B.map((e,t)=>{var n;const o=e.folder?"":wt.extname(e.title);let r=null,a=!1,s=!1,l=!1,d=!1,u=!1;switch(o.toLowerCase()){case".lua":r="lua";break;case".tl":r="tl";break;case".yue":r="yue";break;case".ts":case".tsx":r="typescript";break;case".xml":r="xml";break;case".md":r="markdown";break;case".wa":r="wa";break;case".jpg":case".png":a=!0;break;case".skel":s=!0;break;case".yarn":l=!0,r="yarn";break;case".bl":u=!0;break;case".vs":d=!0;break;case"":r=null;break;default:r="txt"}const p="markdown"===r,g=p&&!e.mdEditing||l&&!e.yarnTextEditing,h=e.readOnly||$e(e.key,!1);let m;return m=Et(e.key,Wt)?Wt:zt,(0,Q.jsxs)(T.gZ,{open:C,hidden:M!==t,drawerWidth:Me,children:[(0,Q.jsx)(T.BE,{}),l&&!e.yarnTextEditing?(0,Q.jsxs)("div",{style:{display:"flex",position:"relative"},children:[(0,Q.jsx)(Ze,{title:e.key,defaultValue:e.content,width:Re,height:Ne,onLoad:t=>{e.yarnData=t},onChange:()=>{Xe({key:e.key,content:""})},onKeydown:e=>{Y(e)}}),(0,Q.jsx)("div",{hidden:h,style:{position:"absolute",left:"20px",bottom:"75px",zIndex:100},children:(0,Q.jsx)(se.A,{direction:"row",spacing:1,children:(0,Q.jsx)(q.A,{title:A("yarn.editCode"),children:(0,Q.jsx)(c.A,{onClick:()=>{if(e.editor){const n=e.editor.getModel();var t;if(n)null===(t=e.yarnData)||void 0===t||t.getJSONData().then(e=>{const t=_e(JSON.parse(e));setTimeout(()=>{n.pushStackElement(),n.pushEditOperations(null,[{text:t,range:n.getFullModelRange()}],()=>null)},500)})}e.yarnTextEditing=!0,e.yarnData=void 0,L([...B])},sx:{backgroundColor:"rgba(50, 50, 50, 0.7)",color:"rgba(255, 255, 255, 0.4)","&:hover":{backgroundColor:"rgba(70, 70, 70, 0.9)"}},children:(0,Q.jsx)(ft.A,{})})})})})]}):null,d?(0,Q.jsx)(et,{title:e.key,defaultValue:e.content,width:Re,height:Ne,onLoad:t=>{e.codeWireData=t},onChange:()=>{Xe({key:e.key,content:""})},onKeydown:e=>{Y(e)}},e.key):null,u?(0,Q.jsx)(xt,{width:Re,height:M===t?Ne:0,file:e.key,readOnly:h,initialJson:e.content,onSave:_t,onChange:(t,n)=>{Xe({key:e.key,content:t,blocklyCode:n});const o=wt.extname(e.key),i=wt.basename(e.key,o),r=wt.join(wt.dirname(e.key),i+".lua"),a=Ge.editor.getModel(Ge.Uri.file(r));a?a.setValue(n):Ge.editor.createModel(n,"lua",Ge.Uri.file(r))}}):null,p?(0,Q.jsx)("div",{style:{display:"flex",position:"relative"},children:(0,Q.jsxs)(I.K9,{skin:"dark",hidden:e.mdEditing,style:{height:Ne},children:[(0,Q.jsx)(kt,{fileKey:e.key,path:we.c2("/"+wt.relative(m,wt.dirname(e.key)).replace("\\","/")),content:null!==(n=e.contentModified)&&void 0!==n?n:e.content,onClick:en}),h?null:(0,Q.jsx)(se.A,{direction:"row",spacing:1,style:{position:"absolute",left:"20px",bottom:"20px",zIndex:100},children:(0,Q.jsx)(q.A,{title:A("markdown.editText"),children:(0,Q.jsx)(c.A,{onClick:()=>{e.mdEditing=!0,L([...B])},sx:{backgroundColor:"rgba(50, 50, 50, 0.7)",color:"rgba(255, 255, 255, 0.4)","&:hover":{backgroundColor:"rgba(70, 70, 70, 0.9)"}},children:(0,Q.jsx)(ft.A,{})})})})]})}):null,a?(0,Q.jsx)(I.K9,{skin:"dark",style:{height:Ne},children:(0,Q.jsxs)(le.A,{maxWidth:"lg",children:[(0,Q.jsx)(T.BE,{}),(0,Q.jsx)(Je.A,{src:we.c2("/"+wt.relative(m,e.key).replace("\\","/")),preview:!1})]})}):null,(()=>{if(s&&M===t){const t=wt.relative(m,e.key),n=wt.parse(t),o=wt.join(n.dir,n.name+".atlas");return(0,Q.jsx)(I.K9,{skin:"dark",style:{height:Ne},children:(0,Q.jsxs)(le.A,{maxWidth:"lg",children:[(0,Q.jsx)(T.BE,{}),(0,Q.jsx)(i.Suspense,{fallback:(0,Q.jsx)("div",{}),children:(0,Q.jsx)(At,{skelFile:t,atlasFile:o,onLoadFailed:tn})})]})})}return null})(),(()=>{if(r){const t=(0,Q.jsx)(Ft,{hidden:g,editingFile:e,width:Re,height:Ne,language:r,minimap:!Be,onMount:e.onMount,onModified:tt,onValidate:on,readOnly:h},e.key);return l?e.yarnTextEditing?(0,Q.jsxs)("div",{style:{display:"flex",position:"relative"},children:[t,(0,Q.jsx)("div",{hidden:h,style:{position:"absolute",left:"20px",bottom:"75px",zIndex:100},children:(0,Q.jsx)(se.A,{direction:"row",spacing:1,children:(0,Q.jsx)(q.A,{title:A("yarn.editVisual"),children:(0,Q.jsx)(c.A,{onClick:()=>{if(e.editor){const t=e.editor.getModel();if(t){const n=t.getValue();setTimeout(()=>{e.content=n,e.yarnTextEditing=!1,L([...B])},200)}}},sx:{backgroundColor:"rgba(50, 50, 50, 0.7)",color:"rgba(255, 255, 255, 0.4)","&:hover":{backgroundColor:"rgba(70, 70, 70, 0.9)"}},children:(0,Q.jsx)(yt.A,{})})})})})]}):(0,Q.jsx)("div",{style:{display:"flex",position:"relative"},children:t}):p?e.mdEditing?(0,Q.jsxs)("div",{style:{display:"flex",position:"relative"},children:[t,(0,Q.jsx)("div",{hidden:h,style:{position:"absolute",left:"20px",bottom:"20px",zIndex:100},children:(0,Q.jsx)(se.A,{direction:"row",spacing:1,children:(0,Q.jsx)(q.A,{title:A("markdown.view"),children:(0,Q.jsx)(c.A,{onClick:()=>{setTimeout(()=>{e.mdEditing=!1,L([...B])},200)},sx:{backgroundColor:"rgba(50, 50, 50, 0.7)",color:"rgba(255, 255, 255, 0.4)","&:hover":{backgroundColor:"rgba(70, 70, 70, 0.9)"}},children:(0,Q.jsx)(bt.A,{})})})})})]}):(0,Q.jsx)("div",{style:{display:"flex",position:"relative"},children:t}):t}if(e.folder){if(void 0===P.at(0))return null;let t;return Et(e.key,Wt)?(t=wt.relative(m,e.key),t=wt.join(A("tree.builtin"),t)):(t=wt.relative(m,e.key),t=wt.join(A("tree.assets"),t)),(0,Q.jsxs)(I.K9,{skin:"dark",style:{height:Ne},children:[(0,Q.jsx)(T.BE,{}),(0,Q.jsx)(Ke,{onUploaded:qt,title:t+wt.sep,path:e.key})]},e.key)}return null})()]},e.key)})}),B.length>0?null:(0,Q.jsx)(ut,{}),(0,Q.jsx)("div",{style:{position:"fixed",left:Le.width-Re,bottom:0,width:Re,zIndex:998,transition:"all 0.2s"},hidden:!Fe,children:(0,Q.jsx)(ht,{height:.3*Ne})}),(0,Q.jsxs)("div",{style:{zIndex:1200},children:[(0,Q.jsx)(T.ED,{width:Re,onClick:Xt}),(0,Q.jsx)(T.mr,{children:(0,Q.jsx)(Ue.A,{children:k.map(e=>(0,Q.jsx)(ce.A,{timeout:"auto",children:(0,Q.jsxs)(de.A,{variant:"filled",onClose:()=>{const t=k.filter(t=>t.key!==e.key);v(t)},severity:e.type,color:e.type,style:{margin:5},children:[e.msg,e.openLog?(0,Q.jsxs)(Q.Fragment,{children:["\u2003[",(0,Q.jsx)(ue.A,{color:"inherit",onClick:()=>Xt("View Log"),children:A("menu.viewLog")}),"]"]}):null]})},e.key))})})]}),(0,Q.jsx)(mt.A,{open:Oe,disableAutoFocus:!0,disableEnforceFocus:!0,disablePortal:!0,disableScrollLock:!0,disableEscapeKeyDown:!0,hideBackdrop:!1,style:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.7)"},children:(0,Q.jsxs)(r.A,{sx:{backgroundColor:T.Q1.BackgroundDark,border:"1px solid ".concat(T.Q1.Line),borderRadius:1,p:4,textAlign:"center",color:T.Q1.Primary},children:[(0,Q.jsx)(pe.A,{variant:"h6",component:"div",gutterBottom:!0,children:A("alert.disconnected")}),(0,Q.jsx)(pe.A,{variant:"body2",color:"text.secondary",children:A("alert.reconnecting")})]})})]}),(0,Q.jsx)(r.A,{sx:{pointerEvents:"none",position:"fixed",left:(C?Me:0)+20,bottom:20,zIndex:1200,opacity:x?1:0,transition:"opacity 0.5s ease-in-out 0.5s",backgroundColor:"rgba(15, 15, 15, 0.7)",padding:"8px 16px",borderRadius:"4px",animation:x?"blink 1.5s infinite":"none","@keyframes blink":{"0%":{opacity:.7},"50%":{opacity:1},"100%":{opacity:.7}}},children:(0,Q.jsx)(pe.A,{sx:{color:"white"},children:A("alert.saving")})})]})}},13450:(e,t,n)=>{n.d(t,{BE:()=>L,ED:()=>P,HK:()=>j,Q1:()=>v,gZ:()=>M,hw:()=>B,mr:()=>S,wv:()=>C});var o=n(89379),i=n(96195),r=n(27532),a=n(35481),s=n(97228),l=n(53744),c=n(55884),d=n(82161),u=n(10614),p=n(61106),g=n(71500),h=n(24607),m=n(29949),f=n(42976),y=n(9950),b=n(55030),A=n(84765),k=n(44414);let v;var x;(x=v||(v={})).Background="#1f1f1f",x.BackgroundDark="#181818",x.Primary="#ccc",x.Secondary="#ccca",x.TextPrimary="#eee",x.TextSecondary="#eee8",x.Theme="#fac03d",x.Line="#ffffff20",x.Error="#f44336",x.Warning="#ff9800",x.Info="#abb85d";const w=(0,a.A)({palette:{background:{default:v.Background,paper:v.BackgroundDark},primary:{main:v.Primary},secondary:{main:v.Secondary},text:{primary:v.TextPrimary,secondary:v.TextSecondary},action:{hover:v.Theme+"66",focus:v.Theme+"44",active:v.Theme+"22"}}}),C=()=>(0,k.jsx)(c.A,{style:{backgroundColor:v.Line}}),j=e=>(0,k.jsx)(r.A,{theme:w,children:e.children}),M=(0,i.Ay)("main",{shouldForwardProp:e=>"open"!==e&&"drawerWidth"!==e})(e=>{let{theme:t,open:n,drawerWidth:i}=e;return(0,o.A)({flexGrow:1,padding:t.spacing(0),transition:t.transitions.create("margin",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),marginLeft:"-".concat(i,"px")},n&&{transition:t.transitions.create("margin",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen}),marginLeft:0})}),S=(0,i.Ay)(l.A)(e=>{let{theme:t}=e;return{zIndex:999,width:"fit-content",top:55,flexGrow:1,position:"fixed",padding:t.spacing(0),transition:t.transitions.create("right",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),right:5}}),B=(0,i.Ay)(s.A,{shouldForwardProp:e=>"open"!==e&&"drawerWidth"!==e&&"isResizing"!==e})(e=>{let{theme:t,open:n,drawerWidth:i,isResizing:r}=e;return(0,o.A)({zIndex:2,transition:r?void 0:t.transitions.create(["width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen})},n&&{width:"calc(100% - ".concat(i,"px)"),marginLeft:"".concat(i,"px"),transition:r?void 0:t.transitions.create(["width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})})}),L=(0,i.Ay)("div")(e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",padding:t.spacing(0),minHeight:48,justifyContent:"flex-end"}}),P=(0,y.memo)(e=>{const[t,n]=(0,y.useState)(!1),[o,i]=(0,y.useState)(null),[r,a]=(0,y.useState)(!1),{t:s}=(0,b.Bd)(),l=t=>()=>{n(!1),void 0!==t&&e.onClick(t),setTimeout(()=>{a(!1)},500)},c=e=>{r||(n(!0),i(e.currentTarget),a(!0))};return(0,k.jsxs)(d.A,{style:{backgroundColor:"#0000",width:"65px",height:"65px",color:v.Primary,bottom:0,right:.1*e.width,flexGrow:1,position:"fixed"},children:[(0,k.jsxs)(f.j,{keepMounted:!0,anchorOrigin:{vertical:"bottom",horizontal:"right"},anchorEl:o,autoFocus:!1,open:t,onClose:l(),children:[A.A.version?(0,k.jsx)("p",{style:{textAlign:"center",opacity:.6,fontSize:"12px",margin:"5px"},children:s("menu.version",{version:A.A.version})}):null,(0,k.jsxs)(f.m,{onClick:l("Go to File"),children:[(0,k.jsx)(u.A,{children:(0,k.jsx)(m.YQq,{})}),(0,k.jsx)(p.A,{primary:s("menu.goToFile")}),(0,k.jsx)("div",{style:{fontSize:10,color:v.TextSecondary},children:"Mod+P"})]}),(0,k.jsxs)(f.m,{onClick:l("View Log"),children:[(0,k.jsx)(u.A,{children:(0,k.jsx)(m.uFL,{})}),(0,k.jsx)(p.A,{primary:s("menu.viewLog")}),(0,k.jsx)("div",{style:{fontSize:10,color:v.TextSecondary},children:"Mod+."})]}),(0,k.jsxs)(f.m,{onClick:l("Stop"),children:[(0,k.jsx)(u.A,{children:(0,k.jsx)(m.wO6,{})}),(0,k.jsx)(p.A,{primary:s("menu.stop")}),(0,k.jsx)("div",{style:{fontSize:10,color:v.TextSecondary},children:"Mod+Q"})]}),(0,k.jsxs)(f.m,{onClick:l("Run This"),children:[(0,k.jsx)(u.A,{children:(0,k.jsx)(m.t2t,{})}),(0,k.jsx)(p.A,{primary:s("menu.runThis")}),(0,k.jsx)("div",{style:{fontSize:10,color:v.TextSecondary},children:"Mod+Shift+R"})]}),(0,k.jsxs)(f.m,{onClick:l("Run"),children:[(0,k.jsx)(u.A,{children:(0,k.jsx)(m.qWs,{})}),(0,k.jsx)(p.A,{primary:s("menu.run")}),(0,k.jsx)("div",{style:{fontSize:10,color:v.TextSecondary},children:"Mod+R"})]})]}),(0,k.jsx)(g.A,{color:"secondary","aria-label":"execute",onClick:c,onMouseEnter:c,edge:"start",children:(0,k.jsx)(h.A,{fontSize:"medium"})})]})})},42976:(e,t,n)=>{n.d(t,{j:()=>c,m:()=>d});var o=n(89379),i=n(96195),r=n(80550),a=n(94837),s=n(13450),l=n(44414);const c=(0,i.Ay)(e=>(0,l.jsx)(r.A,(0,o.A)({anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},e)))(e=>{let{theme:t}=e;return{"& .MuiPaper-root":{borderRadius:6,marginTop:t.spacing(1),minWidth:100,backgroundColor:s.Q1.Background,border:"1px solid ".concat(s.Q1.Line),"& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:20},"& .MuiListItemIcon-root":{color:s.Q1.Primary},"& .MuiListItemText-root":{marginRight:t.spacing(1.5)}}}}});function d(e){return(0,l.jsx)(a.A,(0,o.A)({disableRipple:!0},e))}}}]);