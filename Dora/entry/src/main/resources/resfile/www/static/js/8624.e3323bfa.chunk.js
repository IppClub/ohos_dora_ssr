(self.webpackChunkdora_dora=self.webpackChunkdora_dora||[]).push([[533,8624],{5890:(e,t,n)=>{var o={"./simpleWorker":54247,"./simpleWorker.js":54247,"monaco-editor/esm/vs/base/common/worker/simpleWorker":54247,"monaco-editor/esm/vs/base/common/worker/simpleWorker.js":54247};function i(e){return Promise.resolve().then((()=>{if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n(o[e])}))}i.keys=()=>Object.keys(o),i.id=5890,e.exports=i},9204:(e,t,n)=>{var o={"./editorBaseApi":[63757],"./editorBaseApi.js":[63757],"./editorSimpleWorker":[90341],"./editorSimpleWorker.js":[90341],"./editorWorker":[762],"./editorWorker.js":[762],"./editorWorkerHost":[66208],"./editorWorkerHost.js":[66208],"./findSectionHeaders":[4105],"./findSectionHeaders.js":[4105],"./getIconClasses":[32978],"./getIconClasses.js":[32978],"./languageFeatureDebounce":[78674],"./languageFeatureDebounce.js":[78674],"./languageFeatures":[30412],"./languageFeatures.js":[30412],"./languageFeaturesService":[77131],"./languageFeaturesService.js":[77131],"./languageService":[54600],"./languageService.js":[54600],"./languagesAssociations":[61826],"./languagesAssociations.js":[61826],"./languagesRegistry":[44941],"./languagesRegistry.js":[44941],"./markerDecorations":[84324],"./markerDecorations.js":[84324],"./markerDecorationsService":[20445],"./markerDecorationsService.js":[20445],"./model":[47356],"./model.js":[47356],"./modelService":[66837],"./modelService.js":[66837],"./resolverService":[49104],"./resolverService.js":[49104],"./semanticTokensDto":[83946],"./semanticTokensDto.js":[83946],"./semanticTokensProviderStyling":[62579],"./semanticTokensProviderStyling.js":[62579],"./semanticTokensStyling":[15805],"./semanticTokensStyling.js":[15805],"./semanticTokensStylingService":[81706],"./semanticTokensStylingService.js":[81706],"./textModelSync/textModelSync.impl":[9067],"./textModelSync/textModelSync.impl.js":[9067],"./textModelSync/textModelSync.protocol":[42262,2262],"./textModelSync/textModelSync.protocol.js":[42262,2262],"./textResourceConfiguration":[58998],"./textResourceConfiguration.js":[58998],"./treeSitterParserService":[74986],"./treeSitterParserService.js":[74986],"./treeViewsDnd":[22709],"./treeViewsDnd.js":[22709],"./treeViewsDndService":[56098],"./treeViewsDndService.js":[56098],"./unicodeTextModelHighlighter":[29421],"./unicodeTextModelHighlighter.js":[29421],"monaco-editor/esm/vs/editor/common/services/editorBaseApi":[63757],"monaco-editor/esm/vs/editor/common/services/editorBaseApi.js":[63757],"monaco-editor/esm/vs/editor/common/services/editorSimpleWorker":[90341],"monaco-editor/esm/vs/editor/common/services/editorSimpleWorker.js":[90341],"monaco-editor/esm/vs/editor/common/services/editorWorker":[762],"monaco-editor/esm/vs/editor/common/services/editorWorker.js":[762],"monaco-editor/esm/vs/editor/common/services/editorWorkerHost":[66208],"monaco-editor/esm/vs/editor/common/services/editorWorkerHost.js":[66208],"monaco-editor/esm/vs/editor/common/services/findSectionHeaders":[4105],"monaco-editor/esm/vs/editor/common/services/findSectionHeaders.js":[4105],"monaco-editor/esm/vs/editor/common/services/getIconClasses":[32978],"monaco-editor/esm/vs/editor/common/services/getIconClasses.js":[32978],"monaco-editor/esm/vs/editor/common/services/languageFeatureDebounce":[78674],"monaco-editor/esm/vs/editor/common/services/languageFeatureDebounce.js":[78674],"monaco-editor/esm/vs/editor/common/services/languageFeatures":[30412],"monaco-editor/esm/vs/editor/common/services/languageFeatures.js":[30412],"monaco-editor/esm/vs/editor/common/services/languageFeaturesService":[77131],"monaco-editor/esm/vs/editor/common/services/languageFeaturesService.js":[77131],"monaco-editor/esm/vs/editor/common/services/languageService":[54600],"monaco-editor/esm/vs/editor/common/services/languageService.js":[54600],"monaco-editor/esm/vs/editor/common/services/languagesAssociations":[61826],"monaco-editor/esm/vs/editor/common/services/languagesAssociations.js":[61826],"monaco-editor/esm/vs/editor/common/services/languagesRegistry":[44941],"monaco-editor/esm/vs/editor/common/services/languagesRegistry.js":[44941],"monaco-editor/esm/vs/editor/common/services/markerDecorations":[84324],"monaco-editor/esm/vs/editor/common/services/markerDecorations.js":[84324],"monaco-editor/esm/vs/editor/common/services/markerDecorationsService":[20445],"monaco-editor/esm/vs/editor/common/services/markerDecorationsService.js":[20445],"monaco-editor/esm/vs/editor/common/services/model":[47356],"monaco-editor/esm/vs/editor/common/services/model.js":[47356],"monaco-editor/esm/vs/editor/common/services/modelService":[66837],"monaco-editor/esm/vs/editor/common/services/modelService.js":[66837],"monaco-editor/esm/vs/editor/common/services/resolverService":[49104],"monaco-editor/esm/vs/editor/common/services/resolverService.js":[49104],"monaco-editor/esm/vs/editor/common/services/semanticTokensDto":[83946],"monaco-editor/esm/vs/editor/common/services/semanticTokensDto.js":[83946],"monaco-editor/esm/vs/editor/common/services/semanticTokensProviderStyling":[62579],"monaco-editor/esm/vs/editor/common/services/semanticTokensProviderStyling.js":[62579],"monaco-editor/esm/vs/editor/common/services/semanticTokensStyling":[15805],"monaco-editor/esm/vs/editor/common/services/semanticTokensStyling.js":[15805],"monaco-editor/esm/vs/editor/common/services/semanticTokensStylingService":[81706],"monaco-editor/esm/vs/editor/common/services/semanticTokensStylingService.js":[81706],"monaco-editor/esm/vs/editor/common/services/textModelSync/textModelSync.impl":[9067],"monaco-editor/esm/vs/editor/common/services/textModelSync/textModelSync.impl.js":[9067],"monaco-editor/esm/vs/editor/common/services/textModelSync/textModelSync.protocol":[42262,2262],"monaco-editor/esm/vs/editor/common/services/textModelSync/textModelSync.protocol.js":[42262,2262],"monaco-editor/esm/vs/editor/common/services/textResourceConfiguration":[58998],"monaco-editor/esm/vs/editor/common/services/textResourceConfiguration.js":[58998],"monaco-editor/esm/vs/editor/common/services/treeSitterParserService":[74986],"monaco-editor/esm/vs/editor/common/services/treeSitterParserService.js":[74986],"monaco-editor/esm/vs/editor/common/services/treeViewsDnd":[22709],"monaco-editor/esm/vs/editor/common/services/treeViewsDnd.js":[22709],"monaco-editor/esm/vs/editor/common/services/treeViewsDndService":[56098],"monaco-editor/esm/vs/editor/common/services/treeViewsDndService.js":[56098],"monaco-editor/esm/vs/editor/common/services/unicodeTextModelHighlighter":[29421],"monaco-editor/esm/vs/editor/common/services/unicodeTextModelHighlighter.js":[29421]};function i(e){if(!n.o(o,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=o[e],i=t[0];return Promise.all(t.slice(1).map(n.e)).then((()=>n(i)))}i.keys=()=>Object.keys(o),i.id=9204,e.exports=i},13450:(e,t,n)=>{"use strict";n.d(t,{BE:()=>B,ED:()=>L,HK:()=>C,Q1:()=>b,gZ:()=>j,hw:()=>M,mr:()=>S,wv:()=>w});var o=n(580),i=n(96195),r=n(35481),s=n(97228),a=n(53744),l=n(55884),c=n(82161),d=n(10614),u=n(61106),m=n(71500),g=n(24607),h=n(29949),p=n(42976),f=n(9950),v=n(67818),k=n(84765),y=n(44414);let b;var A;(A=b||(b={})).Background="#1f1f1f",A.BackgroundDark="#181818",A.Primary="#ccc",A.Secondary="#ccca",A.TextPrimary="#eee",A.TextSecondary="#eee8",A.Theme="#fac03d",A.Line="#ffffff20",A.Error="#f44336",A.Warning="#ff9800",A.Info="#abb85d";const x=(0,r.A)({palette:{background:{default:b.Background,paper:b.BackgroundDark},primary:{main:b.Primary},secondary:{main:b.Secondary},text:{primary:b.TextPrimary,secondary:b.TextSecondary},action:{hover:b.Theme+"66",focus:b.Theme+"44",active:b.Theme+"22"}}}),w=()=>(0,y.jsx)(l.A,{style:{backgroundColor:b.Line}}),C=e=>(0,y.jsx)(o.A,{theme:x,children:e.children}),j=(0,i.Ay)("main",{shouldForwardProp:e=>"open"!==e&&"drawerWidth"!==e})((e=>{let{theme:t,open:n,drawerWidth:o}=e;return{flexGrow:1,padding:t.spacing(0),transition:t.transitions.create("margin",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),marginLeft:`-${o}px`,...n&&{transition:t.transitions.create("margin",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen}),marginLeft:0}}})),S=(0,i.Ay)(a.A)((e=>{let{theme:t}=e;return{zIndex:999,width:"fit-content",top:55,flexGrow:1,position:"fixed",padding:t.spacing(0),transition:t.transitions.create("right",{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),right:5}})),M=(0,i.Ay)(s.A,{shouldForwardProp:e=>"open"!==e&&"drawerWidth"!==e&&"isResizing"!==e})((e=>{let{theme:t,open:n,drawerWidth:o,isResizing:i}=e;return{zIndex:2,transition:i?void 0:t.transitions.create(["width"],{easing:t.transitions.easing.sharp,duration:t.transitions.duration.leavingScreen}),...n&&{width:`calc(100% - ${o}px)`,marginLeft:`${o}px`,transition:i?void 0:t.transitions.create(["width"],{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.enteringScreen})}}})),B=(0,i.Ay)("div")((e=>{let{theme:t}=e;return{display:"flex",alignItems:"center",padding:t.spacing(0),minHeight:48,justifyContent:"flex-end"}})),L=(0,f.memo)((e=>{const[t,n]=(0,f.useState)(!1),[o,i]=(0,f.useState)(null),[r,s]=(0,f.useState)(!1),{t:a}=(0,v.Bd)(),l=t=>()=>{n(!1),void 0!==t&&e.onClick(t),setTimeout((()=>{s(!1)}),500)},A=e=>{r||(n(!0),i(e.currentTarget),s(!0))};return(0,y.jsxs)(c.A,{style:{backgroundColor:"#0000",width:"65px",height:"65px",color:b.Primary,bottom:0,right:.1*e.width,flexGrow:1,position:"fixed"},children:[(0,y.jsxs)(p.j,{keepMounted:!0,anchorOrigin:{vertical:"bottom",horizontal:"right"},anchorEl:o,autoFocus:!1,open:t,onClose:l(),children:[k.A.version?(0,y.jsx)("p",{style:{textAlign:"center",opacity:.6,fontSize:"12px",margin:"5px"},children:a("menu.version",{version:k.A.version})}):null,(0,y.jsxs)(p.m,{onClick:l("Go to File"),children:[(0,y.jsx)(d.A,{children:(0,y.jsx)(h.YQq,{})}),(0,y.jsx)(u.A,{primary:a("menu.goToFile")}),(0,y.jsx)("div",{style:{fontSize:10,color:b.TextSecondary},children:"Mod+P"})]}),(0,y.jsxs)(p.m,{onClick:l("View Log"),children:[(0,y.jsx)(d.A,{children:(0,y.jsx)(h.uFL,{})}),(0,y.jsx)(u.A,{primary:a("menu.viewLog")}),(0,y.jsx)("div",{style:{fontSize:10,color:b.TextSecondary},children:"Mod+."})]}),(0,y.jsxs)(p.m,{onClick:l("Stop"),children:[(0,y.jsx)(d.A,{children:(0,y.jsx)(h.wO6,{})}),(0,y.jsx)(u.A,{primary:a("menu.stop")}),(0,y.jsx)("div",{style:{fontSize:10,color:b.TextSecondary},children:"Mod+Q"})]}),(0,y.jsxs)(p.m,{onClick:l("Run This"),children:[(0,y.jsx)(d.A,{children:(0,y.jsx)(h.t2t,{})}),(0,y.jsx)(u.A,{primary:a("menu.runThis")}),(0,y.jsx)("div",{style:{fontSize:10,color:b.TextSecondary},children:"Mod+Shift+R"})]}),(0,y.jsxs)(p.m,{onClick:l("Run"),children:[(0,y.jsx)(d.A,{children:(0,y.jsx)(h.qWs,{})}),(0,y.jsx)(u.A,{primary:a("menu.run")}),(0,y.jsx)("div",{style:{fontSize:10,color:b.TextSecondary},children:"Mod+R"})]})]}),(0,y.jsx)(m.A,{color:"secondary","aria-label":"execute",onClick:A,onMouseEnter:A,edge:"start",children:(0,y.jsx)(g.A,{fontSize:"medium"})})]})}))},16625:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>yt});var o=n(9950),i=n(49702),r=n(15209),s=n(82161),a=n(82951),l=n(71500),c=n(3585),d=n(27321),u=n(35023),m=n(42976),g=n(10614),h=n(61106),p=n(50861),f=n(38310),v=n(42935),k=n(72350),y=n(21642),b=n(69945),A=n(81608),x=n(33614);const w=n.p+"static/media/lua.c0c4698d9d5e5850e917.png",C=n.p+"static/media/yuescript.0fcbcaecb31b4bef4816.png",j=n.p+"static/media/teal.8c9fafc40e0507aaf61c.png",S="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAABCFBMVEUAAAAwcL8wdsYwesUyeMQyd8YxecYxeMYxd8UxeMYxeMUwd8Mwd8cyeMcweccwdcQyeMUyeMcxd8Uwd78xeMQyd8YzesUxd8YwdsYwdb8weMQweMQwd8UxecUweMcwe8UwecQwd8Qwd8VLiM1YkdB+qtuYu+KxzOq+1e3L3fHl7vjy9/v///9yodhlmdQ+gMrY5fWlw+eLs99Kic1+qtyYu+NyothKiM1Lic1XktClxOZ+q9vm7vfZ5vTM3fC/1eylw+ZxothkmtTY5vSyzOmYvOKyzOpXkdFYktC/1O6Ls96yzemLtN6/1e0weMUwdsIweMYwdcowcM8weMYwecYweMYwd8Ywd8WUT++ZAAAAWHRSTlMAEFBvkK/P3+//v0Agn18wn3/PIKCPb+9wMGCQgM+fT3CQsP////////////////////////////////////////////////////////+/UKAwEJDP36/P817qwgAACx1JREFUeAHs2dVh5UAMhWEZZc1l8244/fcYegkz5/xfCQNCe6ksL8qq9ibwozWeUlksMvtIy2LlgV/Fq/XGPsSi9MCv5NuFvVO2a+MXg687e7tN38Rvh21nb9Ol0MUTyIYQxhMYm8Af4mvx6I/U8f21TTPZX9xgL9HVgT/KO3tW5wHhF/CvCfxh04b75wVw/7yAh3Xcv4Cpo/6jEnyQByTUmT1kCChPhMaQgZkCkELwjhRCkOyO/yEFs3YHiCmzm/pQRifQhRx02gEASTwAYKMdALBHAKARUJ4BYF97C4gDu7IIUVhol4DY084AcLuwCVlY0gOwE6xCFg61SwC4WRbCkNkihOHIjkMYZjsJYdizFMJwqv0AcGAewuDWhDBMFtLO2aUDAQAAAAAg/9dGaNAAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzRAAzTAAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA3QAA0wQAM0QAM0QAM0QAM0QAM0QAM0QAM0QAM0QNi5r8XGcSQKw968dbk5x5ZFsXBMyIS0QwXTEi1Pnnn/x9nR5rxuAgwlnP+ur/E1CqBoJu7d4v5+WRSrUlUd/pZ+VVmWRbFc3j9UC08At5Zf3C+LteKtabl6rKvFDQBg7x7qlaJn69XyYUEAZqvqlSI6Vz4+BGsA2KIuHdKlxSbYBAB7SWy+enRInxYPBgAQQFU4DNZqE+YMgAAWW4eBKzd+pgAI4A8lRqnw8wNAAH7rMFYfEMCApV9+AjBVxPLnCYAAtg7IFgABVApkC4AAmhWQLwACqB3yBUAATQnkC4AAKoeMARDAFsgXAAH4FTIGQACNImMABNAoMgZAADuHjAEQwM4hYwAE0DhkDIAAGkXGAAigUeQMgADWyBkAAeyRMwACqJEzAAJoXNYACECRMwAC2CJnAATQgACyBqAEkDWAAwggawBKAFkD2IIAcgbQKAFkDWCLtB2PT+2fOx4NACAARZrc86k+By//lA/deXlqnwhg+oa8AjydzkH+Z7vzqXUzBEAAL4itrb28rd3hovMCQAAN4nKvXt6r5vDs5gOAAD5ETG0nfeouSgCjl/4IqGe5FmHALoAQV4f3rg2RyX/qI/Rv7yWq88UwgMiaHgBkiJbom3YSXXPQaQEQQImeaZAkHZ4mBEAAHj1be0lV104GgAAq9Eu9JKxrJwJAAMuI/T9lB50EAAGU6NVGknfQCQAQgKJPhQxQcyGA0QF49CrIIB2UAEYGUMVsAOlrPAGMC+CMPn0s00UA018CVG4FAAHs4ycAAVgG8Al6VN8MAAIo0aPzzQAggCN61N0GAAIgAAJwBJA3APAMQAC8BRAAnwMQAJ8EEsCb67IGwFsATlkD4HMAOE8AWQPAPmMA/C3g2i5fAPw18Jr6fAHwfYBrxU0AIIBP0bftLQAggAPsCyCAiD6CfQEEEJGHfQEEENMREa08AVgHcEFMGgjAOIBPEVdNALYBfITIykAAlgGIQ2SuJgDLAC6ITgMB2AVwQIKKQABWAXgkaRsIwCYAKZEk3RCATQCfArYJEEBc3iEdgUAA5gDIHunSbSAAawA6xDT9jYAAYiuRtqIiAFMAOqSu3Mh4EUD6LcDUeZAAouswRMVC0kYABraACSYBAcS3w0BpEQjAAADZY7CKav4ACMArrhmYBAQw7jnQwM8EBJCkPYwSIAADQyA9AQJIXuNgkwABJOoAmCRAAKl6hUkCBJCszzBCWs0VAAFIiTEqwkwBEIB/wShtvcRHAIYFxB8FCMC2gPg5QADGBbhaIiIA43eB+E2AACw+D4g/CRDACNUYq+0cARCA7BQjpWGGAAhAmpfRBOwkMgKwfRBAPUcABCCdGjkIEMBANReM1F5iIoDBOijGqZglAAKQZo9xWnnpHQEMWaOz3wMIwNQciBBAANPUvM77JEgAN3If2BJAPADTBDYEEA/AMgEXCCAegGUC6qVHBDAiAZ3+IEgAU9YchiXQxQEggBE6tNMPAQKwPwnihwABTNjhafohQACT1l0wSKUNAAQg0nyuE24BBGB/EsRvAQRgfxLEbwEEMG3NxU24BRDADT4d6uIBEIDlt0ZWMQAIwD4B52MAEIB9AnUMAAKwT6C0CYAAROo0BLxRAAQgzWW4GUAAJmp0qBlAAEZ6RWzOMgACkEaHfBZEABlsArVtAAQgZx3sD8UIIIMxoNYBEEDkZ4a8dQAEID5GwMcxAAjAvoD7GAAEYF9AHQOAAOyfBE8EcAsApEt5DyQAg+3Rr5YAbgOA13QPAgjAYl3eAAhANG8ABLBErwjgVgD4vAEQgLzkDYAALnkDIIBP8wZAAOe8ARBAhR45AhgFgA8zBaAEMAqAxp2zBkAAwHaWZ4CWAMYCgFWY8BYwPQACgO5kyD6c+fsABDDwGFD0aEkAYwKABhmqjwy8FEoAwHZWEwAdAYwMABrm9F7oBwQwNgBgPwSBLfrkhADGBwDdSOoa9KqdAgABAFrN4oUwnKYBQABAGebwVvhmKgAEABTVtAeAax9PB4AAgPJBkrS3+Y0gAgB04yW2pkTfvpgYAAEAWiwkqrND7zZTAyCAa+tNkL7tSkQUCGAGAK6V/QxUHyKmFyGAeQC4tn6s5L3yVXk7XwsngGtuVVdvXv1Hh9gCAcwLwDVXPj4s/t/i16VDfK0QwPwA/Ln16rF+qN7JP+ffVffLQpGoDQGMC6BHTrX8c2tVpE1legAEMGGbrAEQgErWAAhgkzUAAlDJGgABbLIGQACtZA2AAELWAAjgVXIGQAAqOQMgABeyBkAAteQMgAD2kjMAAlhLzgAIQEPOAAhAg2QMgAA0SMYACMDtJGMABKBBMgZAABokYwAEsA6SMQAC+MxLxgAIoBbJFwAB6E4yBkAAey/5AiAA7USyBUAA7tXLxAAIwLeYqlWQ6Aggvm4aAm0n8RFAkpqL5eUngAQ1n6vZ5SeANHUXY0c/AkidP7Rj/Of3Eh8BDGbg2WG42trLAN19lwAS1p3aQXb+gVZf5Cd33yGAtPnUCNpT52WovnP3fQIYoK6+PCG+43PdeRmyL+++JQPFduflc18G7ulSn70M3pd3vxM2aLuuXj63x7ev/POpPgcZqV/c/VbYKPldd6iXp8tz2x6PR/f3Ff/qX0/t8+W0PBy64P/Yjl0dxhZDMRTVg8TW+AS/hqmfYeq/kjAzw5VWCcZt82vVMaEwK/hDYfYHSJRlCcCUsmwIKFeg7QIImqwZIBwBlnBqQBPVxalCE1Vw5pAmKeFcmyZpF+f+ZJqiAKCbgdbFpT2aoMCVGk1OF9eCpnkAuAJ8AEg+BCwFbqnTJP8ANDvQxrgrMk1GDtxTp8mo4wEDmogWHvLnkCYh4WGRaHIvQIegA/DaXmbFWd4DvAI8/14Bnn+XoPtPawXYduAlBqwka83xMvXMyrFcx4tFjRVj48BrNBNFefufiymrxbe/l4BPf70lYHkReLv43S1gy/Yc71Smib+SrRYFH2KvuU78VWzV/Rf4SPPybzEerzJ/NMurzXrxbzLHCx0DfqeTayolS0kAAAAASUVORK5CYII=",M="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIEAAACQCAMAAAAY9PhcAAACFlBMVEUAAADL0tpEh/iOsutChfRChPdChfMA//9DhfTR0dFDhfRChfTI0dvI0dxChfTI0NxChfQ9hvNChfRChfTI0NvI0dtChfRDhfRBhfXI0dtChfRDhfRChfRChfRJkv85jv8zmf9ChfRChvRChfXI0duqqv+/v7/I0dvG09zI0N3I0dtChfRChfRDhfREhPLI0dpDhvJChfVChfRChfRDhfTJ0dvI0dtHgPHI0NvI0NvMzMxBhvPJ0ttChPTI0NrI0dtDhvXI0dvH0tpChvTI0dpEiO5AhfNDhfTJ0NqAgP9Dh/VBhPRChfTI0dtChfTI0dtBhfVEg/NChfSUs+TGzdxChvRBhfVChfVChfNEh/VBhfNChfVEiPdDhfRChfRBhvNBhvTH0tpChfRBhvTMzN1ChvPI0dtChvVBiPRChfT///9ChvRBhPRChfRDhfRChPZChfRChfNChfRBhfRDhfRChfX///9ChfTI0dtDhfRFh/PBzdxUj/Cgu+PH0dvFz9yzxd+OsOZKifOcuOONr+aswuBhlu+6yt65yd5zoOueueN3o+qAqOjCzt2Equdvn+xYkfB+p+nF0NxHiPNEhvNjmO5gl+5UkPGuwuC/zNzEztyUtOVQjfFTjvCSs+asweFakvDH0NtJifNNi/J4pOqlvOJqm+y+y91NjPKbt+OPseXDztyFq+hSjvF8pumKree3x9+7yt63K7hiAAAAd3RSTlMAIiI/6x+vAaELb/nnispB9hX4/mL9iMtm5PcX+u0HCQXa1GTIAwT8OjzJ145cPIsT8/37uM6VEkbbBT9VWZmrfsyuYbUPLLRoAjWJ1vDwsWIp9TkkpkuW3TFWxB4u9FKkyne/D2n7qi/vAXig04YbYMXy4nMyAoRL2UUAAAJLSURBVHja7dn1b1NhFMbxh9GWdmxMgLniLsN1uMtwl+EU1/POh7sOd3f9D3mbjrQZrO2y3PsQdr6/v8knJze5yTloLqPC16tQ2tFL04Z25Q5KHRhEVOOy8sTmhiBSZVoEMMkj7a7etL2p/RBuaFexuT4D24y+CDXMAigzsA2HbYRHhDQDWxqAISK8GZjKIDIyqQIzAL2FK0iFT4T5HZg+GEyeQS6WkGfQH0KegVGBClSgAhWo4D8VGBWoQAUqUIEKVKACpuD1lzNnbzIFtRfsu/pnH3iCy+GXNVerWYIa09yPGySBifT8Hltg6j9+5Qpsn7+/4gpsP99UcQW2B3fJAlvdfbbANNAFRgUqUIEKVKACFahABSpQgQpU8O8Kbn8iC96+EKqg8R13g/H+2x1hChpOneZusupqGdu8yJX93HnORrPRhLt4qUo4gism1LXrTbzt/q2H5tHjJ9QLR/XTpo5+Y1GBClSgAhWoQAUqUIEKVNBBBCPJgp4oJQtSMJosGINksmAsvGVcwXjATxVMmAh405mCybBN6c4TlAcRahpNMD2AcDMzOYJZO/C7OXMJgpR5JxHVgoWLCtwULF7aI4A/yk+yLVsuiVSR1KLOthUrOyVYADFaJQlUWATnWi0JtAYOVrJW4la2Dk62XuLmh7NtkDilb4SzbdossUuG022J/afYCufLkhh1K4YLbZNW2z4brrRzVCuA3UVwqT3Z8pf25nSBa5Xs80iLCvbnw9WKcw5IVJ6Dh+B+3sP+I6VH845l+46fmA9H+gX5+eo/YF2fpQAAAABJRU5ErkJggg==",B=n.p+"static/media/spine.b91d9c4546d5aae49e9e.png";const L=n.p+"static/media/wa.370533e215a14d7277b884eadaa7c8cd.svg";var P=n(69705),R=n(47738),D=n(21950),N=n(77459),F=n(67818),I=n(84765),E=n(13450),T=n(44414);const Q=e=>{if(void 0!==e.data){const t=e.data;if(t.root)return(0,T.jsx)(p.A,{sx:{width:14,height:14}});if(!t.dir)return null;if(void 0===t.children)return null}return e.expanded?(0,T.jsx)(f.pAn,{}):(0,T.jsx)(f.HBj,{})},z=e=>{if(void 0!==e.data){const t=e.data;if(t.dir)return e.expanded?(0,T.jsx)(f.$gs,{}):(0,T.jsx)(f.V9V,{});switch(I.A.path.extname(t.key).toLowerCase()){case".lua":return(0,T.jsx)("img",{src:w,alt:"lua",width:"14px",height:"14px"});case".tl":return(0,T.jsx)("img",{src:j,alt:"teal",width:"12px",height:"12px"});case".yue":return(0,T.jsx)("img",{src:C,alt:"yue",width:"14px",height:"14px"});case".tsx":case".ts":return(0,T.jsx)("img",{src:S,alt:"typescript",width:"12px",height:"12px"});case".xml":return(0,T.jsx)(P.PyP,{size:14});case".db":return(0,T.jsx)(R.RY4,{size:14});case".md":return(0,T.jsx)(D.y5i,{size:14});case".png":case".jpg":return(0,T.jsx)(b.fB4,{size:14});case".wasm":return(0,T.jsx)(A.oTy,{size:12});case".skel":return(0,T.jsx)("img",{src:B,alt:"spine",width:"14px",height:"14px"});case".yarn":return(0,T.jsx)("img",{src:"yarn-editor/icon_96x96.png",alt:"yarn",width:"14px",height:"14px"});case".bl":return(0,T.jsx)("img",{src:M,alt:"blockly",width:"12px",height:"12px"});case".vs":return(0,T.jsx)(A.kDX,{size:12});case".zip":return(0,T.jsx)(f.d$h,{color:"fac03d"});case".wa":return(0,T.jsx)("img",{src:L,alt:"wa",width:"12px",height:"12px"});case".mod":return(0,T.jsx)(f.rBU,{size:14})}}return(0,T.jsx)(f.XTd,{})},W={motionName:"rc-node-motion",motionAppear:!1,onAppearStart:()=>({height:0}),onAppearActive:e=>({height:e.scrollHeight-25}),onLeaveStart:e=>({height:e.offsetHeight}),onLeaveActive:()=>({height:0})},V=(0,o.memo)((function(e){var t,n;const{treeData:i,expandedKeys:r,selectedKeys:s}=e,[a,l]=(0,o.useState)(null),[c,d]=(0,o.useState)(!1),{t:u}=(0,F.Bd)();const p=(t,n)=>{e.onMenuClick(t,n),d(!1)},b=a?I.A.path.extname(a.data.key).toLowerCase():"",A=null!==(t=null===a||void 0===a?void 0:a.data.root)&&void 0!==t&&t,w=null!==(n=null===a||void 0===a?void 0:a.data.builtin)&&void 0!==n&&n,C=A||!w||I.A.engineDev,j=!A&&!w||I.A.engineDev,S=!A&&!w||I.A.engineDev,M=A||!w,B=A||!w,L=!A||w||I.A.engineDev,P=!A&&!w,D=A||!w||I.A.engineDev,V=A||!w||I.A.engineDev,O=!A&&!w||I.A.engineDev,U=!A&&!w&&(".ts"===b||".tsx"===b)||I.A.engineDev;return(0,T.jsxs)(N.K9,{skin:"dark",style:{color:E.Q1.Primary,fontSize:"14px",width:"calc(100% - 4px)",height:"100%"},children:[(0,T.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n\t.rc-tree-child-tree {\n\t\tdisplay: block;\n\t}\n\t.rc-node-motion {\n\t\ttransition: all .3s;\n\t\toverflow-y: hidden;\n\t\toverflow-x: hidden;\n\t}\n"}}),(0,T.jsxs)(m.j,{id:"dora-menu",anchorEl:null===a||void 0===a?void 0:a.target,keepMounted:!0,autoFocus:!1,open:c,onClose:()=>p("Cancel",null===a||void 0===a?void 0:a.data),slotProps:{transition:{onExited:()=>l(null)}},children:[C?(0,T.jsxs)(m.m,{onClick:()=>p("New",null===a||void 0===a?void 0:a.data),children:[(0,T.jsx)(g.A,{children:(0,T.jsx)(f.wrv,{})}),(0,T.jsx)(h.A,{primary:u("menu.new")}),(0,T.jsx)("div",{style:{fontSize:10,color:E.Q1.TextSecondary},children:"Mod+Shift+N"})]}):null,j?(0,T.jsxs)(m.m,{onClick:()=>p("Delete",null===a||void 0===a?void 0:a.data),children:[(0,T.jsx)(g.A,{children:(0,T.jsx)(f.op0,{})}),(0,T.jsx)(h.A,{primary:u("menu.delete")}),(0,T.jsx)("div",{style:{fontSize:10,color:E.Q1.TextSecondary},children:"Mod+Shift+D"})]}):null,S?(0,T.jsxs)(m.m,{onClick:()=>p("Rename",null===a||void 0===a?void 0:a.data),children:[(0,T.jsx)(g.A,{children:(0,T.jsx)(f.dtF,{})}),(0,T.jsx)(h.A,{primary:u("menu.rename")})]}):null,M?(0,T.jsxs)(m.m,{onClick:()=>p("Upload",null===a||void 0===a?void 0:a.data),children:[(0,T.jsx)(g.A,{children:(0,T.jsx)(f.kaf,{})}),(0,T.jsx)(h.A,{primary:u("menu.upload")})]}):null,B?(0,T.jsxs)(m.m,{onClick:()=>p("Download",null===a||void 0===a?void 0:a.data),children:[(0,T.jsx)(g.A,{children:(0,T.jsx)(f.pfD,{})}),(0,T.jsx)(h.A,{primary:u("menu.download")})]}):null,L?(0,T.jsxs)(m.m,{onClick:()=>p("Copy Path",null===a||void 0===a?void 0:a.data),children:[(0,T.jsx)(g.A,{children:(0,T.jsx)(k.OBG,{})}),(0,T.jsx)(h.A,{primary:u("menu.copyPath")})]}):null,P&&a&&".zip"===b?(0,T.jsxs)(m.m,{onClick:()=>p("Unzip",null===a||void 0===a?void 0:a.data),children:[(0,T.jsx)(g.A,{children:(0,T.jsx)(f.$gs,{})}),(0,T.jsx)(h.A,{primary:u("menu.extract")})]}):null,D&&a&&(""===I.A.path.extname(I.A.path.basename(a.data.key,b))&&(".yue"===b||".tl"===b||".ts"===b||".tsx"===b||".xml"===b||".wa"===b||".mod"===b)||a.data.dir)?(0,T.jsxs)(m.m,{onClick:()=>p("Build",null===a||void 0===a?void 0:a.data),children:[(0,T.jsx)(g.A,{children:(0,T.jsx)(y.tus,{})}),(0,T.jsx)(h.A,{primary:u("menu.build")})]}):null,U&&a?(0,T.jsxs)(m.m,{onClick:()=>p("Declaration",a.data),children:[(0,T.jsx)(g.A,{children:(0,T.jsx)(v.xvH,{})}),(0,T.jsx)(h.A,{primary:u("menu.declaration")})]}):null,V&&a&&a.data.dir?(0,T.jsxs)(m.m,{onClick:()=>p("Obfuscate",null===a||void 0===a?void 0:a.data),children:[(0,T.jsx)(g.A,{children:(0,T.jsx)(R.MTU,{})}),(0,T.jsx)(h.A,{primary:u("menu.obfuscate")})]}):null,O&&a&&""===I.A.path.extname(I.A.path.basename(a.data.key,b))&&(".yue"===b||".tl"===b||".ts"===b||".tsx"===b||".xml"===b)?(0,T.jsxs)(m.m,{onClick:()=>p("View Compiled",null===a||void 0===a?void 0:a.data),children:[(0,T.jsx)(g.A,{children:(0,T.jsx)(y.oTw,{})}),(0,T.jsx)(h.A,{primary:u("menu.viewCompiled",{lang:"Lua"})})]}):null]}),(0,T.jsx)(x.Ay,{onRightClick:function(e){l({target:e.event.currentTarget,data:e.node}),d(!0)},showIcon:!0,showLine:!0,virtual:!0,icon:z,switcherIcon:Q,motion:W,draggable:!0,onDrop:t=>{e.onDrop(t.dragNode,t.node)},expandedKeys:r,treeData:i,onSelect:(t,n)=>{e.onSelect(n.selectedNodes)},onExpand:t=>{e.onExpand(t.map((e=>e.toString())))},selectedKeys:s,dropIndicatorRender:()=>(0,T.jsx)("div",{})})]})}),((e,t)=>{if(e.selectedKeys.length!==t.selectedKeys.length)return!1;e.selectedKeys.sort(),t.selectedKeys.sort();for(let n=0;n<e.selectedKeys.length;n++)if(e.selectedKeys[n]!==t.selectedKeys[n])return!1;if(e.expandedKeys.length!==t.expandedKeys.length)return!1;e.expandedKeys.sort(),t.expandedKeys.sort();for(let n=0;n<e.expandedKeys.length;n++)if(e.expandedKeys[n]!==t.expandedKeys[n])return!1;return e.treeData===t.treeData&&e.onSelect===t.onSelect&&e.onMenuClick===t.onMenuClick&&e.onExpand===t.onExpand&&e.onDrop===t.onDrop}));var O=n(96195),U=n(82024),K=n(81415),$=n(82096),G=n(57559);const H=(0,O.Ay)((e=>(0,T.jsx)(U.A,{variant:"scrollable",selectionFollowsFocus:!0,...e,TabIndicatorProps:{children:(0,T.jsx)("span",{className:"MuiTabs-indicatorSpan"})}})))({margin:0,"& .MuiTabs-indicator":{display:"flex",justifyContent:"center",backgroundColor:"transparent"},"& .MuiTabs-indicatorSpan":{maxWidth:40,width:"100%",backgroundColor:E.Q1.Theme}}),Y=(0,O.Ay)((e=>{const{tooltip:t,onTabClose:n}=e,o={...e};return delete o.onTabClose,(0,T.jsxs)("div",{children:[(0,T.jsx)(G.A,{arrow:!0,title:e.tooltip,children:(0,T.jsx)(K.A,{disableRipple:!0,style:{textWrap:"nowrap"},...o})}),(0,T.jsx)(l.A,{size:"small",color:"secondary",sx:{marginLeft:-3,opacity:.6},onPointerDown:()=>{n&&n(t)},children:(0,T.jsx)($.cmI,{})})]})}))((e=>{let{theme:t,status:n}=e,o=E.Q1.Secondary,i=E.Q1.Primary;switch(n){case"error":o="rgba(233, 133, 116, 0.7)",i="rgb(233, 133, 116)";break;case"warning":o="rgba(200, 177, 136, 0.7)",i="rgb(200, 177, 136)"}return{textTransform:"none",fontWeight:t.typography.fontWeightRegular,fontSize:t.typography.pxToRem(15),marginRight:t.spacing(1),color:o,"&.Mui-selected":{color:i},"&.Mui-focusVisible":{backgroundColor:"rgba(100, 95, 228, 0.32)"}}})),q=(0,o.memo)((function(e){const{index:t,items:n=[],onChange:r,onMenuClick:s,onTabClose:a}=e,[l,c]=(0,o.useState)(null),[d,u]=(0,o.useState)(!1),{t:p}=(0,F.Bd)();null!==t&&t!==d?u(t):null===t&&!1!==d&&u(!1);const v=e=>{c(e.currentTarget)},k=e=>{c(null),s(e)};return(0,T.jsxs)(i.A,{width:"100%",children:[(0,T.jsx)(H,{value:d,scrollButtons:n.length>0,onChange:(e,t)=>{u(t),r(t)},"aria-label":"styled tabs",children:n.map(((e,t)=>(0,T.jsx)(Y,{onContextMenu:v,onTabClose:a,tooltip:e.key,label:(t<9?t+1+".":"")+(null!==e.contentModified?"*"+e.title:e.title),status:e.status},e.key)))}),(0,T.jsxs)(m.j,{id:"dora-menu",anchorEl:l,keepMounted:!0,autoFocus:!1,open:Boolean(l),onClose:k,children:[(0,T.jsxs)(m.m,{onClick:()=>k("Save"),children:[(0,T.jsx)(g.A,{children:(0,T.jsx)(f.kuV,{})}),(0,T.jsx)(h.A,{primary:p("menu.save")}),(0,T.jsx)("div",{style:{fontSize:10,color:E.Q1.TextSecondary},children:"Mod+S"})]}),(0,T.jsxs)(m.m,{onClick:()=>k("SaveAll"),children:[(0,T.jsx)(g.A,{children:(0,T.jsx)(f.FFq,{})}),(0,T.jsx)(h.A,{primary:p("menu.saveAll")}),(0,T.jsx)("div",{style:{fontSize:10,color:E.Q1.TextSecondary},children:"Mod+Shift+S"})]}),(0,T.jsxs)(m.m,{onClick:()=>k("Close"),children:[(0,T.jsx)(g.A,{children:(0,T.jsx)(f.zhF,{})}),(0,T.jsx)(h.A,{primary:p("menu.close")}),(0,T.jsx)("div",{style:{fontSize:10,color:E.Q1.TextSecondary},children:"Mod+W"})]}),(0,T.jsxs)(m.m,{onClick:()=>k("CloseAll"),children:[(0,T.jsx)(g.A,{children:(0,T.jsx)(f.cAB,{})}),(0,T.jsx)(h.A,{primary:p("menu.closeAll")}),(0,T.jsx)("div",{style:{fontSize:10,color:E.Q1.TextSecondary},children:"Mod+Shift+W"})]}),(0,T.jsxs)(m.m,{onClick:()=>k("CloseOthers"),children:[(0,T.jsx)(g.A,{children:(0,T.jsx)(f.XfH,{})}),(0,T.jsx)(h.A,{primary:p("menu.closeOthers")})]})]})]})}),((e,t)=>e.index===t.index&&e.items.length===t.items.length&&e.onChange===t.onChange&&e.onMenuClick===t.onMenuClick&&e.items.every(((e,n)=>{const o=t.items[n];return e.key===o.key&&e.title===o.title&&e.contentModified===o.contentModified&&e.status===o.status}))));var J=n(65827),X=n(6732),_=n(65250),Z=n(27522),ee=n(53693),te=n(47371),ne=n(66615),oe=n(5352),ie=n(41680),re=n(77850),se=n(43711),ae=n(80727),le=n(32284),ce=n(34244),de=n(98519),ue=n(35118),me=n(92860);const ge=n.p+"static/media/yarn.a16bf421d36a1ae5d4ef.png";var he=n(16253);const pe=[{icon:(0,T.jsx)("img",{src:w,alt:"Lua",width:"50px",height:"50px",style:{marginLeft:"0px"}}),name:"Lua",desc:"file.lua",padding:"20px"},{icon:(0,T.jsx)("img",{src:C,alt:"YueScript",width:"60px",height:"60px",style:{marginLeft:"-5px"}}),name:"YueScript",desc:"file.yuescript",padding:"10px"},{icon:(0,T.jsx)("img",{src:j,alt:"Teal",width:"45px",height:"45px",style:{marginLeft:"5px"}}),name:"Teal",desc:"file.teal",padding:"20px"},{icon:(0,T.jsx)("img",{src:S,alt:"TypeScript",width:"40px",height:"40px",style:{marginLeft:"5px"}}),name:"TypeScript",desc:"file.typescript",padding:"20px"},{icon:(0,T.jsx)(P.PyP,{size:65,style:{marginLeft:"-3px"}}),name:"Dora XML",desc:"file.xml",padding:"13px"},{icon:(0,T.jsx)("img",{src:ge,alt:"Yarn",width:"50px",height:"50px",style:{marginLeft:"0px"}}),name:"Yarn",desc:"file.yarn",padding:"15px"},{icon:(0,T.jsx)(D.y5i,{size:50,style:{marginLeft:"5px"}}),name:"Markdown",desc:"file.markdown",padding:"15px"},{icon:(0,T.jsx)(A.kDX,{size:60,style:{marginLeft:"5px",width:"60px"}}),name:"Visual Script",desc:"file.visualScript",padding:"25px"},{icon:(0,T.jsx)("img",{src:M,alt:"Blockly",width:"40px",height:"40px",style:{marginLeft:"8px"}}),name:"Blockly",desc:"file.blockly",padding:"22px"},{icon:(0,T.jsx)("img",{src:L,alt:"Wa",width:"40px",height:"40px",style:{marginLeft:"4px"}}),name:"Wa",desc:"file.wa",padding:"22px"},{icon:(0,T.jsx)(f.XnY,{size:50,style:{marginLeft:"0px"}}),name:"Folder",desc:"file.folder",padding:"20px"}],fe={appear:!1,enter:!1,exit:!1};const ve=function(e){const{t:t}=(0,F.Bd)(),{onClose:n,open:o}=e;return(0,T.jsxs)(J.A,{maxWidth:"md",onClose:()=>{n(void 0)},open:o,transitionDuration:0,slotProps:{transition:fe},children:[(0,T.jsx)(X.A,{children:t("file.new")}),(0,T.jsx)(he.A,{container:!0,columns:{sm:2,md:3},children:pe.map((e=>(0,T.jsx)(he.A,{size:1,children:(0,T.jsx)(ue.Ay,{children:(0,T.jsxs)(me.A,{sx:{height:"90px"},onClick:()=>{return t=e.name,void n(t);var t},children:[e.icon,(0,T.jsx)(h.A,{primary:e.name,secondary:t(e.desc),sx:{paddingLeft:e.padding}})]},e.name)})},e.name)))}),(0,T.jsx)(te.A,{})]})};const ke=n.p+"static/media/logo.ebe391acdca1c04d240f39411e85bd0a.svg";var ye=n(78945),be=n(79771),Ae=n(59852),xe=n(51598),we=n(19023),Ce=n(76300),je=n(33994);const{Dragger:Se}=we.A,Me=e=>{const{t:t}=(0,F.Bd)(),{message:n,notification:i}=Ce.A.useApp(),r={name:"file",directory:!0,multiple:!0,action:(0,Ae.c2)(`/upload?path=${e.path}`),beforeUpload:(e,n)=>n.length>100?(i.error({key:"upload-exceeded-error",message:t("upload.exceeded"),placement:"top"}),we.A.LIST_IGNORE):".DS_Store"===e.name?we.A.LIST_IGNORE:new File([e],""!==e.webkitRelativePath?e.webkitRelativePath:e.name),onChange(t){const{status:n}=t.file;"done"===n&&e.onUploaded(e.path,t.file.name)}},[s,a]=(0,o.useState)([]),[l,c]=(0,o.useState)(!1),d={onRemove:e=>{const t=s.indexOf(e),n=s.slice();n.splice(t,1),a(n)},beforeUpload:e=>(a([...s,e]),!1),fileList:s};return(0,T.jsxs)(se.A,{maxWidth:"sm",children:[(0,T.jsx)("p",{className:"dora-upload-title",style:{color:E.Q1.TextPrimary},children:e.title}),(0,T.jsxs)("div",{style:{display:"flex"},children:[(0,T.jsx)(we.A,{...d,style:{display:"inline-block"},children:(0,T.jsx)(je.Ay,{icon:(0,T.jsx)(xe.A,{}),children:t("upload.selectFile")})}),(0,T.jsx)(je.Ay,{onClick:()=>{const o=new FormData;s.forEach((e=>{o.append("file",e)})),c(!0),fetch((0,Ae.c2)(`/upload?path=${e.path}`),{method:"POST",body:o}).then((()=>{s.forEach((t=>{const n=t;e.onUploaded(e.path,n.name)})),a([]),n.success(t("upload.success"))})).catch((()=>{n.error(t("upload.failed"))})).finally((()=>{c(!1)}))},disabled:0===s.length,loading:l,style:{marginLeft:10},children:t(l?"upload.uploading":"upload.startUpload")})]}),(0,T.jsx)("div",{style:{padding:20}}),(0,T.jsxs)(Se,{...r,children:[(0,T.jsx)("p",{className:"dora-upload-drag-icon",style:{color:E.Q1.Primary},children:(0,T.jsx)(f.kaf,{style:{fontSize:"40px"}})}),(0,T.jsx)("p",{className:"dora-upload-text",style:{color:E.Q1.TextPrimary},children:t("upload.text")}),(0,T.jsx)("p",{className:"dora-upload-hint",style:{color:E.Q1.TextSecondary},children:t("upload.hint")})]})]})},Be=(0,o.memo)((e=>(0,T.jsx)(ye.Ay,{theme:{algorithm:be.A.darkAlgorithm,token:{colorPrimary:E.Q1.Theme,colorBgContainer:E.Q1.Background}},children:(0,T.jsx)(Ce.A,{children:(0,T.jsx)(Me,{...e})})})));var Le=n(38166),Pe=n(84532),Re=(n(79494),n(34707)),De=n(18091);const Ne=e=>{const{t:t}=(0,F.Bd)();return(0,T.jsx)(Re.A,{forcePopupIcon:!1,fullWidth:!0,openOnFocus:!0,disableListWrap:!0,filterOptions:(e,t)=>(0,De.Ht)(e,t.inputValue,{keys:["title"]}),options:e.options,getOptionLabel:e=>e.fileKey,renderInput:e=>(0,T.jsx)(ee.A,{autoFocus:!0,sx:{m:1,width:"50ch","& .MuiOutlinedInput-notchedOutline":{borderColor:E.Q1.Secondary}},...e,label:t("popup.goToFile")}),renderOption:(e,t)=>(delete e.key,(0,T.jsxs)("li",{...e,children:[t.title,"\u2003\u2003",(0,T.jsx)("p",{style:{textAlign:"right",color:E.Q1.TextSecondary,fontSize:"12px"},children:t.path})]},t.fileKey)),onChange:(t,n,o)=>{null!==n&&"selectOption"===o&&e.onClose(n)},onClose:(t,n)=>{"selectOption"!==n&&e.onClose(null)}})};var Fe=n(5210);const Ie=(0,o.memo)((e=>(0,T.jsx)("iframe",{width:e.width,height:e.height,title:e.title,onLoad:t=>{if(null!==t.currentTarget.contentWindow){const n=t.currentTarget.contentWindow;let o;if(n.addEventListener("yarnSavedStateToLocalStorage",(()=>{e.onChange()})),void 0!==e.defaultValue)try{o=JSON.stringify(function(e){const n=e.replace(/\r\n/g,"\n").split("\n"),o=[];let i=0;for(;i<n.length;){const e=n[i].trim();if(!e.startsWith("//"))break;o.push(e),i++}const r=n.slice(i);let s;try{s=function(e){const t={},n=[];let o=!1,i={};for(const r of e){const e=r.replace(/^\/\/\s?/,"").trim().replace(/\s+/," ");if(e.startsWith("lastSavedUnix:"))t.lastSavedUnix=e.slice(14).trim();else if("variables:"===e)o=!0;else if(o&&e.startsWith("- key:"))Object.keys(i).length>0&&(n.push(i),i={}),i.key=e.slice(6).trim();else if(o&&e.startsWith("value:")){const t=e.slice(6).trim();i.value=t}}Object.keys(i).length>0&&n.push(i);n.length>0&&(t.pluginStorage={Runner:{variables:n}});return t}(o)}catch(t){console.error(t)}s??={};const a=r.join("\n");let l;try{l=function(e){const t=e.replace(/\r\n/g,"\n").split(/^===\s*$/m).map((e=>e.trim())).filter(Boolean);return t.map((e=>{const[t,...n]=e.split(/^---\s*$/m),o=t.split("\n").map((e=>e.trim())),i=n.join("\n").trim();let r="",s="",a={x:0,y:0},l=0;for(const c of o)if(c.startsWith("title:"))r=c.slice(6).trim();else if(c.startsWith("tags:"))s=c.slice(5).trim();else if(c.startsWith("position:")){const[e,t]=c.slice(9).trim().split(",").map(Number);a={x:e,y:t}}else c.startsWith("colorID:")&&(l=parseInt(c.slice(8).trim()));return{title:r,tags:s,position:a,colorID:l,body:i}}))}(a)}catch(t){console.error(t)}return l??=[],{header:s,nodes:l}}(e.defaultValue))}catch(t){console.error(t)}n.app.data.startNewFile(e.title,o),e.onLoad(n.app.data),n.document.addEventListener("YarnCheckSyntax",(e=>{Ae.JI({code:e.code}).then((e=>{let t=new Event("YarnChecked");e.success?(t.syntaxError=e.syntaxError,n.document.dispatchEvent(t)):(t.syntaxError="Failed to check syntax",n.document.dispatchEvent(t))})).catch((()=>{let e=new Event("YarnChecked");e.syntaxError="Failed to check syntax",n.document.dispatchEvent(e)}))})),n.document.addEventListener("keydown",(t=>{if(t.ctrlKey||t.altKey||t.metaKey)switch(t.key){case"N":case"n":case"D":case"d":case"S":case"s":case"W":case"w":case"R":case"r":case"P":case"p":case"Q":case"q":t.preventDefault(),e.onKeydown(t)}}))}},src:"yarn-editor/index.html",style:{border:"none",overflowY:"hidden"}})),((e,t)=>e.width===t.width&&e.height===t.height&&e.title===t.title));function Ee(e){var t;return[`title: ${e.title}`,`tags: ${e.tags}`,`position: ${e.position.x},${e.position.y}`,`colorID: ${e.colorID}`,"---",(t=e.body,t.replace(/\r\n/g,"\n")),"===\n"].join("\n")}const Te=(0,o.memo)((e=>(0,T.jsx)("iframe",{width:e.width,height:e.height,title:e.title,onLoad:t=>{if(null===t.currentTarget.contentWindow)return;const n=t.currentTarget.contentWindow;n.document.addEventListener("mouseup",(()=>{e.onChange()})),void 0!==e.defaultValue&&""!==e.defaultValue&&n.setVisualScript(e.defaultValue),e.onLoad(n),n.document.addEventListener("keydown",(t=>{if(t.ctrlKey||t.altKey||t.metaKey)switch(t.key){case"N":case"n":case"D":case"d":case"S":case"s":case"W":case"w":case"R":case"r":case"P":case"p":case"Q":case"q":t.preventDefault(),e.onKeydown(t)}else e.onChange()}))},src:"code-wire/index.html",style:{border:"none",overflowY:"hidden"}})),((e,t)=>e.width===t.width&&e.height===t.height&&e.title===t.title));class Qe{getFile(e){return Promise.resolve(void 0)}isFileAvailable(e){return Promise.resolve(!1)}}var ze=n(86292);class We{constructor(){this.REGEX_DETECT_IMPORT=/(?:(?:(?:import)|(?:export))(?:.)*?from\s+["']([^"']+)["'])|(?:require|import)\s*\(["']([^"']+)["']\)|(?:import)\s+["']([^"']+)["']|(?:\/+\s*<reference\s+path=["']([^"']+)["']\s*\/>)/g,this.REGEX_NODE_MODULE=/^node:([\w\W/]+)$/}parseDependencies(e,t){return[...e.matchAll(this.REGEX_DETECT_IMPORT)].map((e=>{var t,n,o;return null!==(t=null!==(n=null!==(o=e[1])&&void 0!==o?o:e[2])&&void 0!==n?n:e[3])&&void 0!==t?t:e[4]})).filter((e=>!!e)).map((e=>this.resolvePath(e,t)))}resolvePath(e,t){const n=e.match(this.REGEX_NODE_MODULE);if(n)return{kind:"relative-in-package",packageName:"@types/node",importPath:`${n[1]}.d.ts`,sourcePath:""};if("string"===typeof t){if(e.startsWith("."))return{kind:"relative",importPath:e,sourcePath:t};if(e.startsWith("@")){const t=e.split("/");return{kind:"package",packageName:`${t[0]}/${t[1]}`,importPath:t.slice(2).join("/")}}{const t=e.split("/");return{kind:"package",packageName:t[0],importPath:t.slice(1).join("/")}}}switch(t.kind){case"package":throw Error("TODO?");case"relative":throw Error("TODO2?");case"relative-in-package":if(e.startsWith("."))return{kind:"relative-in-package",packageName:t.packageName,sourcePath:ze.default.join(t.sourcePath,t.importPath),importPath:e};if(e.startsWith("@")){const t=e.split("/");return{kind:"package",packageName:`${t[0]}/${t[1]}`,importPath:t.slice(2).join("/")}}{const t=e.split("/");return{kind:"package",packageName:t[0],importPath:t.slice(1).join("/")}}}}}const Ve=(e,t)=>{var n;let o=`${e.type}: `;switch(e.type){case"CodeChanged":case"ResolveNewImports":o+="";break;case"LookedUpTypeFile":o+=`"${e.path}" was ${e.success?"sucessfully":"not sucessfully"} looked up`;break;case"AttemptedLookUpFile":o+=`"${e.path}" was ${e.success?"sucessfully":"not sucessfully"} attempted to looked up`;break;case"LookedUpPackage":o+=`package.json for package "${e.package}" was ${e.success?"sucessfully":"not sucessfully"} looked up${e.definitelyTyped?" (found in definitely typed repo)":""}`;break;case"LoadedFromCache":o+=`"${e.importPath}" was loaded from cache`;break;case"StoredToCache":o+=`"${e.importPath}" was stored to cache`}o.endsWith(": ")&&(o=o.slice(void 0,-2)),null===(n=t.onUpdate)||void 0===n||n.call(t,e,o)};class Oe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.options=e,this.fileRecursionDepth=t,this.packageRecursionDepth=n}nextPackage(){return new Oe(this.options,this.fileRecursionDepth,this.packageRecursionDepth+1)}nextFile(){return new Oe(this.options,this.fileRecursionDepth+1,this.packageRecursionDepth)}same(){return new Oe(this.options,this.fileRecursionDepth,this.packageRecursionDepth)}shouldStop(){return this.options.fileRecursionDepth>0&&this.fileRecursionDepth>=this.options.fileRecursionDepth||this.options.packageRecursionDepth>0&&this.packageRecursionDepth>=this.options.packageRecursionDepth}}class Ue{constructor(e){if(this.options=e,this.loadedFiles=void 0,this.dependencyParser=void 0,this.cache=void 0,this.versions=void 0,this.newImportsResolved=void 0,this.monaco=void 0,this.loadedFiles=[],this.dependencyParser=new We,this.cache=e.sourceCache,this.newImportsResolved=!1,this.monaco=e.monaco,e.preloadPackages&&e.versions){this.versions=e.versions;for(const[t]of Object.entries(e.versions))this.resolveImport({kind:"package",packageName:t,importPath:""},new Oe(this.options)).catch((e=>{console.error(e)}))}}wereNewImportsResolved(){return this.newImportsResolved}resetNewImportsResolved(){this.newImportsResolved=!1}async resolveImportsInFile(e,t,n){if(n.shouldStop())return;const o=this.dependencyParser.parseDependencies(e,t);for(const l of o)try{await this.resolveImport(l,n)}catch(a){var i,r,s;if(this.options.onError)null===(i=(r=this.options).onError)||void 0===i||i.call(r,null!==(s=a.message)&&void 0!==s?s:a);else console.error(a)}}async resolveImport(e,t){const n=this.hashImportResourcePath(e);if(!this.loadedFiles.includes(n))switch(this.loadedFiles.push(n),e.kind){case"package":{const n={kind:"relative-in-package",packageName:"",importPath:e.packageName+(e.importPath?"/"+e.importPath:""),sourcePath:""};return await this.resolveImportInPackage(n,t.nextFile())}case"relative":{const n={kind:"relative-in-package",packageName:"",importPath:e.importPath,sourcePath:e.sourcePath};return await this.resolveImportInPackage(n,t.nextFile())}case"relative-in-package":return await this.resolveImportInPackage(e,t.nextFile())}}async resolveImportInPackage(e,t){const n=await this.loadSourceFileContents(e);if(n){const{source:o,at:i}=n,r=i.startsWith("file:")?this.monaco.Uri.parse(i):this.monaco.Uri.file(i);this.monaco.editor.getModel(r)||this.createModel(o,r),await this.resolveImportsInFile(o,{kind:"relative-in-package",packageName:e.packageName,sourcePath:ze.default.dirname(i),importPath:""},t)}}async loadSourceFileContents(e){const t={type:"LookedUpTypeFile",path:ze.default.join(e.packageName,e.sourcePath,e.importPath),definitelyTyped:!1,success:!1},n=e.packageName,o=this.getVersion(e.packageName);let i=[".d.ts","/index.d.ts",".ts",".tsx","/index.ts","/index.tsx"];if(i.map((t=>e.importPath.endsWith(t))).reduce(((e,t)=>e||t),!1)){const t=await this.resolveSourceFile(n,o,ze.default.join(e.sourcePath,e.importPath));if(t)return{source:t,at:ze.default.join(e.sourcePath,e.importPath)}}else for(const s of i){const t=ze.default.join(e.sourcePath,e.importPath),i=(".d.ts"===s&&t.endsWith(".js")?t.slice(0,-3):t)+s,r=await this.resolveSourceFile(n,o,i);if(Ve({type:"AttemptedLookUpFile",path:ze.default.join(n,i),success:!!r},this.options),r)return Ve({type:"LookedUpTypeFile",path:ze.default.join(n,i),success:!0},this.options),{source:r,at:i}}const r=await this.resolvePackageJson(n,o,ze.default.join(e.sourcePath,e.importPath));if(r){const{types:t}=JSON.parse(r);if(t){const i=ze.default.join(e.sourcePath,e.importPath,t),r=await this.resolveSourceFile(n,o,i);if(r)return Ve({type:"LookedUpTypeFile",path:ze.default.join(n,i),success:!0},this.options),{source:r,at:i}}}return Ve(t,this.options),null}getVersion(e){var t;return null===(t=this.versions)||void 0===t?void 0:t[e]}setVersions(e){var t,n;this.versions=e,null===(t=(n=this.options).onUpdateVersions)||void 0===t||t.call(n,e)}setVersion(e,t){this.setVersions({...this.versions,[e]:t})}createModel(e,t){this.monaco.editor.getModel(t)||(this.monaco.editor.createModel(e,"typescript",t),this.newImportsResolved=!0)}hashImportResourcePath(e){return(e=>{var t;switch(e.kind){case"package":return ze.default.join(e.packageName,null!==(t=e.importPath)&&void 0!==t?t:"","package.json");case"relative":return ze.default.join(e.sourcePath,e.importPath);case"relative-in-package":return ze.default.join(e.packageName,e.sourcePath,e.importPath)}})(e)}async resolvePackageJson(e,t,n){const o=ze.default.join(e+(t?`@${t}`:""),null!==n&&void 0!==n?n:"","package.json");let i,r=!1;var s;return this.cache.isFileAvailable?r=await this.cache.isFileAvailable(o):(i=await this.cache.getFile(o),r=void 0!==i),r?null!==(s=i)&&void 0!==s?s:await this.cache.getFile(o):void 0}async resolveSourceFile(e,t,n){const o=ze.default.join(e+(t?`@${t}`:""),n);let i,r=!1;var s;return this.cache.isFileAvailable?r=await this.cache.isFileAvailable(o):(i=await this.cache.getFile(o),r=void 0!==i),r?(Ve({type:"LoadedFromCache",importPath:o},this.options),null!==(s=i)&&void 0!==s?s:await this.cache.getFile(o)):void 0}}class Ke{constructor(e,t){this.editor=e,this.options=t,this.importResolver=void 0,this.debounceTimer=void 0,this.isResolving=void 0,this.disposables=void 0,this.disposables=[],this.importResolver=new Ue(t);const n=e.onDidChangeModelContent((e=>{this.debouncedResolveContents()}));this.disposables.push(n)}static async create(e,t){var n;null!==t&&void 0!==t&&t.shareCache&&t.sourceCache&&!Ke.sharedCache&&(Ke.sharedCache=t.sourceCache);const o=null===t||void 0===t?void 0:t.monaco;if(!o)throw new Error("monacoInstance not found, you can specify the monaco instance via options.monaco");return new Ke(e,{onlySpecifiedPackages:!1,preloadPackages:!1,shareCache:!1,dontRefreshModelValueAfterResolvement:!1,sourceCache:null!==(n=Ke.sharedCache)&&void 0!==n?n:new Qe,debounceDuration:4e3,fileRecursionDepth:10,packageRecursionDepth:3,...t,monaco:o})}dispose(){for(const e of this.disposables)e.dispose()}setVersions(e){this.importResolver.setVersions(e),this.options.versions=e}debouncedResolveContents(){this.isResolving||(Ve({type:"CodeChanged"},this.options),this.options.debounceDuration<=0?this.resolveContents():(void 0!==this.debounceTimer&&clearTimeout(this.debounceTimer),this.debounceTimer=setTimeout((async()=>{await this.resolveContents(),this.debounceTimer=void 0}),this.options.debounceDuration)))}async resolveContents(){this.isResolving=!0,Ve({type:"ResolveNewImports"},this.options);const e=this.editor.getModel();if(!e)return;const t=e.getLinesContent();try{await this.importResolver.resolveImportsInFile(t.join("\n"),ze.default.dirname(e.uri.toString()),new Oe(this.options))}catch(o){if(!this.options.onError)throw o;var n;this.options.onError(null!==(n=o.message)&&void 0!==n?n:o)}if(this.importResolver.wereNewImportsResolved()){if(!this.options.dontRefreshModelValueAfterResolvement){const t=this.editor.getPosition();e.setValue(e.getValue()),t&&this.editor.setPosition(t)}this.importResolver.resetNewImportsResolved()}this.isResolving=!1}}Ke.sharedCache=void 0;class $e extends Ke{constructor(e,t){super(e,t)}static async create(e,t){var o;return await Ke.create(e,{...t,monaco:null!==(o=null===t||void 0===t?void 0:t.monaco)&&void 0!==o?o:await Promise.resolve().then(n.bind(n,84532))})}}var Ge=n(77515);const He=0===navigator.platform.indexOf("Mac")||"iPhone"===navigator.platform||"iPad"===navigator.platform,Ye=()=>{const{t:e}=(0,F.Bd)(),t=[{description:e("menu.modKey"),keys:He?["\u2303","\u2325","\u2318"]:["Ctrl","Alt","Win"]},{description:e("menu.goToFile"),keys:["Mod","P"]},{description:e("menu.switchTab"),keys:["Mod","Number"]},{description:e("menu.new"),keys:["Mod",He?"\u21e7":"Shift","N"]},{description:e("menu.delete"),keys:["Mod",He?"\u21e7":"Shift","D"]},{description:e("menu.save"),keys:["Mod","S"]}],n=[{description:e("menu.saveAll"),keys:["Mod",He?"\u21e7":"Shift","S"]},{description:e("menu.viewLog"),keys:["Mod","."]},{description:e("menu.stop"),keys:["Mod","Q"]},{description:e("menu.runThis"),keys:["Mod",He?"\u21e7":"Shift","R"]},{description:e("menu.run"),keys:["Mod","R"]}];return(0,T.jsx)("div",{style:{width:"100vw",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,T.jsxs)("div",{className:"container",children:[(0,T.jsx)("ul",{className:"list",children:t.map(((e,t)=>(0,T.jsxs)("li",{className:"list-item",children:[(0,T.jsx)("span",{className:"description",children:e.description}),(0,T.jsx)("div",{className:"keys",children:e.keys.map(((e,t)=>(0,T.jsx)("kbd",{className:"key",children:e},t)))})]},t)))}),(0,T.jsx)("ul",{className:"list",children:n.map(((e,t)=>(0,T.jsxs)("li",{className:"list-item",children:[(0,T.jsx)("span",{className:"description",children:e.description}),(0,T.jsx)("div",{className:"keys",children:e.keys.map(((e,t)=>(0,T.jsx)("kbd",{className:"key",children:e},t)))})]},t)))})]})})};var qe=n(54616);const Je=e=>(0,T.jsx)("span",{children:e.split(/\[(error|warning|info)\]/).map(((e,t)=>t%2===1?(0,T.jsxs)("span",{children:["[",(0,T.jsx)("span",{style:{color:"error"===e?E.Q1.Error:"warning"===e?E.Q1.Warning:E.Q1.Info},children:e}),"]"]},t):(0,T.jsx)("span",{children:e},t)))}),Xe=(0,o.memo)((e=>{const{t:t}=(0,F.Bd)(),[n,i]=(0,o.useState)(t("log.wait"));return(0,o.useEffect)((()=>{const e=(e,n)=>{i(""===n?t("log.wait"):n)};return Ae.oi(e),()=>{Ae.N4(e)}}),[t]),(0,T.jsx)(qe.LazyLog,{height:e.height,text:n,style:{msOverflowStyle:"none",scrollbarWidth:"none",WebkitScrollSnapType:"none",fontSize:18,fontFamily:"Roboto,Helvetica,Arial,sans-serif",color:E.Q1.TextSecondary,background:E.Q1.BackgroundDark},formatPart:Je,rowHeight:22,extraLines:1,selectableLines:!0,enableSearch:!0,caseInsensitive:!0,stream:!0,follow:!0})}));var _e=n(45383);const Ze=o.lazy((()=>Promise.all([n.e(7250),n.e(4892)]).then(n.bind(n,64892)))),et=o.lazy((()=>Promise.all([n.e(6721),n.e(3318)]).then(n.bind(n,33318)))),tt=o.lazy((()=>Promise.all([n.e(1594),n.e(5892)]).then(n.bind(n,55892)))),nt=o.lazy((()=>Promise.all([n.e(1313),n.e(672)]).then(n.bind(n,70672)))),{path:ot}=I.A;u.wG.config({monaco:Pe});let it=Date.now(),rt=Date.now(),st=!1;document.addEventListener("contextmenu",(e=>{e.preventDefault()}));let at=!1,lt=!1,ct=()=>{},dt=Date.now();let ut=null;const mt=(e,t)=>{if(null===e&&null===t)return!0;if(null===e||null===t)return!1;if(e.index!==t.index)return!1;if(e.files.length!==t.files.length)return!1;for(let n=0;n<e.files.length;n++){const o=e.files[n],i=t.files[n];if(o.key!==i.key)return!1;if(o.title!==i.title)return!1;if(o.mdEditing!==i.mdEditing)return!1;if(o.readOnly!==i.readOnly)return!1;if(o.folder!==i.folder)return!1;if(o.position&&i.position){if(o.position.lineNumber!==i.position.lineNumber)return!1;if(o.position.column!==i.position.column)return!1}else if(o.position!==i.position)return!1}return!0};setInterval((()=>{const e=Date.now();e-dt>=1e4&&(ct(),dt=e)}),1e4),window.onbeforeunload=e=>{if(void 0!==I.A.version&&(ct(),at))return e.returnValue="Please save before leaving!","Please save before leaving!"};const gt=(e,t)=>!!e.startsWith(t)&&!ot.relative(t,e).startsWith(".."),ht=(0,T.jsx)("div",{style:{width:"100%",height:"100%",backgroundColor:"#1a1a1a"}}),pt=(0,o.memo)((e=>{const{hidden:t,width:n,height:i,language:r,editingFile:s,readOnly:a,minimap:l,onMount:c,onModified:d,onValidate:m}=e,g=(0,o.useCallback)((e=>{m(e,s.key)}),[m,s.key]),h=(0,o.useCallback)(((e,t)=>{void 0!==e&&d(s,e,t.changes.at(-1))}),[d,s]);return(0,T.jsx)("div",{hidden:t,children:(0,T.jsx)(u.Ay,{width:n,height:i,language:r,theme:Ge.v,onMount:c,keepCurrentModel:!0,loading:ht,onChange:h,onValidate:"typescript"===r?g:void 0,path:Pe.Uri.file(s.key).toString(),options:{readOnly:a,padding:{top:20},wordWrap:"on",wordBreak:"keepAll",selectOnLineNumbers:!0,matchBrackets:"near",fontSize:18,useTabStops:!1,insertSpaces:!1,renderWhitespace:"all",tabSize:2,minimap:{enabled:l},definitionLinkOpensInPeek:!0}})})})),ft=e=>{let{minWidth:t,defaultWidth:n}=e;n??=t;const[i,r]=(0,o.useState)(!1),[s,a]=(0,o.useState)(n),[l,c]=(0,o.useState)(null),d=(0,o.useCallback)((e=>{i||(e.preventDefault(),c(e.target),e.target.setPointerCapture(e.pointerId),r(!0))}),[i]),u=(0,o.useCallback)((e=>{i&&(r(!1),null===l||void 0===l||l.releasePointerCapture(e.pointerId),c(null),Ae.G5({code:`require('Script.Dev.Entry').getConfig().drawerWidth = ${s}`,log:!1}))}),[i,l,s]),m=(0,o.useCallback)((e=>{if(i){e.preventDefault();const n=e.clientX-vt;n>=t&&a(n)}}),[t,i]);return(0,o.useEffect)((()=>(document.addEventListener("pointermove",m),document.addEventListener("pointerup",u),()=>{document.removeEventListener("pointermove",m),document.removeEventListener("pointerup",u)})),[u,m]),{width:s,enableResize:d,isResizing:i}},vt=4,kt={appear:!1,enter:!1,exit:!1};function yt(){var e,t,u,m,g,h,p,f,v;const{t:k}=(0,F.Bd)(),[y,b]=(0,o.useState)([]),[A,x]=(0,o.useState)(!1),[w,C]=(0,o.useState)(!0),[j,S]=(0,o.useState)(null),[M,B]=(0,o.useState)([]),[L,P]=(0,o.useState)([]),[D,Q]=(0,o.useState)([]),[z,W]=(0,o.useState)([]),[O,U]=(0,o.useState)(null),[K,$]=(0,o.useState)(null),[G,H]=(0,o.useState)(null),[Y,ue]=(0,o.useState)(null),[me,ge]=(0,o.useState)(null),[he,pe]=(0,o.useState)(null),[fe,ye]=(0,o.useState)(!1),[be,xe]=(0,o.useState)(null),{width:we,enableResize:Ce,isResizing:je}=ft({minWidth:150,defaultWidth:I.A.drawerWidth}),[Se,Me]=(0,o.useState)({width:window.innerWidth,height:window.innerHeight}),Re=Se.width-(w?we:0),De=Se.height-48,[Qe,ze]=(0,o.useState)(null),[We,Ve]=(0,o.useState)(!1),[Oe,Ue]=(0,o.useState)(!1),[Ke,Ge]=(0,o.useState)(!1),He=(e,t,n)=>{const o=e+Date.now().toString();b((i=>[...i,{msg:e,key:o,type:t,openLog:n}])),setTimeout((()=>{b((e=>e.filter((e=>e.key!==o))))}),5e3)},[qe,Je]=(0,o.useState)(!0),dt=(0,o.useCallback)((()=>Ae.mY().then((e=>(e.root=!0,e.title=k("tree.assets"),void 0===e.children&&(e.children=[{key:"...",dir:!1,title:"..."}]),P([e]),e))).catch((()=>(He(k("alert.assetLoad"),"error"),null)))),[k]);(0,o.useEffect)((()=>{void 0!==I.A.version?(He(k("alert.platform",{platform:I.A.platform}),"success"),document.addEventListener("keydown",(e=>{if(e.ctrlKey||e.altKey||e.metaKey)switch(e.key){case"N":case"n":case"D":case"d":case"S":case"s":case"W":case"w":case"R":case"r":case"P":case"p":case"Q":case"q":case".":e.preventDefault(),$(e);break;default:{const t=Number.parseInt(e.key);!Number.isNaN(t)&&t>=1&&t<=9&&(e.preventDefault(),$(e));break}}}),!1),window.addEventListener("resize",(()=>{C((e=>(Me({width:window.innerWidth,height:window.innerHeight}),e)))})),Ae.Kl((()=>{He(k("log.open"),"success"),Je(!1)})),Ae.Qu((()=>{He(k("log.close"),"error"),Je(!0)})),Ae.MX(),Pe.languages.typescript.typescriptDefaults.setExtraLibs([]),Promise.all([Ae.LF({path:"es6-subset.d.ts"}),Ae.LF({path:"lua.d.ts"}),Ae.LF({path:"Dora.d.ts"}),dt()]).then((e=>{let[t,n,o,i]=e;t.success&&Pe.languages.typescript.typescriptDefaults.addExtraLib(t.content,"es6-subset.d.ts"),n.success&&Pe.languages.typescript.typescriptDefaults.addExtraLib(n.content,"lua.d.ts"),o.success&&Pe.languages.typescript.typescriptDefaults.addExtraLib(o.content,"Dora.d.ts"),null!==i&&Q([i.key]),Ae.Br().then((e=>{if(e.success&&e.editingInfo){const t=JSON.parse(e.editingInfo);let n=t.index;Promise.all(t.files.map((async(e,t)=>{try{const n=await Mt(e.key,e.title,e.folder);return n.position=e.position,n.mdEditing=e.mdEditing,n.readOnly=e.readOnly,n.sortIndex=t,n}catch{return He(k("alert.read",{title:e.title}),"error"),null}}))).then((e=>{const t=e.filter((e=>null!==e)).sort(((e,t)=>{var n,o;const i=null!==(n=e.sortIndex)&&void 0!==n?n:0,r=null!==(o=t.sortIndex)&&void 0!==o?o:0;return i<r?-1:i>r?1:0}));B(t),n>=t.length&&(n=t.length-1),n<0&&(n=0),wt(n,t[n])})).catch((()=>{He(k("alert.open"),"error")}))}}))}))):He(k("alert.getInfo"),"error")}),[]);const ht=null!==(e=null===(t=L.at(0))||void 0===t?void 0:t.key)&&void 0!==e?e:"",yt=null!==(u=null===(m=L.at(0))||void 0===m||null===(g=m.children)||void 0===g||null===(h=g.at(0))||void 0===h?void 0:h.key)&&void 0!==u?u:"",bt=(0,o.useCallback)((e=>{B((t=>{let n=!1;return t.forEach((t=>{t.key===e.key&&(e.content!==t.content||t.yarnData||t.codeWireData?(t.contentModified=e.content,void 0!==e.blocklyCode&&(t.blocklyData=e.blocklyCode),n=!0):null!==t.contentModified&&(t.contentModified=null,n=!0))})),n?[...t]:t}))}),[]);at=void 0!==M.find((e=>null!==e.contentModified));const At=(0,o.useCallback)(((e,t)=>!I.A.engineDev&&(""===e||""===yt||!!gt(e,yt)&&(t&&He(k("alert.builtin"),"info"),!0))),[yt,k]),xt=(0,o.useCallback)(((e,t,n)=>{const o=e.editor;if(void 0===o)return;const i=o.getModel();null!==i&&(At(e.key,!1)||e.readOnly||(it=Date.now(),Ge(!0),new Promise((e=>{setTimeout(e,500)})).then((()=>{Date.now()-it>=500&&(bt({key:e.key,content:t}),Ot(e,t,i,n),Ge(!1))}))))}),[At,bt]),wt=(0,o.useCallback)(((e,t)=>{var n,o;null!==j&&(null===(n=M[j])||void 0===n||null===(o=n.editor)||void 0===o||o.updateOptions({stickyScroll:{enabled:!1}}));if(S(e),null!==e&&void 0!==t){const e=t;P((t=>{const n=[];function o(t){if(t.key===e.key)return W([t.key]),U(t),!1;if(void 0!==t.children){n.push(t);const e=t.children.every((e=>o(e)));return e&&n.pop(),e}return!0}for(let e=0;e<t.length;e++)if(!o(t[e])){for(let e of n)-1===D.indexOf(e.key)&&D.push(e.key);Q([...D]);break}return t}))}}),[D,j,M]),Ct=(0,o.useCallback)((e=>{wt(e,M[e])}),[wt,M]),jt=null!==j?M.at(j):void 0;(0,o.useEffect)((()=>{if(void 0!==jt){const{editor:o}=jt;var e;if(void 0===o)return void(null===(e=jt.yarnData)||void 0===e||e.warpToFocusedNode());if(o.focus(),o.updateOptions({stickyScroll:{enabled:!0}}),jt.position){const{position:e}=jt;jt.position=void 0,B((e=>[...e])),setTimeout((()=>{o.setPosition(e),o.revealPositionInCenter(e)}),100)}const i=o.getModel();if(null===i)return;var t;if(!At(jt.key,!1)&&!jt.readOnly)Ot(jt,null!==(t=jt.contentModified)&&void 0!==t?t:jt.content,i);const r=ot.extname(jt.key).toLowerCase();".ts"!==r&&".tsx"!==r||Promise.all([n.e(475),n.e(8959)]).then(n.bind(n,26031)).then((e=>{let{revalidateModel:t}=e;t(i)}))}}),[jt,null===jt||void 0===jt?void 0:jt.editor,At]);const St=(0,o.useCallback)((e=>async t=>{e.editor=t,B((e=>[...e]));let o=null;const i=ot.extname(e.key).toLowerCase().substring(1);switch(i){case"lua":case"tl":case"yue":o=i}if("wa"===i){const{key:n}=e;t.addAction({id:"dora-action-format",label:k("editor.format"),keybindings:[Pe.KeyCode.KeyK|Pe.KeyMod.CtrlCmd,Pe.KeyCode.KeyK|Pe.KeyMod.WinCtrl],contextMenuGroupId:"navigation",contextMenuOrder:2,run:async function(){const e=t.getModel();if(null===e)return;if(!(await Ae.M9({path:n,content:e.getValue()})).success)return;const o=await Ae.wm({file:n});o.success&&(e.pushStackElement(),e.pushEditOperations(null,[{text:o.code,range:e.getFullModelRange()}],(()=>null)))}})}if(null!==o){const n=o;t.addAction({id:"dora-action-definition",label:k("editor.goToDefinition"),keybindings:[Pe.KeyCode.F12|Pe.KeyMod.CtrlCmd,Pe.KeyCode.F12|Pe.KeyMod.WinCtrl],contextMenuGroupId:"navigation",contextMenuOrder:1,run:function(o){const i=o.getPosition();if(null===i)return;const r=o.getModel();if(null===r)return;const s=r.getWordAtPosition(i);if(null===s)return;const a=r.getValueInRange({startLineNumber:i.lineNumber,startColumn:1,endLineNumber:i.lineNumber,endColumn:s.endColumn});Ae.xP({lang:n,line:a,file:e.key,row:i.lineNumber,content:r.getValue()}).then((function(e){if(e.success&&e.infered)if(void 0!==e.infered.key)pe({key:e.infered.key,title:ot.basename(e.infered.file),row:e.infered.row,col:e.infered.col});else if(e.infered.row>0&&e.infered.col>0){const n={lineNumber:e.infered.row,column:e.infered.col};t.setPosition(n),t.revealPositionInCenterIfOutsideViewport(n)}}))}});e.readOnly||At(e.key,!1)||"tl"!==n&&"lua"!==n||t.addAction({id:"dora-action-require",label:k("editor.require"),keybindings:[Pe.KeyCode.F1|Pe.KeyMod.CtrlCmd,Pe.KeyCode.F1|Pe.KeyMod.WinCtrl],contextMenuGroupId:"navigation",contextMenuOrder:2,run:function(e){const t=e.getPosition();if(null===t)return;const n=e.getModel();if(null===n)return;const o=n.getWordAtPosition(t);null!==o&&n.pushEditOperations(null,[{text:`local ${o.word} <const> = require("${o.word}")\n`,range:{startLineNumber:1,startColumn:0,endLineNumber:1,endColumn:0}}],(()=>null))}})}const r=t.getModel();if(r&&r.setValue(e.content),"tsx"===i||"ts"===i){"tsx"===i&&n.e(1597).then(n.bind(n,11597)).then((e=>{let{jsxSyntaxHighlight:n}=e;const{highlighter:o,dispose:i}=n.highlighterBuilder({editor:t});o(),t.onDidChangeModelContent((()=>{o()})),t.onDidDispose((()=>{i()}))}));const e=t.getModel();if(null===e)return;const o=e.uri.fsPath,r=await $e.create(t,{debounceDuration:2e3,sourceCache:{isFileAvailable:async e=>{const t=e.startsWith("file:")?Pe.Uri.parse(e).fsPath:e,n=ot.basename(t),i=n.toLowerCase();if(i.startsWith("dora.")&&"Dora.d.ts"!==n)return!1;if(i.startsWith("es6-subset."))return!1;if(i.startsWith("lua."))return!1;if(void 0!==Pe.languages.typescript.typescriptDefaults.getExtraLibs()[t])return!0;if(null!==Pe.editor.getModel(Pe.Uri.file(t)))return!0;return(await Ae.qU({file:t,projFile:o})).success},getFile:async e=>{const t=e.startsWith("file:")?Pe.Uri.parse(e).fsPath:e,n=Pe.languages.typescript.typescriptDefaults.getExtraLibs()[t];if(void 0!==n)return n.content;const i=Pe.editor.getModel(Pe.Uri.file(t));if(null!==i)return i.getValue();const r=await Ae.LF({path:t,projFile:o});return r.success?r.content:void 0}}});await r.resolveContents();const{revalidateModel:s}=await Promise.all([n.e(475),n.e(8959)]).then(n.bind(n,26031));s(e)}}),[k,At]),Mt=(0,o.useCallback)(((e,t,n)=>new Promise(((o,i)=>{if(n){if(At(e,!0))return void i("file readonly");const n={key:e,title:t,folder:!0,content:"",contentModified:null,status:"normal",onMount:()=>{}};return n.onMount=St(n),void o(n)}switch(ot.extname(t).toLowerCase()){case".png":case".jpg":case".skel":{const n={key:e,title:t,content:"",contentModified:null,folder:!1,status:"normal",onMount:()=>{}};n.onMount=St(n),o(n);break}case".bl":case".lua":case".tl":case".yue":case".xml":case".md":case".yarn":case".vs":case".ts":case".tsx":case".wa":case".mod":Ae.LF({path:e}).then((n=>{if(n.success&&void 0!==n.content){const{content:i}=n,r={key:e,title:t,content:i,contentModified:null,folder:!1,status:"normal",onMount:()=>{}};r.onMount=St(r),o(r)}else i("file read error")})).catch((()=>{He(k("alert.read",{title:t}),"error"),i("file read error")}));break;default:He(k("alert.unsuppored",{title:t}),"warning"),i("unknown file type")}}))),[At,St,k]),Bt=(0,o.useCallback)(((e,t,n,o,i)=>{let r=null;const s=M.find(((t,n)=>""===ot.relative(t.key,e)&&(r=n,!0)));null===r?Mt(e,t,n).then((e=>{e.readOnly=i,e.position=o,B((t=>{const n=[...t,e],o=n.length-1;return wt(o,n[o]),n}))})).catch((()=>{})):(wt(r,s),s&&o&&(s.position=o,B([...M])))}),[wt,M,Mt]);(0,o.useEffect)((()=>{null!==he&&(Bt(he.key,he.title,!1,{lineNumber:he.row,column:he.col}),pe(null))}),[he,Bt]);const Lt=(0,o.useCallback)((e=>{if(W(e.map((e=>e.key))),0===e.length)return void U(null);const{key:t,title:n,dir:o}=e[0];U(e[0]),(o||""!==ot.extname(n))&&Bt(t,n,o)}),[Bt]),Pt=(0,o.useCallback)((e=>{var t,n;const o=L.at(0);if(void 0===o)return;let i;if(i=D.length>e.length?D.filter((t=>void 0===e.find((e=>e===t)))).at(0):e.filter((e=>void 0===D.find((t=>t===e)))).at(0),i===o.key)return at?void He(k("alert.reloading"),"warning"):void dt().then((e=>{null!==e&&(B([]),wt(null),W([]),He(k("alert.reloaded"),"success"))}));"..."!==(null===(t=o.children)||void 0===t||null===(n=t.at(0))||void 0===n?void 0:n.key)?Q(e):Q([])}),[D,dt,wt,k,L]),Rt=(0,o.useCallback)(((e,t,n)=>{if(Ke)return;Ve(null!==n&&void 0!==n&&n);let o=null,i=null,r=!1;if(null!==j){const e=M.at(j);if(void 0!==e&&(o=e.key,i=e.title,r=e.folder,".md"===ot.extname(i).toLowerCase()))return e.mdEditing=!1,void B([...M])}if(null===o||null===i){if(null===O)return void He(k("alert.runNoTarget"),"info");o=O.key,i=O.title,r=O.dir}let s="Run"===e;r&&(o=ot.join(o,"init"),s=!0);const a=ot.extname(o).toLowerCase();switch(a){case".lua":case".yue":case".tl":case".ts":case".tsx":case".xml":case".wasm":case".yarn":case".vs":case".bl":case".wa":case".mod":case"":if(".yarn"===a&&!s)break;if(".wa"===a&&!s)break;return".mod"!==a||s||(s=!0),void Ae.eF({file:o,asProj:s}).then((e=>{var n,o,r,s,a,l;e.success?(He(k("alert.run",{title:null!==(n=e.target)&&void 0!==n?n:i}),"success"),t||ze({title:null!==(o=null!==(r=e.target)&&void 0!==r?r:i)&&void 0!==o?o:"Running",stopOnClose:!0})):He(k("alert.runFailed",{title:null!==(s=e.target)&&void 0!==s?s:i}),"error");t||void 0===e.err||ue({title:null!==(a=null!==(l=e.target)&&void 0!==l?l:i)&&void 0!==a?a:"",msg:e.err,raw:!0})})).catch((()=>{He(k("alert.runFailed",{title:i}),"error")}))}He(k("alert.runFailed",{title:i}),"info")}),[M,j,k,O,Ke]),Dt=(0,o.useCallback)(((e,t)=>new Promise(((o,i)=>{const r=n=>{const r=void 0!==n?[e,n]:[e];if(null!==e.contentModified){if(At(e.key,!0))return He(k("alert.builtin"),"warning"),void o(r);const{contentModified:n}=e;Ae.M9({path:e.key,content:n}).then((s=>{if(s.success){e.content=n,e.contentModified=null;const i=ot.extname(e.key).toLowerCase();if(".yue"===i||".tl"===i||".xml"===i){const{key:t}=e,n=ot.extname(t),i=ot.basename(t,n),a=ot.dirname(t),l=ot.join(a,i+".lua"),c=M.find((e=>""===ot.relative(e.key,l)));if(void 0!==c){const t=void 0===s.resultCodes?"":s.resultCodes;c.content=t,setTimeout((()=>{const e=Pe.editor.getModel(Pe.Uri.file(l));e&&e.setValue(t)}),10),o([e,c])}else o(r)}else".wa"===i?(x(!0),Ae.z6({path:e.key}).then((e=>{e.success||(He(e.message,"error",!0),Ae.G5({code:`Log "Error", "${e.message.replace(/[\\"]/g,"\\$&")}"`,log:!1}))})).finally((()=>{x(!1),o(r)}))):o(r);switch(i){case".ts":case".tsx":case".lua":case".tl":case".yue":case".xml":case".bl":{let e=n.search(/@preview-file on\b/);if(t&&e>=0){let t=n.indexOf("\n",e);-1===t&&(t=void 0);const o=n.substring(e,t);o.search(/\bclear\b/)>=0&&Ae.Ux();const i=o.search(/\bnolog\b/)<0;Rt("Run This",!0,i)}else if(e=n.search(/@preview-project on\b/),t&&e>=0){let t=n.indexOf("\n",e);-1===t&&(t=void 0);const o=n.substring(e,t);o.search(/\bclear\b/)>=0&&Ae.Ux();const i=o.search(/\bnolog\b/)<0;Rt("Run",!0,i)}break}}}else He(k("alert.saveCurrent"),"error"),i("failed to save file")})).catch((()=>{He(k("alert.saveCurrent"),"error"),i("failed to save file")}))}else o(r)};if(void 0!==e.yarnData)e.yarnData.getJSONData().then((t=>{const n=function(e){const t=e;return`${function(e){var t,n;const o=[],i=e=>"  ".repeat(e);if(o.push(`lastSavedUnix: ${e.lastSavedUnix}`),null!==(t=e.pluginStorage)&&void 0!==t&&null!==(n=t.Runner)&&void 0!==n&&n.variables){o.push("variables:");for(const t of e.pluginStorage.Runner.variables)o.push(`${i(1)}- key: ${t.key}`),o.push(`${i(2)}value: ${t.value}`)}return o.map((e=>`// ${e}`)).join("\n")}(t.header)}\n\n${t.nodes.map(Ee).join("\n")}`}(JSON.parse(t));e.contentModified=n,r()})).catch((()=>{He(k("alert.saveCurrent"),"error"),i("failed to save file")}));else if(void 0!==e.codeWireData){let{codeWireData:t}=e;const n=t.getVisualScript();if(null!==e.contentModified||e.content!==n){e.contentModified=n;let o=t.getScript();const s=ot.extname(e.key),a=ot.basename(e.key,s),l=ot.join(ot.dirname(e.key),a+".tl"),c=M.find((e=>""===ot.relative(e.key,l)));if(void 0!==c){c.content=o;const e=Pe.editor.getModel(Pe.Uri.file(l));e&&e.setValue(o)}Ae.M9({path:l,content:o}).then((e=>{e.success||(He(k("alert.saveCurrent"),"error"),i("failed to save file"))})).then((()=>{r(c),Ae.Sr({file:l,content:o}).then((e=>{if(e.success&&""!==o)t.reportVisualScriptError("");else if(void 0!==e.info){const n=o.split("\n"),i=[];for(let t of e.info){const[,e,o,,r]=t;let s="";if(""===ot.relative(e,l)&&1<=o&&o<=n.length){const e=n[o-1].match(/-- (\d+)$/);null!==e&&(s="node "+e[1]+", ")}i.push(s+"line "+o+": "+r)}t.reportVisualScriptError(i.join("<br>"))}}))})).catch((()=>{He(k("alert.saveCurrent"),"error"),i("failed to save file")}))}}else if(void 0!==e.blocklyData){const{key:t,blocklyData:n}=e,o=ot.extname(t),i=ot.basename(t,o),s=ot.join(ot.dirname(t),i+".lua"),a=M.find((e=>""===ot.relative(e.key,s)));if(void 0!==a){a.content=n;const e=Pe.editor.getModel(Pe.Uri.file(s));e&&e.setValue(n)}Ae.M9({path:s,content:n}).then((e=>{e.success&&r()}))}else{const o=ot.extname(e.key).toLowerCase();if(null===e.contentModified||".ts"!==o&&".tsx"!==o||e.key.toLocaleLowerCase().endsWith(".d.ts"))r();else{const{key:o,contentModified:s,editor:a}=e,l=null===a||void 0===a?void 0:a.getModel();Promise.all([n.e(475),n.e(8959)]).then(n.bind(n,26031)).then((n=>{let{transpileTypescript:a,setModelMarkers:c}=n;a(o,s).then((n=>{const{luaCode:o,success:s,diagnostics:a,extraError:d}=n;if(s||(d&&He(k("alert.failedTS"),"error",!0),t=!1),l&&c(l,a),void 0!==o){const t=ot.extname(e.key),n=ot.basename(e.key,t),s=ot.join(ot.dirname(e.key),n+".lua"),a=M.find((e=>""===ot.relative(e.key,s)));if(void 0!==a){a.content=o;const e=Pe.editor.getModel(Pe.Uri.file(s));e&&e.setValue(o)}Ae.M9({path:s,content:o}).then((e=>{e.success?r(a):(He(k("alert.saveCurrent"),"error"),i("failed to save file"))})).catch((()=>{He(k("alert.saveCurrent"),"error"),i("failed to save file")}))}})).catch((()=>{He(k("alert.saveCurrent"),"error"),i("failed to save file")}))}))}}}))),[k,Rt,At,M]),Nt=(0,o.useCallback)((async()=>{if(st)return!1;st=!0;const e=M.filter((e=>null!==e.contentModified));try{const t=(await Promise.all(e.map((e=>Dt(e,!1))))).flat();return B((e=>e.map((e=>{const n=t.find((t=>t.key===e.key));return void 0!==n?n:e})))),st=!1,!0}catch(t){return console.error(t),st=!1,!1}}),[Dt,M]),Ft=(0,o.useCallback)((()=>{if(null!==j){let e=j;const t=()=>{const t=M.filter(((t,n)=>n!==e));0===t.length?wt(null):(e>=t.length&&(e=t.length-1),wt(e,t[e])),B(t)};if(null!==M[j].contentModified)return void ue({title:k("popup.closingTab"),msg:k("popup.closingNoSave"),cancelable:!0,confirmed:t});setTimeout(t,10)}}),[wt,k,M,j]),It=(0,o.useCallback)((()=>{const e=()=>{B([]),wt(null)};at?ue({title:k("popup.closingTab"),msg:k("popup.closingNoSave"),cancelable:!0,confirmed:e}):e()}),[wt,k]),Et=(0,o.useCallback)((()=>{const e=()=>{const e=M.filter(((e,t)=>t===j));B(e),wt(0,e[0])};void 0!==M.filter(((e,t)=>t!==j)).find((e=>null!==e.contentModified))?ue({title:k("popup.closingTab"),msg:k("popup.closingNoSave"),cancelable:!0,confirmed:e}):e()}),[M,wt,k,j]),Tt=(0,o.useCallback)((e=>{const t=L.at(0);void 0!==t&&(t.key!==e.key?ue({title:k("menu.delete"),msg:k(e.dir?"file.deleteFolder":"file.deleteFile",{name:e.title}),cancelable:!0,confirmed:()=>{Ae.Ww({path:e.key}).then((n=>{if(!n.success)return;const o=Pe.Uri.file(e.key),i=Pe.editor.getModel(o);null!==i&&i.dispose();const r=new Set;if(e.dir){const t=e=>{if(r.add(e.key),void 0!==e.children)for(let n=0;n<e.children.length;n++)t(e.children[n])};t(e)}const s=t=>{if(e.key===t.key)return"find";if(void 0!==t.children)for(let n=0;n<t.children.length;n++){const o=s(t.children[n]);if("find"===o)return t.children=t.children.filter((t=>t.key!==e.key)),"stop";if("stop"===o)return"stop"}return"continue"};s(t),t.children&&0===t.children.length&&(t.children=[{key:"...",dir:!1,title:"..."}],Q([]));const a=M.filter((t=>""!==ot.relative(t.key,e.key)&&!r.has(t.key)));a.length!==M.length&&(B(a),null!==j&&j>=a.length&&wt(a.length-1,a[a.length-1])),P([t])})).then((()=>{He(k("alert.deleted",{title:e.title}),"success")})).catch((()=>{He(k("alert.delete"),"error")}))}}):He(k("alert.deleteRoot"),"info"))}),[M,j,k,L,wt]),Qt=(0,o.useCallback)(((e,t)=>{if(st)He(k("alert.waitForJob"),"info");else if("Cancel"!==e&&void 0!==t)switch(e){case"New":H(t);break;case"Upload":{const e=L.at(0);if(void 0===e)break;let{key:n,title:o}=t;t.dir||(n=ot.dirname(n),o=ot.basename(n),""===ot.relative(n,e.key)&&(o="Assets"));const i=M.find((e=>""===ot.relative(e.key,n)));if(void 0!==i){const e=M.indexOf(i);wt(e,i);break}Bt(n,o,!0,void 0,!1);break}case"Download":case"Obfuscate":{const n=L.at(0);if(void 0===n)break;const{key:o,title:i}=t;if(!gt(o,n.key)){He(k("alert.downloadFailed"),"error");break}const r=e=>{const t=ot.relative(n.key,e).replace("\\","/"),o=new XMLHttpRequest;o.open("GET",Ae.c2("/"+t),!0),o.responseType="blob",o.onload=function(){const e=window.URL.createObjectURL(o.response),t=document.createElement("a");t.href=e,t.download=i,t.click()},o.send()};if(t.dir){if(lt){He(k("alert.downloadWait"),"info");break}lt=!0,He(k("alert.downloadStart"),"info");const t=ot.join(n.key,".download",i+".zip");Ae.yU({zipFile:t,path:o,obfuscated:"Obfuscate"===e}).then((e=>{lt=!1,e.success?r(t):He(k("alert.downloadFailed"),"error")})).catch((()=>{He(k("alert.downloadFailed"),"error"),lt=!1}))}else r(o);break}case"Rename":{if(at){He(k("alert.renameSave"),"info");break}const e=L.at(0);if(void 0===e)break;if(e.key===t.key){He(k("alert.renameRoot"),"info");break}if(void 0!==t){const e=t.dir?"":ot.extname(t.title),n=t.dir?t.title:ot.basename(t.title,e),o=e.toLowerCase();ge({title:"file.rename",node:t,name:n,ext:o})}break}case"Delete":Tt(t);break;case"Unzip":{if(void 0===L.at(0))break;const{key:e,title:n}=t,o=ot.extname(e),i=ot.basename(e,o),r=ot.dirname(e);He(k("alert.startUnzip",{title:n}),"info"),Ae.$1({zipFile:e,path:ot.join(r,i)}).then((e=>{e.success?He(k("alert.doneUnzip",{title:n}),"success"):He(k("alert.failedUnzip",{title:n}),"error"),dt()}));break}case"Declaration":{const{key:e}=t;Ae.LF({path:e}).then((t=>{t.success&&void 0!==t.content&&Promise.all([n.e(475),n.e(8959)]).then(n.bind(n,26031)).then((n=>{let{getDeclarationFile:o}=n;const i=o(e,t.content);if(null!==i){const t=Pe.Uri.file(i.fileName),n=Pe.editor.getModel(t);null!==n&&n.setValue(i.content),Ae.qU({file:i.fileName}).then((t=>{const n=t.success;if(Ae.M9({path:i.fileName,content:i.content}).then((t=>{t.success||He(k("alert.noDeclaration",{title:ot.basename(e)}),"error")})),n)Bt(i.fileName,ot.basename(i.fileName),!1,void 0,!1);else{var o,r;const t=L.at(0);if(void 0===t)return;const n={key:i.fileName,title:ot.basename(i.fileName),dir:!1},a=t=>{if(t.key===e)return"find";if(t.children)for(let e=0;e<t.children.length;e++){const o=a(t.children[e]);if("find"===o){const o=t.children[e];let i=o;return o.dir?(void 0===o.children&&(o.children=[]),o.children.push(n)):(i=t,t.children.push(n)),void 0===D.find((e=>i.key===e))&&(D.push(i.key),Q(D)),"stop"}if("stop"===o)return"stop"}return"continue"};var s;if("find"===a(t)&&(void 0===t.children&&(t.children=[]),t.children.push(n),void 0===D.find((e=>t.key===e))&&(D.push(t.key),Q(D))),t&&"..."===(null===(o=t.children)||void 0===o||null===(r=o.at(0))||void 0===r?void 0:r.key))null===(s=t.children)||void 0===s||s.splice(0,1),Q([...D]);P([t]),W([i.fileName]),U(n);const l=M.length,c={key:i.fileName,title:ot.basename(i.fileName),folder:!1,content:i.content,contentModified:null,status:"normal",onMount:()=>{}};c.onMount=St(c),B([...M,c]),wt(l,c)}})).catch((()=>{He(k("alert.noDeclaration",{title:ot.basename(e)}),"error")}))}else He(k("alert.noDeclaration",{title:ot.basename(e)}),"error")}))}));break}case"Build":{const{key:e}=t;let o=!1;const i=async(e,t)=>{const i=t;if(At(e,!1))return;const r=ot.basename(e),s=ot.extname(e).toLowerCase(),a=ot.basename(e,s);if(".d"===ot.extname(a))return;const l=ot.dirname(e),c=ot.join(l,a+".lua"),d=M.find((e=>""===ot.relative(e.key,c)));try{if(".wa"!==s||t)if(t&&".mod"===s){o=!0,x(!0);try{const t=await Ae.z6({path:e});t.success?Ae.G5({code:`Log "Info", "Built ${r.replace(/[\\"]/g,"\\$&")}"`,log:!1}):await Ae.G5({code:`Log "Error", "${t.message.replace(/[\\"]/g,"\\$&")}"`,log:!1})}finally{x(!1)}}else if(t||".mod"!==s)if(".ts"!==s&&".tsx"!==s||e.toLocaleLowerCase().endsWith(".d.ts")){if(".yue"===s||".tl"===s||".xml"===s){const t=await Ae.jq({path:e});if(o=!0,t.success){if(i?Ae.G5({code:`Log "Info", "Built ${r.replace(/[\\"]/g,"\\$&")}"`,log:!1}):He(k("alert.build",{title:r}),"success"),void 0!==d){const e=void 0===t.resultCodes?"":t.resultCodes;d.content=e,setTimeout((()=>{const t=Pe.editor.getModel(Pe.Uri.file(c));t&&t.setValue(e)}),10)}}else i?Ae.G5({code:`Log "Error", "Failed to build ${r.replace(/[\\"]/g,"\\$&")}"`,log:!1}):He(k("alert.failedCompile",{title:r}),"warning")}}else{o=!0;const t=await Ae.LF({path:e});if(t.success&&void 0!==t.content){const{transpileTypescript:o,addDiagnosticToLog:s}=await Promise.all([n.e(475),n.e(8959)]).then(n.bind(n,26031)),{luaCode:a,diagnostics:l}=await o(e,t.content);if(l.length>0)return s(e,l),void(i||He(k("alert.failedCompile",{title:r}),"warning"));if(void 0!==a){if(void 0!==d){d.content=a;const e=Pe.editor.getModel(Pe.Uri.file(c));e&&e.setValue(a)}(await Ae.M9({path:c,content:a})).success?i?Ae.G5({code:`Log "Info", "Built ${r.replace(/[\\"]/g,"\\$&")}"`,log:!1}):He(k("alert.build",{title:r}),"success"):i?Ae.G5({code:`Log "Error", "Failed to save ${r.replace(/[\\"]/g,"\\$&")}"`,log:!1}):He(k("alert.saveCurrent"),"error")}}}else{o=!0,x(!0);try{const t=await Ae.z6({path:e});t.success?He(k("alert.build",{title:r}),"success"):(He(t.message,"error",!0),await Ae.G5({code:`Log "Error", "${t.message.replace(/[\\"]/g,"\\$&")}"`,log:!1}))}finally{x(!1)}}else{o=!0,x(!0);try{const t=await Ae.z6({path:e});t.success?He(k("alert.build",{title:r}),"success"):(He(t.message,"error",!0),await Ae.G5({code:`Log "Error", "${t.message.replace(/[\\"]/g,"\\$&")}"`,log:!1}))}finally{x(!1)}}}catch(u){o=!0,console.error(u),i?Ae.G5({code:`Log "Error", "Failed to build ${r.replace(/[\\"]/g,"\\$&")}"`,log:!1}):He(k("alert.failedCompile",{title:r}),"warning")}};if(t.dir){const{title:e}=t;ze({title:k("menu.build")+" "+e,stopOnClose:!1});(async()=>{if(st)return void He(k("alert.waitForJob"),"info");st=!0;const n=async e=>{if(void 0!==e.children)for(let t=0;t<e.children.length;t++)await n(e.children[t]);e.dir||await i(e.key,!0)};try{await n(t),await new Promise((e=>setTimeout(e,100))),Ae.G5({code:`Log "Info", "${k(o?"alert.buildDone":"alert.noBuild",{title:e}).replace(/[\\"]/g,"\\$&")}"`,log:!1})}finally{st=!1}})()}else i(e,!1);break}case"View Compiled":{const{key:e,title:n}=t,o=ot.extname(e),i=ot.basename(e,o),r=ot.dirname(e),s=ot.join(r,i+".lua");Ae.LF({path:s}).then((e=>{e.success&&void 0!==e.content?Bt(s,i+".lua",!1,void 0,!0):He(k("alert.notGenerated",{title:n}),"warning")})).catch((()=>{He(k("alert.read",{title:i+".lua"}),"error")}));break}case"Copy Path":{var o,i;const e=null!==(o=null===(i=L.at(0))||void 0===i?void 0:i.key)&&void 0!==o?o:"";let n;n=gt(t.key,e)?ot.relative(e,t.key):ot.relative(yt,t.key),navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(n).then((()=>{He(k("alert.copied",{title:t.title}),"success")})).catch((()=>{He(k("alert.copy"),"error")})):ue({title:k("alert.tocopy",{title:t.title}),msg:n,selectable:!0,raw:!0});break}}}),[At,dt,k,M,Tt,L,Bt,yt,D,St,wt]),zt=(0,o.useCallback)(((e,t)=>Ae.p_({path:e}).then((n=>{if(n.success){const o=n.files.map((n=>[ot.join(e,n),ot.join(t,n)]));o.push([e,t]);return{newFiles:M.map((e=>(o.some((t=>t[0]===e.key&&(e.key=t[1],e.folder&&(e.title=ot.basename(e.key)),null!==e.contentModified&&(e.content=e.contentModified),!0))),e))),newExpanded:D.map((e=>{const t=o.find((t=>t[0]===e));return void 0!==t?t[1]:e}))}}}))),[D,M]),Wt=(0,o.useCallback)(((e,t)=>{if(at)return void He(k("alert.movingNoSave"),"info");if(At(e.key,!0))return;if(At(t.key,!0))return;const n=L.at(0);if(void 0===n)return;let o=t.title,i=t.key;t.dir||(i=ot.dirname(t.key),o=""===ot.relative(i,n.key)?n.title:ot.basename(i)),""!==ot.relative(i,ot.dirname(e.key))&&ue({title:k("popup.moving"),msg:k("popup.movingInfo",{from:e.title,to:o}),cancelable:!0,confirmed:()=>{const t=ot.join(i,ot.basename(e.key)),n=()=>Ae.$w({old:e.key,new:t}).then((t=>{if(t.success)return dt().then((()=>{He(k("alert.moved",{from:e.title,to:o}),"success")}));He(k("alert.movingFailed",{from:e.title,to:o}),"error")}));e.dir?zt(e.key,t).then((e=>{void 0!==e&&n().then((()=>{B(e.newFiles),Q(e.newExpanded),null!==j&&j<e.newFiles.length&&e.newFiles[j].key===t&&wt(j,e.newFiles[j])}))})):n().then((()=>{const n=M.find((t=>""===ot.relative(t.key,e.key)));void 0!==n&&(n.key=t,B((e=>[...e]))),Q(D.filter((t=>t!==e.key))),null!==j&&j<M.length&&M[j].key===t&&wt(j,M[j])}))}})}),[At,D,M,zt,dt,k,L,wt,j]),Vt=(0,o.useCallback)(((e,t)=>{const n=ot.join(e,t),o=M.filter((e=>""!==ot.relative(e.key,n)));if(t.length!==o.length&&(B(o),j&&j>o.length)){const e=o.length>0?o.length-1:null;null===e?wt(e):wt(e,o[e])}rt=Date.now(),setTimeout((()=>{Date.now()-rt>=2e3&&dt()}),2e3)}),[j,dt,wt,M]),Ot=(e,t,n,o)=>{switch(ot.extname(e.key).toLowerCase()){case".lua":case".tl":case".yue":case".xml":break;default:return}Ae.Sr({file:e.key,content:t}).then((t=>{let i="normal";const r=[];if(!t.success&&void 0!==t.info)for(let s=0;s<t.info.length;s++){const[a,l,c,d,u]=t.info[s];if(!ot.isAbsolute(l)||""!==ot.relative(l,e.key)){i="error";let e=Pe.MarkerSeverity.Info;switch(a){case"parsing":case"syntax":case"type":case"crash":i="error",e=Pe.MarkerSeverity.Error;break;case"warning":"error"!==i&&(i="warning",e=Pe.MarkerSeverity.Warning)}r.push({severity:e,message:l+": "+u,startLineNumber:1,startColumn:1,endLineNumber:1,endColumn:1});continue}let m=c,g=d,h=c,p=d;switch(0===c&&(m=1,h=1),0===d&&(g=n.getLineFirstNonWhitespaceColumn(c),p=n.getLineLastNonWhitespaceColumn(c)),a){case"parsing":case"syntax":case"type":i="error",r.push({severity:Pe.MarkerSeverity.Error,message:u,startLineNumber:m,startColumn:g,endLineNumber:h,endColumn:p});break;case"warning":"error"!==i&&(i="warning"),r.push({severity:Pe.MarkerSeverity.Warning,message:u,startLineNumber:m,startColumn:g,endLineNumber:h,endColumn:p});break;case"crash":i="error",void 0!==o?r.push({severity:Pe.MarkerSeverity.Error,message:"compiler crashes",startLineNumber:o.range.startLineNumber,startColumn:o.range.startColumn,endLineNumber:o.range.endLineNumber,endColumn:o.range.endColumn}):r.push({severity:Pe.MarkerSeverity.Error,message:"compiler crashes",startLineNumber:1,startColumn:1,endLineNumber:1,endColumn:1})}}e.status=i,B((e=>[...e])),Pe.editor.setModelMarkers(n,n.getLanguageId(),r)})).catch((e=>{console.error(`failed to check file, due to: ${e}`)}))},Ut=(0,o.useCallback)((()=>{if(Ve(!1),null!==j){const e=M.at(j);if(void 0!==e){const t=e.title;if(".md"===ot.extname(t).toLowerCase()){if(e.mdEditing=!0,void 0!==e.editor){const t=e.editor;setTimeout((()=>{t.focus()}),100)}return void B([...M])}}}Ae.ds().then((e=>{e.success?(He(k("alert.stopped"),"success"),null!==Qe&&ze(null)):He(k("alert.stopNone"),"info")})).catch((()=>{He(k("alert.stopFailed"),"error")}))}),[Qe,k,j,M]),Kt=(0,o.useCallback)(((e,t)=>{st&&"View Log"!==e?He(k("alert.waitForJob"),"info"):"Go to File"!==e?"View Log"!==e?Nt().then((n=>{if(n)switch(e){case"Run":case"Run This":return void Rt(e,t);case"Stop":return void Ut()}})):null===Qe&&ze({title:k("menu.viewLog"),stopOnClose:!1}):ye(!0)}),[Qe,k,Ut,Nt,Rt]),$t=(0,o.useCallback)((async()=>{if(null===j)return;if(Ke)return void Ue(!0);if(st)return;st=!0;const e=M[j];try{const t=await Dt(e,!0);B((e=>e.map((e=>{const n=t.find((t=>t.key===e.key));return void 0!==n?n:e}))))}catch(t){console.error(`failed to save current tab, due to: ${t}`)}finally{st=!1}}),[Dt,Ke,j,M]);(0,o.useEffect)((()=>{Oe&&!Ke&&($t(),Ue(!1))}),[Oe,Ke,$t]);const Gt=(0,o.useCallback)((e=>{switch(e){case"Save":$t();break;case"SaveAll":Nt();break;case"Close":Ft();break;case"CloseAll":It();break;case"CloseOthers":Et()}}),[$t,Nt,Ft,It,Et]),Ht=(0,o.useCallback)((e=>{let t=M.findIndex((t=>t.key===e));if(-1!==t&&null!==j){const e=j===t,n=()=>{const n=M.filter(((e,n)=>n!==t));B(n),e?0===n.length?wt(null):(t>=n.length&&(t=n.length-1),wt(t,n[t])):t<j&&S(j-1)};if(null!==M[t].contentModified)return void ue({title:k("popup.closingTab"),msg:k("popup.closingNoSave"),cancelable:!0,confirmed:n});setTimeout(n,10)}}),[wt,k,M,j]);null!==K&&($(null),(e=>{if(!qe&&(e.ctrlKey||e.altKey||e.metaKey))switch(e.key){case"N":case"n":if(!e.shiftKey)break;if(null===O){He(k("alert.newNoTarget"),"info");break}if(At(O.key,!0))break;H(O);break;case"D":case"d":if(!e.shiftKey)break;if(null===O){He(k("alert.deleteNoTarget"),"info");break}if(At(O.key,!0))break;Tt(O);break;case"S":case"s":e.shiftKey?Nt():$t();break;case"W":case"w":e.shiftKey?It():Ft();break;case"R":case"r":{const t=e.shiftKey;Kt(t?"Run This":"Run");break}case"P":case"p":ye(!0);break;case"Q":case"q":Ut();break;case".":null!==Qe?ze(null):Kt("View Log");break;default:{const t=Number.parseInt(e.key);!Number.isNaN(t)&&t>=1&&t<=9&&t<=M.length&&wt(t-1);break}}})(K));const Yt=(0,o.useCallback)(((e,t)=>{const n=ot.join(ot.dirname(t),...e.split("[\\/]")),o=ot.basename(n);Bt(n,o,!1)}),[Bt]);if(fe){ye(!1);const e=L.at(0);if(void 0!==e){const t=[],{engineDev:n}=I.A,o=ot.join(yt,"Script","Tools"),i=e=>{if(!e.dir){const i=gt(e.key,ht);let r=gt(e.key,o);r&&ot.dirname(e.key)!==o&&(r=!1),(n||i||r)&&t.push({title:e.title,fileKey:e.key,path:e.key.substring(i?ht.length+1:yt.length+1)})}const{children:r}=e;if(void 0!==r)for(let t=0;t<r.length;t++)i(r[t])};i(e),xe(t)}}const qt=(0,o.useCallback)((e=>{He(e,"error")}),[]);ct=()=>{const e={index:null!==j&&void 0!==j?j:0,files:M.map((e=>{const{key:t,title:n,mdEditing:o,editor:i,readOnly:r}=e;let{position:s,folder:a=!1}=e;var l;void 0===s&&void 0!==i&&(s=null!==(l=i.getPosition())&&void 0!==l?l:void 0);return{key:t,title:n,mdEditing:o,position:s,readOnly:r,folder:a}}))};mt(e,ut)||(ut=e,Ae.Br({editingInfo:e.files.length>0?JSON.stringify(e):""}).catch((e=>{console.error(`failed to save editing info, due to: ${e}`)})))};const Jt=(0,o.useCallback)((()=>{null!==Qe&&void 0!==Qe&&Qe.stopOnClose&&Ut(),ze(null)}),[Qe,Ut]),Xt=(0,o.useCallback)(((e,t)=>{if(At(t,!1))return;const n=M.find((e=>e.key===t));if(void 0===n)return;let o="normal",i=0;for(const r of e)r.severity>i&&(i=r.severity);if(i>0)switch(i){case Pe.MarkerSeverity.Error:o="error";break;case Pe.MarkerSeverity.Warning:o="warning";break;default:o="normal"}if(void 0!==n.editor){const t=e.filter((e=>"tstl"!==e.owner&&"2497"!==e.code&&"2666"!==e.code));if(t.length!==e.length){const e=n.editor.getModel();e&&Pe.editor.setModelMarkers(e,e.getLanguageId(),t)}}n.status!==o&&(n.status=o,B([...M]))}),[M,At]),_t=(0,o.useCallback)((e=>{xe(null),null!==e&&Bt(e.fileKey,e.title,!1)}),[xe,Bt]);return(0,T.jsxs)(E.HK,{children:[(0,T.jsx)(J.A,{maxWidth:"lg",open:null!==be,transitionDuration:0,slotProps:{transition:kt},children:(0,T.jsx)(_.A,{children:null!==be?(0,T.jsx)(Ne,{options:be,onClose:_t}):null})}),(0,T.jsx)(tt,{openName:null===Qe?null:Qe.title,height:.9*De,onClose:Jt}),(0,T.jsxs)(J.A,{maxWidth:"lg",open:null!==Y,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",transitionDuration:0,slotProps:{transition:kt},children:[(0,T.jsx)(X.A,{id:"alert-dialog-title",children:null===Y||void 0===Y?void 0:Y.title}),(0,T.jsx)(N.K9,{skin:"dark",style:{height:"100%"},children:(0,T.jsx)(_.A,{children:(0,T.jsx)(Z.A,{component:"span",id:"alert-dialog-description",children:null!==Y&&void 0!==Y&&Y.selectable?(0,T.jsx)(ee.A,{fullWidth:!0,hiddenLabel:!0,multiline:!0,variant:"outlined",id:"popupText",defaultValue:null===Y||void 0===Y?void 0:Y.msg,slotProps:{input:{readOnly:!0}},sx:{"& .MuiOutlinedInput-notchedOutline":{borderColor:E.Q1.Secondary}},onFocus:e=>e.target.setSelectionRange(0,e.target.value.length)}):null!==Y&&void 0!==Y&&Y.raw?(0,T.jsx)("pre",{children:null===Y||void 0===Y?void 0:Y.msg}):null===Y||void 0===Y?void 0:Y.msg})})}),(0,T.jsxs)(te.A,{children:[(0,T.jsx)(ne.A,{onClick:()=>{void 0!==(null===Y||void 0===Y?void 0:Y.confirmed)&&Y.confirmed(),ue(null)},autoFocus:void 0===(null===Y||void 0===Y?void 0:Y.cancelable),children:k(void 0!==(null===Y||void 0===Y?void 0:Y.cancelable)?"action.confirm":"action.ok")}),void 0!==(null===Y||void 0===Y?void 0:Y.cancelable)?(0,T.jsx)(ne.A,{onClick:()=>{ue(null)},children:k("action.cancel")}):null]})]}),(0,T.jsxs)(J.A,{open:null!==me,"aria-labelledby":"filename-dialog-title","aria-describedby":"filename-dialog-description",transitionDuration:0,slotProps:{transition:kt},children:[(0,T.jsx)(X.A,{id:"filename-dialog-title",children:k(null!==(p=null===me||void 0===me?void 0:me.title)&&void 0!==p?p:"")}),(0,T.jsx)(_.A,{children:(0,T.jsxs)(i.A,{display:"flex",flexDirection:"column",gap:2,children:[(0,T.jsx)(ee.A,{autoFocus:!0,label:null!==(f="file.new"===(null===me||void 0===me?void 0:me.title)?k("file.enterFile"):void 0)&&void 0!==f?f:"file.newFolder"===(null===me||void 0===me?void 0:me.title)?k("file.enterFolder"):void 0,defaultValue:null!==(v=null===me||void 0===me?void 0:me.name)&&void 0!==v?v:"",id:"filename-adornment",sx:{m:1,width:"25ch","& .MuiOutlinedInput-notchedOutline":{borderColor:E.Q1.Secondary}},slotProps:{input:{endAdornment:(0,T.jsx)(oe.A,{position:"end",children:void 0===(null===me||void 0===me?void 0:me.ext)?void 0:".ts"!==me.ext&&".tsx"!==me.ext?".wa"===me.ext&&me.project?void 0:me.ext:(0,T.jsxs)("div",{style:{color:E.Q1.Secondary},children:[me.ext,(0,T.jsx)(l.A,{size:"small","aria-label":"toggle tsx",edge:"end",color:"primary",onClick:()=>{ge({...me,ext:".ts"===me.ext?".tsx":".ts"})},children:(0,T.jsx)(R.$3b,{})})]})})}},onChange:e=>{me&&(me.name=e.target.value,ge(me))}}),".wa"===(null===me||void 0===me?void 0:me.ext)&&"file.new"===me.title?(0,T.jsx)(ie.A,{style:{marginLeft:5},label:k("file.project",{name:"Wa"}),control:(0,T.jsx)(re.A,{checked:null===me||void 0===me?void 0:me.project,onChange:e=>{if(null===me)return;let t={...me,project:e.target.checked};ge(t)}})}):null]})}),(0,T.jsxs)(te.A,{children:[(0,T.jsx)(ne.A,{onClick:()=>{if(me&&void 0!==me.node){const e=me.node;if("file.rename"===me.title){const t=me.name+me.ext;if(t===e.title)return void ge(null);const n=e.key,o=ot.join(ot.dirname(e.key),t),i=()=>Ae.$w({old:n,new:o}).then((i=>{if(!i.success)return void He(k("alert.renameFailed"),"error");const r=Pe.Uri.file(n),s=Pe.editor.getModel(r);if(null!==s&&s.dispose(),e.dir)return void dt().then((()=>{He(k("alert.renamed",{oldFile:ot.basename(n),newFile:ot.basename(o)}),"success")}));const a=M.find((e=>""===ot.relative(e.key,n)));void 0!==a&&(a.key=o,a.title=t,B([...M]));const l=L.at(0);if(void 0===l)return;let c=null;const d=n=>{if(n.key===e.key)return n.key=o,n.title=t,c=n,!0;if(n.children)for(let e=0;e<n.children.length;e++)if(d(n.children[e]))return!0;return!1};d(l),P([l]),null!==c?(U(c),W([o])):(U(null),W([])),He(k("alert.renamed",{oldFile:ot.basename(n),newFile:ot.basename(o)}),"success")})).catch((()=>{He(k("alert.renameFailed"),"error")}));e.dir?zt(n,o).then((e=>{i().then((()=>{void 0!==e&&(B(e.newFiles),Q(e.newExpanded),U(null),W([]))}))})):(i(),U(null),W([]))}else{const t=e.dir?e.key:ot.dirname(e.key),{ext:n}=me,o=ot.join(t,me.name);if(".wa"===n&&me.project)return Ae.XX({path:o}).then((e=>{e.success?dt().then((()=>{const e=ot.join(o,"src","main.wa");Bt(e,"main.wa",!1,void 0,!1),x(!0),Ae.z6({path:e}).then((e=>{e.success||(He(e.message,"error",!0),Ae.G5({code:`Log "Error", "${e.message.replace(/[\\"]/g,"\\$&")}"`,log:!1}))})).finally((()=>{x(!1)}))})):(He(k("alert.newFailed"),"error"),Ae.G5({code:`Log "Error", "Failed to create Wa project, due to ${e.message}"`,log:!1}))})),void ge(null);const i=me.name+n,r=ot.join(t,i);let s,a="";switch(n){case".lua":a="-- @preview-file on clear\n\n",s={lineNumber:3,column:1};break;case".yue":a="-- @preview-file on clear\n_ENV = Dora\n\n",s={lineNumber:4,column:1};break;case".tsx":a="// @preview-file on clear nolog\nimport { React, toNode, useRef } from 'DoraX';\nimport {} from 'Dora';\n\n",s={lineNumber:5,column:1};break;case".ts":a="// @preview-file on clear\nimport {} from 'Dora';\n\n",s={lineNumber:4,column:1};break;case".xml":a="\x3c!-- @preview-file on clear nolog --\x3e\n<Dora>\n\t\n</Dora>\n",s={lineNumber:3,column:2};break;case".bl":a='{"blocks":{"blocks":[{"type":"comment_block","fields":{"NOTE":"@preview-file on clear"}}]}}'}const l="file.newFolder"===me.title;Ae.Jd({path:r,content:a,folder:l}).then((t=>{var o,c;if(!t.success)return void He(k("alert.newFailed"),"error");const d=L.at(0);if(void 0===d)return;const u={key:r,title:i,dir:l},m=t=>{if(t.key===e.key)return"find";if(t.children)for(let e=0;e<t.children.length;e++){const n=m(t.children[e]);if("find"===n){const n=t.children[e];let o=n;return n.dir?(void 0===n.children&&(n.children=[]),n.children.push(u)):(o=t,t.children.push(u)),void 0===D.find((e=>o.key===e))&&(D.push(o.key),Q([...D])),"stop"}if("stop"===n)return"stop"}return"continue"};var g;("find"===m(d)&&(void 0===d.children&&(d.children=[]),d.children.push(u),void 0===D.find((e=>d.key===e))&&(D.push(d.key),Q([...D]))),d&&"..."===(null===(o=d.children)||void 0===o||null===(c=o.at(0))||void 0===c?void 0:c.key))&&(null===(g=d.children)||void 0===g||g.splice(0,1),Q([...D]));P([d]),W([r]),U(u);const h=M.length;".md"===n&&(M[h].mdEditing=!0);const p={key:r,title:i,folder:l,position:s,content:a,contentModified:null,status:"normal",onMount:()=>{}};p.onMount=St(p),B([...M,p]),wt(h,p)})).catch((()=>{He(k("alert.newFailed"),"error")}))}}ge(null)},children:k("action.ok")}),(0,T.jsx)(ne.A,{onClick:()=>{ge(null)},children:k("action.cancel")})]})]}),(0,T.jsx)(ve,{open:null!==G,onClose:e=>{let t=null;switch(e){case"Lua":t=".lua";break;case"Teal":t=".tl";break;case"YueScript":t=".yue";break;case"Dora XML":t=".xml";break;case"Markdown":t=".md";break;case"Yarn":t=".yarn";break;case"Visual Script":t=".vs";break;case"Blockly":t=".bl";break;case"Wa":t=".wa";break;case"Folder":t="";break;case"TypeScript":t=".tsx"}null!==t&&ge({title:""===t?"file.newFolder":"file.new",node:null!==G?G:void 0,name:"",ext:t}),H(null)}}),(0,T.jsxs)(i.A,{sx:{display:"flex",width:"100%",height:"100%"},children:[(0,T.jsx)(a.Ay,{}),(0,T.jsx)(E.hw,{position:"fixed",open:w,drawerWidth:we,isResizing:je,children:(0,T.jsxs)(s.A,{variant:"dense",sx:{backgroundColor:E.Q1.BackgroundDark,width:"100%",color:E.Q1.Primary,minHeight:48},children:[(0,T.jsx)(l.A,{color:"inherit","aria-label":"open drawer",onClick:()=>{C(!w)},edge:"start",children:w?(0,T.jsx)(c.A,{}):(0,T.jsx)(d.A,{})}),(0,T.jsx)(q,{index:j,items:M,onChange:Ct,onMenuClick:Gt,onTabClose:Ht})]})}),(0,T.jsxs)(r.Ay,{sx:{width:we,flexShrink:0,"& .MuiDrawer-paper":{width:we,boxSizing:"border-box",borderRightColor:E.Q1.Line,borderRightWidth:.5}},variant:"persistent",anchor:"left",open:w,children:[(0,T.jsx)("a",{href:I.A.locale.match(/^zh/)?"https://ippclub.atomgit.net/Dora-SSR/zh-Hans/docs/api/intro":"https://dora-ssr.net/docs/api/intro",target:"_blank",rel:"noreferrer",style:{paddingTop:8,paddingLeft:10},children:(0,T.jsx)("img",{src:ke,alt:"logo",height:34})}),(0,T.jsx)(E.wv,{}),(0,T.jsx)(V,{selectedKeys:z,expandedKeys:D,treeData:L,onMenuClick:Qt,onSelect:Lt,onExpand:Pt,onDrop:Wt}),(0,T.jsx)("div",{style:{position:"absolute",width:vt,zIndex:1e3,top:0,right:0,bottom:0,cursor:"col-resize",backgroundColor:je?E.Q1.Theme+"88":"transparent",transition:"background-color 0.3s"},onPointerDown:Ce})]}),(0,T.jsx)(T.Fragment,{children:M.map(((e,t)=>{var n;const i=e.folder?"":ot.extname(e.title);let r=null,s=!1,a=!1,l=!1,c=!1,d=!1;switch(i.toLowerCase()){case".lua":r="lua";break;case".tl":r="tl";break;case".yue":r="yue";break;case".ts":case".tsx":r="typescript";break;case".xml":r="xml";break;case".md":r="markdown";break;case".wa":r="wa";break;case".jpg":case".png":s=!0;break;case".skel":a=!0;break;case".yarn":l=!0;break;case".bl":d=!0;break;case".vs":c=!0;break;case"":r=null;break;default:r="txt"}const u="markdown"===r,m=u&&!e.mdEditing,g=e.readOnly||At(e.key,!1);let h;return h=gt(e.key,yt)?yt:ht,(0,T.jsxs)(E.gZ,{open:w,hidden:j!==t,drawerWidth:we,children:[(0,T.jsx)(E.BE,{}),l?(0,T.jsx)(Ie,{title:e.key,defaultValue:e.content,width:Re,height:De,onLoad:t=>{e.yarnData=t},onChange:()=>{bt({key:e.key,content:""})},onKeydown:e=>{$(e)}}):null,c?(0,T.jsx)(Te,{title:e.key,defaultValue:e.content,width:Re,height:De,onLoad:t=>{e.codeWireData=t},onChange:()=>{bt({key:e.key,content:""})},onKeydown:e=>{$(e)}},e.key):null,d?(0,T.jsx)(nt,{width:Re,height:j===t?De:0,file:e.key,readOnly:g,initialJson:e.content,onSave:$t,onChange:(t,n)=>{bt({key:e.key,content:t,blocklyCode:n});const o=ot.extname(e.key),i=ot.basename(e.key,o),r=ot.join(ot.dirname(e.key),i+".lua"),s=Pe.editor.getModel(Pe.Uri.file(r));s?s.setValue(n):Pe.editor.createModel(n,"lua",Pe.Uri.file(r))}}):null,u?(0,T.jsx)(N.K9,{skin:"dark",hidden:e.mdEditing,style:{height:De},children:(0,T.jsx)(et,{fileKey:e.key,path:Ae.c2("/"+ot.relative(h,ot.dirname(e.key)).replace("\\","/")),content:null!==(n=e.contentModified)&&void 0!==n?n:e.content,onClick:Yt})}):null,s?(0,T.jsx)(N.K9,{skin:"dark",style:{height:De},children:(0,T.jsxs)(se.A,{maxWidth:"lg",children:[(0,T.jsx)(E.BE,{}),(0,T.jsx)(Fe.A,{src:Ae.c2("/"+ot.relative(h,e.key).replace("\\","/")),preview:!1})]})}):null,(()=>{if(a&&j===t){const t=ot.relative(h,e.key),n=ot.parse(t),i=ot.join(n.dir,n.name+".atlas");return(0,T.jsx)(N.K9,{skin:"dark",style:{height:De},children:(0,T.jsxs)(se.A,{maxWidth:"lg",children:[(0,T.jsx)(E.BE,{}),(0,T.jsx)(o.Suspense,{fallback:(0,T.jsx)("div",{}),children:(0,T.jsx)(Ze,{skelFile:t,atlasFile:i,onLoadFailed:qt})})]})})}return null})(),(()=>{if(r)return void 0===e.key?null:(0,T.jsx)(pt,{hidden:m,editingFile:e,width:Re,height:De,language:r,minimap:!je,onMount:e.onMount,onModified:xt,onValidate:Xt,readOnly:g},e.key);if(e.folder){if(void 0===L.at(0))return null;let t;return gt(e.key,yt)?(t=ot.relative(h,e.key),t=ot.join(k("tree.builtin"),t)):(t=ot.relative(h,e.key),t=ot.join(k("tree.assets"),t)),(0,T.jsxs)(N.K9,{skin:"dark",style:{height:De},children:[(0,T.jsx)(E.BE,{}),(0,T.jsx)(Be,{onUploaded:Vt,title:t+ot.sep,path:e.key})]},e.key)}return null})()]},e.key)}))}),M.length>0?null:(0,T.jsx)(Ye,{}),(0,T.jsx)("div",{style:{position:"fixed",left:Se.width-Re,bottom:0,width:Re,zIndex:998,transition:"all 0.2s"},hidden:!We,children:(0,T.jsx)(Xe,{height:.3*De})}),(0,T.jsxs)("div",{style:{zIndex:1200},children:[(0,T.jsx)(E.ED,{width:Re,onClick:Kt}),(0,T.jsx)(E.mr,{children:(0,T.jsx)(Le.A,{children:y.map((e=>(0,T.jsx)(ae.A,{timeout:"auto",children:(0,T.jsxs)(le.A,{variant:"filled",onClose:()=>{const t=y.filter((t=>t.key!==e.key));b(t)},severity:e.type,color:e.type,style:{margin:5},children:[e.msg,e.openLog?(0,T.jsxs)(T.Fragment,{children:["\u2003[",(0,T.jsx)(ce.A,{color:"inherit",onClick:()=>Kt("View Log"),children:k("menu.viewLog")}),"]"]}):null]})},e.key)))})})]}),(0,T.jsx)(_e.A,{open:qe,disableAutoFocus:!0,disableEnforceFocus:!0,disablePortal:!0,disableScrollLock:!0,disableEscapeKeyDown:!0,hideBackdrop:!1,style:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.7)"},children:(0,T.jsxs)(i.A,{sx:{backgroundColor:E.Q1.BackgroundDark,border:`1px solid ${E.Q1.Line}`,borderRadius:1,p:4,textAlign:"center",color:E.Q1.Primary},children:[(0,T.jsx)(de.A,{variant:"h6",component:"div",gutterBottom:!0,children:k("alert.disconnected")}),(0,T.jsx)(de.A,{variant:"body2",color:"text.secondary",children:k("alert.reconnecting")})]})})]}),(0,T.jsx)(i.A,{sx:{position:"fixed",left:(w?we:0)+20,bottom:20,zIndex:1200,opacity:A?1:0,transition:"opacity 0.5s ease-in-out 0.5s",backgroundColor:"rgba(15, 15, 15, 0.7)",padding:"8px 16px",borderRadius:"4px",animation:A?"blink 1.5s infinite":"none","@keyframes blink":{"0%":{opacity:.7},"50%":{opacity:1},"100%":{opacity:.7}}},children:(0,T.jsx)(de.A,{sx:{color:"white"},children:k("alert.saving")})})]})}},42976:(e,t,n)=>{"use strict";n.d(t,{j:()=>l,m:()=>c});var o=n(96195),i=n(80550),r=n(94837),s=n(13450),a=n(44414);const l=(0,o.Ay)((e=>(0,a.jsx)(i.A,{anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},...e})))((e=>{let{theme:t}=e;return{"& .MuiPaper-root":{borderRadius:6,marginTop:t.spacing(1),minWidth:100,backgroundColor:s.Q1.Background,border:`1px solid ${s.Q1.Line}`,"& .MuiMenu-list":{padding:"4px 0"},"& .MuiMenuItem-root":{"& .MuiSvgIcon-root":{fontSize:20},"& .MuiListItemIcon-root":{color:s.Q1.Primary},"& .MuiListItemText-root":{marginRight:t.spacing(1.5)}}}}})),c=(0,o.Ay)((e=>(0,a.jsx)(r.A,{disableRipple:!0,...e})))((e=>{let{theme:t}=e;return{}}))},77515:(e,t,n)=>{"use strict";n.d(t,{v:()=>f});var o=n(84532);const i={comments:{blockComment:["--[[","]]"],lineComment:"--"},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],folding:{markers:{start:new RegExp("^\\s*#region\\b"),end:new RegExp("^\\s*#endregion\\b")}}};var r=n(59852),s=n(84765);r.bt(((e,t)=>{const n=o.editor.getModel(o.Uri.file(e));n?n.setValue(t):o.editor.createModel(t,"typescript",o.Uri.file(e))}));const a=o.languages.typescript.typescriptDefaults.getCompilerOptions();a.noLib=!0,a.strict=!0,a.jsx=o.languages.typescript.JsxEmit.React,a.target=o.languages.typescript.ScriptTarget.ESNext,a.module=o.languages.typescript.ModuleKind.ESNext,a.moduleResolution=o.languages.typescript.ModuleResolutionKind.Classic,o.languages.typescript.typescriptDefaults.setCompilerOptions(a),o.editor.defineTheme("dora-dark",{base:"vs-dark",inherit:!0,rules:[{token:"invalid",foreground:"f44747",fontStyle:"italic"},{token:"self.call",foreground:"dcdcaa"},{token:"operator",foreground:"cc76d1"},{token:"comment",foreground:"8bb66f"}],colors:{"actionBar.toggledBackground":"#383a49","activityBar.activeBorder":"#0078d4","activityBar.background":"#181818","activityBar.border":"#2b2b2b","activityBar.foreground":"#d7d7d7","activityBar.inactiveForeground":"#868686","activityBarBadge.background":"#0078d4","activityBarBadge.foreground":"#ffffff","badge.background":"#616161","badge.foreground":"#f8f8f8","button.background":"#0078d4","button.border":"#ffffff12","button.foreground":"#ffffff","button.hoverBackground":"#026ec1","button.secondaryBackground":"#313131","button.secondaryForeground":"#cccccc","button.secondaryHoverBackground":"#3c3c3c","chat.slashCommandBackground":"#34414b","chat.slashCommandForeground":"#40a6ff","checkbox.background":"#313131","checkbox.border":"#3c3c3c","debugToolBar.background":"#181818",descriptionForeground:"#9d9d9d","dropdown.background":"#313131","dropdown.border":"#3c3c3c","dropdown.foreground":"#cccccc","dropdown.listBackground":"#1f1f1f","editor.background":"#1f1f1f","editor.findMatchBackground":"#9e6a03","editor.foreground":"#cccccc","editor.inactiveSelectionBackground":"#3a3d41","editor.selectionHighlightBackground":"#add6ff26","editorGroup.border":"#ffffff17","editorGroupHeader.tabsBackground":"#181818","editorGroupHeader.tabsBorder":"#2b2b2b","editorGutter.addedBackground":"#2ea043","editorGutter.deletedBackground":"#f85149","editorGutter.modifiedBackground":"#0078d4","editorIndentGuide.activeBackground1":"#707070","editorIndentGuide.background1":"#404040","editorLineNumber.activeForeground":"#cccccc","editorLineNumber.foreground":"#6e7681","editorOverviewRuler.border":"#010409","editorWidget.background":"#202020",errorForeground:"#f85149",focusBorder:"#0078d4",foreground:"#cccccc","icon.foreground":"#cccccc","input.background":"#313131","input.border":"#3c3c3c","input.foreground":"#cccccc","input.placeholderForeground":"#989898","inputOption.activeBackground":"#2489db82","inputOption.activeBorder":"#2488db","keybindingLabel.foreground":"#cccccc","list.activeSelectionIconForeground":"#ffffff","list.dropBackground":"#383b3d","menu.background":"#1f1f1f","menu.border":"#454545","menu.foreground":"#cccccc","menu.selectionBackground":"#0078d4","menu.separatorBackground":"#454545","notificationCenterHeader.background":"#1f1f1f","notificationCenterHeader.foreground":"#cccccc","notifications.background":"#1f1f1f","notifications.border":"#2b2b2b","notifications.foreground":"#cccccc","panel.background":"#181818","panel.border":"#2b2b2b","panelInput.border":"#2b2b2b","panelTitle.activeBorder":"#0078d4","panelTitle.activeForeground":"#cccccc","panelTitle.inactiveForeground":"#9d9d9d","peekViewEditor.background":"#1f1f1f","peekViewEditor.matchHighlightBackground":"#bb800966","peekViewResult.background":"#1f1f1f","peekViewResult.matchHighlightBackground":"#bb800966","pickerGroup.border":"#3c3c3c","ports.iconRunningProcessForeground":"#369432","progressBar.background":"#0078d4","quickInput.background":"#222222","quickInput.foreground":"#cccccc","settings.dropdownBackground":"#313131","settings.dropdownBorder":"#3c3c3c","settings.headerForeground":"#ffffff","settings.modifiedItemIndicator":"#bb800966","sideBar.background":"#181818","sideBar.border":"#2b2b2b","sideBar.foreground":"#cccccc","sideBarSectionHeader.background":"#181818","sideBarSectionHeader.border":"#2b2b2b","sideBarSectionHeader.foreground":"#cccccc","sideBarTitle.foreground":"#cccccc","statusBar.background":"#181818","statusBar.border":"#2b2b2b","statusBar.debuggingBackground":"#0078d4","statusBar.debuggingForeground":"#ffffff","statusBar.focusBorder":"#0078d4","statusBar.foreground":"#cccccc","statusBar.noFolderBackground":"#1f1f1f","statusBarItem.focusBorder":"#0078d4","statusBarItem.prominentBackground":"#6e768166","statusBarItem.remoteBackground":"#0078d4","statusBarItem.remoteForeground":"#ffffff","tab.activeBackground":"#1f1f1f","tab.activeBorder":"#1f1f1f","tab.activeBorderTop":"#0078d4","tab.activeForeground":"#ffffff","tab.border":"#2b2b2b","tab.hoverBackground":"#1f1f1f","tab.inactiveBackground":"#181818","tab.inactiveForeground":"#9d9d9d","tab.lastPinnedBorder":"#cccccc33","tab.selectedBackground":"#222222","tab.selectedBorderTop":"#6caddf","tab.selectedForeground":"#ffffffa0","tab.unfocusedActiveBorder":"#1f1f1f","tab.unfocusedActiveBorderTop":"#2b2b2b","tab.unfocusedHoverBackground":"#1f1f1f","terminal.foreground":"#cccccc","terminal.inactiveSelectionBackground":"#3a3d41","terminal.tab.activeBorder":"#0078d4","textBlockQuote.background":"#2b2b2b","textBlockQuote.border":"#616161","textCodeBlock.background":"#2b2b2b","textLink.activeForeground":"#4daafc","textLink.foreground":"#4daafc","textPreformat.background":"#3c3c3c","textPreformat.foreground":"#d0d0d0","textSeparator.foreground":"#21262d","titleBar.activeBackground":"#181818","titleBar.activeForeground":"#cccccc","titleBar.border":"#2b2b2b","titleBar.inactiveBackground":"#1f1f1f","titleBar.inactiveForeground":"#9d9d9d","welcomePage.progress.foreground":"#0078d4","welcomePage.tileBackground":"#2b2b2b","widget.border":"#313131"}});const l=(e,t)=>({triggerCharacters:e,provideCompletionItems:function(e,n,i){const s=e.getValueInRange({startLineNumber:n.lineNumber,startColumn:1,endLineNumber:n.lineNumber,endColumn:n.column});switch(i.triggerCharacter){case'"':case"'":case"/":let e=null!==s.match(/\brequire\b/);if("yue"===t&&(e=e||null!==s.match(/\bimport\b/)),e=e||null!==s.match(/\bSprite\b/),e=e||null!==s.match(/\bLabel\b/),!e)return{suggestions:[]}}const a=e.getWordUntilPosition(n),l={startLineNumber:n.lineNumber,endLineNumber:n.lineNumber,startColumn:a.startColumn,endColumn:a.endColumn};let c;if("yue"===t){c=n.lineNumber>1?e.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:n.lineNumber-1,endColumn:e.getLineLastNonWhitespaceColumn(n.lineNumber-1)}):"";let t="";const o=e.getLineFirstNonWhitespaceColumn(n.lineNumber);o>0&&(t=e.getValueInRange({startLineNumber:n.lineNumber,startColumn:1,endLineNumber:n.lineNumber,endColumn:o})),s.match(/\W[.\\]$/g)?c+="\n"+t+".___DUMMY_CALL___()\n":c+="\n"+t+"print()\n",c+=e.getValueInRange({startLineNumber:n.lineNumber+1,startColumn:1,endLineNumber:e.getLineCount(),endColumn:e.getLineLastNonWhitespaceColumn(e.getLineCount())})}else c="xml"===t?e.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:n.lineNumber,endColumn:n.column}):e.getValue();return r.My({lang:t,line:s,file:e.uri.path,row:n.lineNumber,content:c}).then((e=>e.success?void 0===e.suggestions?{suggestions:[]}:{suggestions:e.suggestions.map((e=>{const[n,i,r]=e;let s=o.languages.CompletionItemKind.Variable;switch(r){case"variable":s=o.languages.CompletionItemKind.Variable;break;case"function":s=o.languages.CompletionItemKind.Function;break;case"method":s=o.languages.CompletionItemKind.Method;break;case"field":s=o.languages.CompletionItemKind.Field;break;case"keyword":s=o.languages.CompletionItemKind.Keyword}return"xml"===t?{label:n,kind:s,insertText:i,insertTextRules:o.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:l}:{label:n,kind:s,document:i,detail:i,insertText:n,range:l}}))}:{suggestions:[]})).catch((e=>{console.error(`failed to complete codes, due to: ${e}`)}))}}),c=e=>({provideHover:function(t,n){const i=t.getWordAtPosition(n);if(null===i)return{contents:[]};const a=t.getValueInRange({startLineNumber:n.lineNumber,startColumn:1,endLineNumber:n.lineNumber,endColumn:i.endColumn});return r.xP({lang:e,line:a,file:t.uri.path,row:n.lineNumber,content:t.getValue()}).then((function(e){if(!e.success)return{contents:[]};if(void 0===e.infered)return{contents:[]};const t="polymorphic function (with types ";let r=e.infered.desc;if("<invalid type>"===r||"<unknown type>"===r)return{contents:[]};if(r.startsWith(t)){r=r.substring(33),r=r.substring(0,r.length-1);r=(s.A.locale.match(/^zh/)?"\u591a\u91cd\u5b9a\u4e49":"Polymorphic")+":\n"+r.split(" and ").join("\n"),e.infered.desc=r}const a=[{value:"```tl\n"+e.infered.desc+"\n```"}];return void 0!==e.infered.doc&&a.push({value:e.infered.doc}),0!==e.infered.row&&0!==e.infered.col?(""===e.infered.file&&(e.infered.file="current file"),a.push({value:`${e.infered.file}:${e.infered.row}:${e.infered.col}`})):a.push({value:"Lua built-in"}),{range:new o.Range(n.lineNumber,i.startColumn,n.lineNumber,i.endColumn),contents:a}})).catch((e=>{console.error(`failed to infer codes, due to: ${e}`)}))}}),d=(e,t)=>({signatureHelpTriggerCharacters:e,provideSignatureHelp(e,n,o,i){var s,a;let l=null!==(s=null===(a=i.activeSignatureHelp)||void 0===a?void 0:a.activeSignature)&&void 0!==s?s:0,c=0;let d=e.getValueInRange({startLineNumber:n.lineNumber,startColumn:1,endLineNumber:n.lineNumber,endColumn:n.column});for(;;){const e=d.replace(/\([^()]*\)/g,"");if(e===d)break;d=e}let u=d,m="";switch(t){case"lua":case"tl":{const t=d.lastIndexOf("(");if(u=d.substring(0,t),t>=0)for(let e=t;e<d.length;e++)","===d.at(e)&&c++;m=e.getValue();break}case"yue":{d=d.replace(/\s*,\s*/g,",");let t=Math.max(d.lastIndexOf(" "),d.lastIndexOf("("));if(u=d.substring(0,t),t>=0)for(let e=t;e<d.length;e++)","===d.at(e)&&c++;m=n.lineNumber>1?e.getValueInRange({startLineNumber:1,startColumn:1,endLineNumber:n.lineNumber-1,endColumn:e.getLineLastNonWhitespaceColumn(n.lineNumber-1)}):"";let o="";const i=e.getLineFirstNonWhitespaceColumn(n.lineNumber);i>0&&(o=e.getValueInRange({startLineNumber:n.lineNumber,startColumn:1,endLineNumber:n.lineNumber,endColumn:i})),u.match(/\W[.\\][^.\\]+$/g)?m+="\n"+o+".___DUMMY_CALL___()\n":m+="\n"+o+"print()\n",m+=e.getValueInRange({startLineNumber:n.lineNumber+1,startColumn:1,endLineNumber:e.getLineCount(),endColumn:e.getLineLastNonWhitespaceColumn(e.getLineCount())});break}}return r.vl({lang:t,line:u,file:e.uri.path,row:n.lineNumber,content:m}).then((e=>{var t;if(!e.success)return null;if(void 0===e.signatures)return null;const n=e.signatures.map((e=>{var t;return{label:e.desc,documentation:{value:e.doc},parameters:(null!==(t=e.params)&&void 0!==t?t:[]).map((e=>({label:e.name,documentation:{value:e.desc}})))}}));if((l>=n.length||n[l].label!==(null===(t=i.activeSignatureHelp)||void 0===t?void 0:t.signatures[l].label))&&(l=0),n[l].parameters.length<=c)for(let o=0;o<n.length;o++)if(n[o].parameters.length>c){l=o;break}return{dispose:()=>{},value:{signatures:n,activeSignature:l,activeParameter:c}}}))}}),u={provideCodeActions(e,t,n){if("quickfix"!==n.only)return;const o=n.markers.find((e=>e.message.startsWith("unknown variable:")));if(void 0===o)return;const i=o.message.replace("unknown variable: ","");return{actions:[{title:`${s.A.locale.match(/^zh/)?"\u5bfc\u5165\u6a21\u5757":"Require"} ${i}`,edit:{edits:[{resource:e.uri,textEdit:{text:`local ${i} <const> = require("${i}")\n`,range:{startLineNumber:1,startColumn:0,endLineNumber:1,endColumn:0}}}]},isPreferred:!0,kind:"quickfix"}],dispose(){}}}};o.languages.register({id:"tl"}),o.languages.setLanguageConfiguration("tl",{comments:{lineComment:"--",blockComment:["--[[","]]"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]}),o.languages.setMonarchTokensProvider("tl",{defaultToken:"",tokenPostfix:".tl",keywords:["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","record","as","is","type","embed","enum","const"],types:["boolean","number","integer","string","table","thread","any","userdata"],brackets:[{token:"delimiter.bracket",open:"{",close:"}"},{token:"delimiter.array",open:"[",close:"]"},{token:"delimiter.parenthesis",open:"(",close:")"}],operators:["+","-","*","/","%","^","#","==","~=","<=",">=","<",">","=",";",":",",",".","?","?:","..","...",">:"],builtins:["assert","collectgarbage","dofile","error","next","print","rawget","rawset","tonumber","tostring","type","_ENV","_VERSION","_G","getfenv","getmetatable","ipairs","loadfile","loadstring","pairs","pcall","rawequal","require","setfenv","setmetatable","unpack","xpcall","load","module","select","package.cpath","package.loaded","package.loadlib","package.path","package.preload","package.seeall","package","coroutine.running","coroutine.create","coroutine.resume","coroutine.status","coroutine.wrap","coroutine.yield","coroutine","string.byte","string.char","string.dump","string.find","string.len","string.lower","string.rep","string.sub","string.upper","string.format","string.gsub","string.gmatch","string.match","string.reverse","string","table.maxn","table.concat","table.sort","table.insert","table.remove","table","math.abs","math.acos","math.asin","math.atan","math.atan2","math.ceil","math.sin","math.cos","math.tan","math.deg","math.exp","math.floor","math.log","math.log10","math.max","math.min","math.fmod","math.modf","math.cosh","math.sinh","math.tanh","math.pow","math.rad","math.sqrt","math.frexp","math.ldexp","math.random","math.randomseed","math.pi","math","io.stdin","io.stdout","io.stderr","io.close","io.flush","io.input","io.lines","io.open","io.output","io.popen","io.read","io.tmpfile","io.type","io.write","io","os.clock","os.date","os.difftime","os.execute","os.exit","os.getenv","os.remove","os.rename","os.setlocale","os.time","os.tmpname","os","debug.debug","debug.gethook","debug.getinfo","debug.getlocal","debug.getupvalue","debug.setlocal","debug.setupvalue","debug.sethook","debug.traceback","debug.getfenv","debug.getmetatable","debug.getregistry","debug.setfenv","debug.setmetatable","debug"],symbols:/[><!~?:&|+\-*\/\^%\.]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/[A-Z][\w\$]*/,"type.identifier"],[/[a-zA-Z_][\w\.$]*/,{cases:{"@keywords":{token:"keyword.$0"},"@types":"type.identifier","@builtins":"self.call","@default":"identifier"}}],[/<\s*(close|const|total)\s*>/,"operator"],{include:"@whitespace"},[/[{}()\[\]]/,"@brackets"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F_]*[0-9a-fA-F]/,"number.hex"],[/\d+?/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/"/,"string",'@string."'],[/'/,"string","@string.'"]],whitespace:[[/[ \t\r\n]+/,""],[/\[([=]*)\[/,"comment","@comment.$1"],[/--\[([=]*)\[/,"comment","@comment.$1"],[/--.*$/,"comment"]],comment:[[/[^\]]+/,"comment"],[/\]([=]*)\]/,{cases:{"$1==$S2":{token:"comment",next:"@pop"},"@default":"comment"}}],[/./,"comment"]],string:[[/[^\\"']+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/["']/,{cases:{"$#==$S2":{token:"string",next:"@pop"},"@default":"string"}}]]}});const m=l([".",":",'"',"'","/"],"tl");o.languages.registerCompletionItemProvider("tl",m),o.languages.registerHoverProvider("tl",c("tl")),o.languages.registerSignatureHelpProvider("tl",d(["(",","],"tl")),o.languages.registerCodeActionProvider("tl",u);const g=l([".",":",'"',"'","/"],"lua");o.languages.setLanguageConfiguration("lua",{comments:{lineComment:"--",blockComment:["--[[","]]"]},brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]}),o.languages.setMonarchTokensProvider("lua",{defaultToken:"",tokenPostfix:".lua",keywords:["and","break","do","else","elseif","end","false","for","function","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while"],brackets:[{token:"delimiter.bracket",open:"{",close:"}"},{token:"delimiter.array",open:"[",close:"]"},{token:"delimiter.parenthesis",open:"(",close:")"}],operators:["+","-","*","/","%","^","#","==","~=","<=",">=","<",">","=",";",":",",",".","?","?:","..","..."],builtins:["assert","collectgarbage","dofile","error","next","print","rawget","rawset","tonumber","tostring","type","_ENV","_VERSION","_G","getfenv","getmetatable","ipairs","loadfile","loadstring","pairs","pcall","rawequal","require","setfenv","setmetatable","unpack","xpcall","load","module","select","package.cpath","package.loaded","package.loadlib","package.path","package.preload","package.seeall","package","coroutine.running","coroutine.create","coroutine.resume","coroutine.status","coroutine.wrap","coroutine.yield","coroutine","string.byte","string.char","string.dump","string.find","string.len","string.lower","string.rep","string.sub","string.upper","string.format","string.gsub","string.gmatch","string.match","string.reverse","string","table.maxn","table.concat","table.sort","table.insert","table.remove","table","math.abs","math.acos","math.asin","math.atan","math.atan2","math.ceil","math.sin","math.cos","math.tan","math.deg","math.exp","math.floor","math.log","math.log10","math.max","math.min","math.fmod","math.modf","math.cosh","math.sinh","math.tanh","math.pow","math.rad","math.sqrt","math.frexp","math.ldexp","math.random","math.randomseed","math.pi","math","io.stdin","io.stdout","io.stderr","io.close","io.flush","io.input","io.lines","io.open","io.output","io.popen","io.read","io.tmpfile","io.type","io.write","io","os.clock","os.date","os.difftime","os.execute","os.exit","os.getenv","os.remove","os.rename","os.setlocale","os.time","os.tmpname","os","debug.debug","debug.gethook","debug.getinfo","debug.getlocal","debug.getupvalue","debug.setlocal","debug.setupvalue","debug.sethook","debug.traceback","debug.getfenv","debug.getmetatable","debug.getregistry","debug.setfenv","debug.setmetatable","debug"],symbols:/[><!~?:&|+\-*\/\^%\.]+/,escapes:/\\(?:[abfnrtv\\"']|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/[A-Z][\w\$]*/,"type.identifier"],[/[a-zA-Z_][\w\.$]*/,{cases:{"@keywords":{token:"keyword.$0"},"@builtins":"self.call","@default":"identifier"}}],{include:"@whitespace"},[/<\s*(const|close)\s*>/,"operator"],[/[{}()\[\]]/,"@brackets"],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],[/\d*\.\d+([eE][\-+]?\d+)?/,"number.float"],[/0[xX][0-9a-fA-F_]*[0-9a-fA-F]/,"number.hex"],[/\d+?/,"number"],[/[;,.]/,"delimiter"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/'([^'\\]|\\.)*$/,"string.invalid"],[/"/,"string",'@string."'],[/'/,"string","@string.'"]],whitespace:[[/[ \t\r\n]+/,""],[/\[([=]*)\[/,"comment","@comment.$1"],[/--\[([=]*)\[/,"comment","@comment.$1"],[/--.*$/,"comment"]],comment:[[/[^\]]+/,"comment"],[/\]([=]*)\]/,{cases:{"$1==$S2":{token:"comment",next:"@pop"},"@default":"comment"}}],[/./,"comment"]],string:[[/[^\\"']+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/["']/,{cases:{"$#==$S2":{token:"string",next:"@pop"},"@default":"string"}}]]}}),o.languages.registerCompletionItemProvider("lua",g),o.languages.registerHoverProvider("lua",c("lua")),o.languages.registerSignatureHelpProvider("lua",d(["(",","],"lua")),o.languages.register({id:"yue"}),o.languages.setLanguageConfiguration("yue",i),o.languages.setMonarchTokensProvider("yue",{defaultToken:"",ignoreCase:!1,tokenPostfix:".yue",brackets:[{open:"{",close:"}",token:"delimiter.curly"},{open:"[",close:"]",token:"delimiter.square"},{open:"(",close:")",token:"delimiter.parenthesis"}],keywords:["and","break","do","else","elseif","false","for","goto","if","in","local","nil","not","or","repeat","return","then","true","until","while","as","class","continue","export","extends","from","global","import","macro","switch","try","unless","using","when","with"],builtins:["assert","collectgarbage","dofile","error","next","print","rawget","rawset","tonumber","tostring","type","_ENV","_VERSION","_G","getfenv","getmetatable","ipairs","loadfile","loadstring","pairs","pcall","rawequal","require","setfenv","setmetatable","unpack","xpcall","load","module","select","package.cpath","package.loaded","package.loadlib","package.path","package.preload","package.seeall","package","coroutine.running","coroutine.create","coroutine.resume","coroutine.status","coroutine.wrap","coroutine.yield","coroutine","string.byte","string.char","string.dump","string.find","string.len","string.lower","string.rep","string.sub","string.upper","string.format","string.gsub","string.gmatch","string.match","string.reverse","string","table.maxn","table.concat","table.sort","table.insert","table.remove","table","math.abs","math.acos","math.asin","math.atan","math.atan2","math.ceil","math.sin","math.cos","math.tan","math.deg","math.exp","math.floor","math.log","math.log10","math.max","math.min","math.fmod","math.modf","math.cosh","math.sinh","math.tanh","math.pow","math.rad","math.sqrt","math.frexp","math.ldexp","math.random","math.randomseed","math.pi","math","io.stdin","io.stdout","io.stderr","io.close","io.flush","io.input","io.lines","io.open","io.output","io.popen","io.read","io.tmpfile","io.type","io.write","io","os.clock","os.date","os.difftime","os.execute","os.exit","os.getenv","os.remove","os.rename","os.setlocale","os.time","os.tmpname","os","debug.debug","debug.gethook","debug.getinfo","debug.getlocal","debug.getupvalue","debug.setlocal","debug.setupvalue","debug.sethook","debug.traceback","debug.getfenv","debug.getmetatable","debug.getregistry","debug.setfenv","debug.setmetatable","debug"],invalid:["function","end"],symbols:/==|~=|!=|=>|<=|[><!~?&%|+\-*\/\^\.\:@]=?/,escapes:/\\(?:[abfnrtv\\"'$]|x[0-9A-Fa-f]{1,4}|u[0-9A-Fa-f]{4}|U[0-9A-Fa-f]{8})/,tokenizer:{root:[[/[a-z_$][\w\.$]*/,{cases:{self:"variable.predefined","@builtins":"self.call","@keywords":{token:"keyword.$0"},"@invalid":"invalid","@default":""}}],[/[A-Z][\w\$]*/,"type.identifier"],{include:"@whitespace"},[/}/,{cases:{"$S2==interpolatedstring":{token:"string",next:"@pop"},"@default":"@brackets"}}],[/\\[\w]+/,"self.call"],[/[{}()\[\]]/,"@brackets"],[/@symbols/,"operator"],[/\d[\d_]*[eE]([\-+]?\d[\d_]*)?/,"number.float"],[/\d[\d_]*\.\d[\d_]*([eE][\-+]?\d[\d_]*)?/,"number.float"],[/0[xX][0-9a-fA-F][0-9a-fA-F_]*/,"number.hex"],[/\d[\d_]*/,"number"],[/[,.]/,"delimiter"],[/"/,{cases:{"@default":{token:"string",next:'@string."'}}}],[/'/,{cases:{"@eos":"string","@default":{token:"string",next:"@string.'"}}}]],string:[[/[^\\"'\#]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/#{/,{cases:{'$S2=="':{token:"string",next:"root.interpolatedstring"},"@default":"string"}}],[/["']/,{cases:{"$#==$S2":{token:"string",next:"@pop"},"@default":"string"}}],[/#/,"string"]],whitespace:[[/[ \t\r\n]+/,""],[/\[([=]*)\[/,"comment","@comment.$1"],[/--\[\[/,"comment","@comment.$1"],[/--.*$/,"comment"]],comment:[[/[^\]]+/,"comment"],[/\]([=]*)\]/,{cases:{"$1==$S2":{token:"comment",next:"@pop"},"@default":"comment"}}],[/./,"comment"]]}});const h=l([".","\\","/",'"',"'"],"yue");o.languages.registerCompletionItemProvider("yue",h),o.languages.registerHoverProvider("yue",c("yue")),o.languages.registerSignatureHelpProvider("yue",d(["(",","," "],"yue"));const p=l([">","<","/"," ","\t","=","\n"],"xml");o.languages.registerCompletionItemProvider("xml",p),o.editor.onDidCreateEditor((e=>{e.onDidChangeModel((()=>{e.updateOptions({readOnly:!0})}))})),o.languages.register({id:"wa"}),o.languages.setLanguageConfiguration("wa",{brackets:[["{","}"],["[","]"],["(",")"]],autoClosingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"',notIn:["string","comment"]},{open:"'",close:"'",notIn:["string","comment"]}],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"}]}),o.languages.setMonarchTokensProvider("wa",{defaultToken:"",tokenPostfix:".wa",ignoreCase:!1,keywords:["break","defer","import","struct","case","else","interface","switch","const","for","map","type","continue","func","range","default","global","if","return","make","true","false"],typeKeywords:["bool","string","error","map","int","int8","int16","int32","int64","i8","i16","i32","i64","rune","uint","uint8","uint16","uint32","uint64","u8","u16","u32","u64","uintptr","byte","float32","float64","f32","f64","complex64","complex128","c64","c128"],operators:["==","!=","<=",">=","<",">","+","-","*","/","%","++","--","!","&&","||",":=","=>","=","<<",">>","&","^","|"],symbols:/==|!=|<=|>=|<|>|\+\+|--|:=|=>|&&|\|\||<<|>>|[+\-*/%&^|=!]/,escapes:/\\(?:[nrt"'\\]|x[0-9A-Fa-f]{2}|u\{[0-9A-Fa-f]+\})/,tokenizer:{root:[{include:"@whitespace"},[/\/\/.*$/,"comment"],[/\/\*/,"comment","@comment"],[/\bfunc\b\s*/,{token:"keyword",next:"@functionDecl"}],[/\bconst\b/,"keyword"],[/((?<!\.)[A-Za-z_][\w]+)(?=\s*\()/,"self.call"],[/((?<!\.)[A-Z][\w]+)/,"type.identifier"],[/\./,"operator"],[/((?<!\bfunc\s)[A-Za-z_][\w]*)(?=\s*\()/,"self.call"],[/[A-Za-z_][\w]*/,{cases:{"@keywords":"keyword","@typeKeywords":"type"}}],[/[A-Z][\w]*/,"type.identifier"],[/"([^"\\]|\\.)*$/,"string.invalid"],[/"/,{token:"string.quote",next:"@string_double"}],[/'([^'\\]|\\.)*$/,"string.invalid"],[/'/,{token:"string.quote",next:"@string_single"}],[/\b0b[01_]+\b/,"number.binary"],[/\b0o[0-7_]+\b/,"number.octal"],[/\b0x[0-9A-Fa-f_]+\b/,"number.hex"],[/\d[\d_]*(\.[\d_]*)?([eE][+-]?[\d_]+)?/,"number.float"],[/\d[\d_]*/,"number"],[/[A-Za-z_][\w]*/,{cases:{"@default":"identifier"}}],[/@symbols/,{cases:{"@operators":"operator","@default":""}}],[/[{}()[\]]/,"@brackets"],[/[,.;]/,"delimiter"]],functionDecl:[[/[a-z_][\w]*/,"","@functionParams"],[/[A-Z][\w]*/,"","@functionParams"],[/\(/,"delimiter.parenthesis","@paramList"],["","","@pop"]],functionParams:[[/\(/,"delimiter.parenthesis","@paramList"],["","","@pop"]],paramList:[[/[A-Z][\w]*/,"type.identifier"],[/[a-z_][\w]*\s*\./,""],[/[a-z_][\w]*/,{cases:{"@typeKeywords":"type.identifier","@default":"variable.parameter"}}],[/:/,"delimiter"],[/,/,"delimiter"],[/@symbols/,"operator"],[/\)/,"delimiter.parenthesis","@pop"],[/[ \t\r\n]+/,""]],comment:[[/[^*]+/,"comment"],[/\*\//,"comment","@pop"],[/[/*]/,"comment"]],string_double:[[/[^\\"]+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/"/,{token:"string.quote",next:"@pop"}]],string_single:[[/[^\\']+/,"string"],[/@escapes/,"string.escape"],[/\\./,"string.escape.invalid"],[/'/,{token:"string.quote",next:"@pop"}]],whitespace:[[/[ \t\r\n]+/,"white"]]}});const f="dora-dark"}}]);